---
url: /special/mobile/basic/viewport.md
---
# 视窗与分辨率

视窗与分辨率是移动端开发中影响用户体验的核心概念。理解它们之间的关系和差异对于创建适配多种设备的界面至关重要，直接决定了应用在不同屏幕上的显示效果和布局适应性。

## 视窗概念与类型

视窗是指用户能够看到网页或应用内容的区域面积，在移动端开发中具有特殊重要性。

* **布局视窗**：网页元素的总体布局容器，在移动浏览器中通常比设备屏幕宽。

  ```
  [布局视窗 - 比屏幕宽]
  ┌─────────────────────┐
  │ 网页完整宽度内容 │ ← 可横向滚动
  └─────────────────────┘
  例如：在手机上访问桌面网站时，需要左右滚动才能看到全部内容。

  ```

* **视觉视窗**：用户当前实际看到的屏幕区域，随缩放操作而变化。

  ```
  缩放前：
  [视觉视窗]
  ┌──────────┐
  │ 可见内容 │
  └──────────┘

  放大后：
  [视觉视窗]
  ┌────┐
  │ 部分 │ ← 看到的内容变少
  └────┘
  ```

* **理想视窗**：针对移动设备优化的视窗设置，通过 viewport 元标签控制。

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
```

效果：
桌面布局 → 移动适配布局
需要缩放 → 完美适配屏幕

## 分辨率基础

分辨率描述了屏幕显示细节的精细程度，分为物理和逻辑两种类型。

* **物理分辨率**：屏幕实际拥有的像素数量，通常表示为宽度 × 高度。

  示例设备：
  iPhone 15 Pro Max：1290×2796 像素
  Samsung Galaxy S24：1080×2340 像素

```
  物理像素网格：
  ┌─┬─┬─┬─┐
  │■│■│■│■│ ← 每个 ■ 代表一个物理像素
  ├─┼─┼─┼─┤
  │■│■│■│■│
  └─┴─┴─┴─┘
```

* **逻辑分辨率**：开发中使用的抽象像素单位，也称为设备独立像素。

```
  物理像素与逻辑像素关系：
  高密度屏幕：1 逻辑像素 = 4 物理像素
  ┌───┐
  │███│ ← 逻辑像素
  │███│
  └───┘
  实际由：
  ┌─┬─┐
  │■│■│ ← 物理像素
  ├─┼─┤
  │■│■│
  └─┴─┘
  组成
```

## 像素密度与比例因子

像素密度决定了屏幕显示的清晰度，比例因子在物理像素和逻辑像素之间建立桥梁。

* **PPI 计算**：每英寸像素数，衡量屏幕密度。

  公式：PPI = √ (宽度像素 ² + 高度像素 ²) / 对角线英寸数

  示例：设备宽度 1080px，高度 2340px，屏幕尺寸 6.1 英寸
  PPI = √(1080² + 2340²) / 6.1 ≈ 413 PPI

* **比例因子**：物理像素与逻辑像素的换算比率。

  常见设备比例因子：
  普通密度：@1x (iPhone 3GS)
  高密度：@2x (iPhone 4-8)
  超高密度：@3x (iPhone X 及更新机型)

  资源适配：
  图标设计：
  @1x：50×50 像素
  @2x：100×100 像素\
  @3x：150×150 像素

## 视窗配置与适配

正确的视窗配置是移动端适配的基础，通过 HTML meta 标签和 CSS 技术实现。

* **Viewport Meta 标签**：控制移动浏览器的视窗行为。

  标准配置：


  参数说明：
  width=device-width → 视窗宽度=设备宽度
  initial-scale=1 → 初始缩放级别=1
  user-scalable=no → 禁止用户缩放

* **CSS 视窗单位**：相对于视窗尺寸的动态单位。

  单位示例：
  vw：视窗宽度的 1%
  vh：视窗高度的 1%
  vmin：视窗较小尺寸的 1%
  vmax：视窗较大尺寸的 1%

  使用效果：

  ```css
  .element {
  width: 50vw; /_ 总是视窗宽度的一半 _/
  height: 100vh; /_ 总是视窗高度 _/
  }
  ```

## 响应式断点策略

基于屏幕尺寸的断点系统确保布局在不同设备上都能正常显示。

* **常用断点参考**：
  手机：0-768px
  平板：768-1024px\
  桌面：1024px 以上

* **移动优先设计**：从小屏幕开始向上适配的开发方法。

  代码示例：

  ```css
  /* 基础样式 - 手机优先 */
  .container {
    padding: 10px;
  }

  /* 平板适配 */
  @media (min-width: 768px) {
    .container {
      padding: 20px;
    }
  }

  /* 桌面适配 */
  @media (min-width: 1024px) {
    .container {
      padding: 30px;
    }
  }
  ```

## 常见适配问题与解决方案

移动端视窗与分辨率适配中经常遇到的问题及应对方法。

* **图片模糊问题**：在高密度屏幕上显示低分辨率图片导致的模糊。

  解决方案：
  使用 srcset 属性：

  ```html
  <img
    src="image-1x.jpg"
    srcset="image-2x.jpg 2x, image-3x.jpg 3x"
    alt="自适应图片"
  />
  ```

  效果：浏览器根据设备像素比自动选择合适图片。

* **视窗高度问题**：移动浏览器地址栏导致的视窗高度变化。

  示意图：

  ```
  初始状态：
  [地址栏]
  [100vh 内容 - 被截断]
  [工具栏]

  滚动后：
  [地址栏隐藏]
  [100vh 内容 - 完全显示]
  [工具栏]
  ```

  解决方案：使用 dvh 单位

  ```css
  .full-screen {
  height: 100dvh; /_ 动态视窗高度 _/
  }
  ```

* **安全区域适配**：刘海屏和圆角切割问题。

  示意图：
  不安全区域：
  ┌──────┐
  │######│ ← 刘海区域
  │ 内容被遮挡 │
  └──────┘

  安全区域：
  ┌──────┐
  │######│
  │ 可见内容 │ ← 通过 padding 调整
  └──────┘

  CSS 解决方案：

  ```css
  .safe-area {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
  ```

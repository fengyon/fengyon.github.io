import{_ as a,c as n,o as l,b as p}from"./chunks/framework.CMLuPXeo.js";const d=JSON.parse('{"title":"umijs çŠ¶æ€ç®¡ç†","description":"","frontmatter":{},"headers":[{"level":2,"title":"çŠ¶æ€ç®¡ç†å…¨æ™¯å›¾","slug":"çŠ¶æ€ç®¡ç†å…¨æ™¯å›¾","link":"#çŠ¶æ€ç®¡ç†å…¨æ™¯å›¾","children":[]},{"level":2,"title":"åº”ç”¨åˆå§‹åŒ–çŠ¶æ€","slug":"åº”ç”¨åˆå§‹åŒ–çŠ¶æ€","link":"#åº”ç”¨åˆå§‹åŒ–çŠ¶æ€","children":[{"level":3,"title":"åˆå§‹åŒ–çŠ¶æ€è®¾ç½®","slug":"åˆå§‹åŒ–çŠ¶æ€è®¾ç½®","link":"#åˆå§‹åŒ–çŠ¶æ€è®¾ç½®","children":[]},{"level":3,"title":"ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€","slug":"ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€","link":"#ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€","children":[]}]},{"level":2,"title":"ç®€æ˜“æ•°æ®ç®¡ç†æ–¹æ¡ˆ","slug":"ç®€æ˜“æ•°æ®ç®¡ç†æ–¹æ¡ˆ","link":"#ç®€æ˜“æ•°æ®ç®¡ç†æ–¹æ¡ˆ","children":[{"level":3,"title":"Plugin-model åŸºç¡€","slug":"plugin-model-åŸºç¡€","link":"#plugin-model-åŸºç¡€","children":[]},{"level":3,"title":"åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Model","slug":"åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-model","link":"#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-model","children":[]}]},{"level":2,"title":"åŸºäº Dva çš„å¤æ‚çŠ¶æ€ç®¡ç†","slug":"åŸºäº-dva-çš„å¤æ‚çŠ¶æ€ç®¡ç†","link":"#åŸºäº-dva-çš„å¤æ‚çŠ¶æ€ç®¡ç†","children":[{"level":3,"title":"Dva Model ç»“æ„","slug":"dva-model-ç»“æ„","link":"#dva-model-ç»“æ„","children":[]},{"level":3,"title":"åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Dva","slug":"åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-dva","link":"#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-dva","children":[]}]},{"level":2,"title":"å¼‚æ­¥æ•°æ®ç®¡ç†","slug":"å¼‚æ­¥æ•°æ®ç®¡ç†","link":"#å¼‚æ­¥æ•°æ®ç®¡ç†","children":[{"level":3,"title":"useAPI Hook","slug":"useapi-hook","link":"#useapi-hook","children":[]},{"level":3,"title":"é«˜çº§å¼‚æ­¥åŠŸèƒ½","slug":"é«˜çº§å¼‚æ­¥åŠŸèƒ½","link":"#é«˜çº§å¼‚æ­¥åŠŸèƒ½","children":[]}]},{"level":2,"title":"æƒé™çŠ¶æ€ç®¡ç†","slug":"æƒé™çŠ¶æ€ç®¡ç†","link":"#æƒé™çŠ¶æ€ç®¡ç†","children":[{"level":3,"title":"æƒé™å®šä¹‰","slug":"æƒé™å®šä¹‰","link":"#æƒé™å®šä¹‰","children":[]},{"level":3,"title":"ç»„ä»¶å†…æƒé™æ§åˆ¶","slug":"ç»„ä»¶å†…æƒé™æ§åˆ¶","link":"#ç»„ä»¶å†…æƒé™æ§åˆ¶","children":[]},{"level":3,"title":"è·¯ç”±æƒé™æ§åˆ¶","slug":"è·¯ç”±æƒé™æ§åˆ¶","link":"#è·¯ç”±æƒé™æ§åˆ¶","children":[]}]},{"level":2,"title":"çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ","slug":"çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ","link":"#çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ","children":[{"level":3,"title":"çŠ¶æ€åˆ†ç±»ä¸é€‰å‹","slug":"çŠ¶æ€åˆ†ç±»ä¸é€‰å‹","link":"#çŠ¶æ€åˆ†ç±»ä¸é€‰å‹","children":[]},{"level":3,"title":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","link":"#æ€§èƒ½ä¼˜åŒ–","children":[]},{"level":3,"title":"æ•°æ®æµæ¶æ„","slug":"æ•°æ®æµæ¶æ„","link":"#æ•°æ®æµæ¶æ„","children":[]}]}],"relativePath":"framework/umijs/status.md","filePath":"framework/umijs/status.md"}'),o={name:"framework/umijs/status.md"};function e(t,s,c,r,E,i){return l(),n("div",null,[...s[0]||(s[0]=[p(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /framework/umijs/status.md for this page in Markdown format</div><h1 id="umijs-çŠ¶æ€ç®¡ç†" tabindex="-1">umijs çŠ¶æ€ç®¡ç† <a class="header-anchor" href="#umijs-çŠ¶æ€ç®¡ç†" aria-label="Permalink to &quot;umijs çŠ¶æ€ç®¡ç†&quot;">â€‹</a></h1><p>UmiJS æä¾›äº†å¤šå±‚æ¬¡çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œä»ç®€å•çš„ç»„ä»¶çŠ¶æ€åˆ°å¤æ‚çš„å…¨å±€æ•°æ®æµï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚æŒæ¡è¿™äº›çŠ¶æ€ç®¡ç†å·¥å…·èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…æ„å»ºæ›´å¥å£®ã€å¯ç»´æŠ¤çš„ React åº”ç”¨ã€‚</p><h2 id="çŠ¶æ€ç®¡ç†å…¨æ™¯å›¾" tabindex="-1">çŠ¶æ€ç®¡ç†å…¨æ™¯å›¾ <a class="header-anchor" href="#çŠ¶æ€ç®¡ç†å…¨æ™¯å›¾" aria-label="Permalink to &quot;çŠ¶æ€ç®¡ç†å…¨æ™¯å›¾&quot;">â€‹</a></h2><p>åœ¨ UmiJS ç”Ÿæ€ä¸­ï¼ŒçŠ¶æ€ç®¡ç†å¯ä»¥åˆ†ä¸ºå››ä¸ªå±‚æ¬¡ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚ ğŸŒ åº”ç”¨å¯åŠ¨å±‚ï¼ˆUmi ä¸“ç”¨ï¼‰                  â”‚</span></span>
<span class="line"><span>â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚</span></span>
<span class="line"><span>â”‚ ã€initialState / setInitialStateã€‘         â”‚</span></span>
<span class="line"><span>â”‚ - ç”¨äºå­˜æ”¾å…¨å±€åˆå§‹åŒ–æ•°æ®ï¼ˆç”¨æˆ·ä¿¡æ¯ã€é…ç½®ï¼‰ â”‚</span></span>
<span class="line"><span>â”‚ - æ¥æºï¼šUmi runtime æ’ä»¶ï¼ˆgetInitialStateï¼‰â”‚</span></span>
<span class="line"><span>â”‚ - ç”Ÿå‘½å‘¨æœŸï¼šåº”ç”¨å¯åŠ¨ â†’ å…¨å±€å…±äº«           â”‚</span></span>
<span class="line"><span>â”‚ - æ›´æ–°æ–¹å¼ï¼šsetInitialState()             â”‚</span></span>
<span class="line"><span>â”‚ - ç‰¹å¾ï¼šä¸€æ¬¡åŠ è½½ã€å…¨å±€å¯è¯»ã€é€‚åˆåˆå§‹åŒ–æ•°æ® â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>â”‚</span></span>
<span class="line"><span>â–¼</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚ âš™ï¸ ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆå“åº”å¼å…¨å±€çŠ¶æ€ï¼‰            â”‚</span></span>
<span class="line"><span>â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚</span></span>
<span class="line"><span>â”‚ ã€valtioã€‘                                 â”‚</span></span>
<span class="line"><span>â”‚ - Proxy å®ç°å“åº”å¼ï¼Œç»„ä»¶è‡ªåŠ¨æ›´æ–°           â”‚</span></span>
<span class="line"><span>â”‚ - æ— éœ€ dispatchï¼Œç›´æ¥ä¿®æ”¹å¯¹è±¡å³å¯          â”‚</span></span>
<span class="line"><span>â”‚ - ç”Ÿå‘½å‘¨æœŸï¼šå…¨å±€å¯æŒä¹…ï¼Œç»„ä»¶å¸è½½ä¸ä¸¢çŠ¶æ€   â”‚</span></span>
<span class="line"><span>â”‚ - ç‰¹å¾ï¼šè½»é‡ã€è‡ªç„¶ã€å“åº”å¼ã€é«˜æ€§èƒ½         â”‚</span></span>
<span class="line"><span>â”‚ - ç”¨é€”ï¼šå…±äº« UI çŠ¶æ€ã€ç¼“å­˜ã€è¡¨æ ¼ç­›é€‰ç­‰     â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>â”‚</span></span>
<span class="line"><span>â–¼</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚ ğŸ§© ç»„ä»¶å±€éƒ¨çŠ¶æ€å±‚ï¼ˆReact åŸç”Ÿï¼‰            â”‚</span></span>
<span class="line"><span>â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚</span></span>
<span class="line"><span>â”‚ ã€useState / useReducerã€‘                  â”‚</span></span>
<span class="line"><span>â”‚ - React å†…ç½® hooks                         â”‚</span></span>
<span class="line"><span>â”‚ - ç”Ÿå‘½å‘¨æœŸï¼šç»„ä»¶å†…å­˜æ´»ï¼Œç»„ä»¶å¸è½½å³é”€æ¯     â”‚</span></span>
<span class="line"><span>â”‚ - ç‰¹å¾ï¼šè½»é‡ã€ç®€æ´ã€å±€éƒ¨æ€§å¼º               â”‚</span></span>
<span class="line"><span>â”‚ - ç”¨é€”ï¼šæŒ‰é’®çŠ¶æ€ã€è¾“å…¥æ¡†å€¼ã€å¼¹çª—å¼€å…³ç­‰     â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>â–²</span></span>
<span class="line"><span>â”‚</span></span>
<span class="line"><span>â”‚</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚ ğŸ—ï¸ ä¼ ç»Ÿé›†ä¸­å¼çŠ¶æ€å±‚ï¼ˆRedux / Dvaï¼‰        â”‚</span></span>
<span class="line"><span>â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚</span></span>
<span class="line"><span>â”‚ ã€redux / dvaã€‘                            â”‚</span></span>
<span class="line"><span>â”‚ - éœ€è¦ dispatch + reducer æœºåˆ¶             â”‚</span></span>
<span class="line"><span>â”‚ - çŠ¶æ€é›†ä¸­å­˜å‚¨ï¼Œå…¨å±€å•ä¸€ Store             â”‚</span></span>
<span class="line"><span>â”‚ - ç”Ÿå‘½å‘¨æœŸï¼šå…¨å±€ï¼Œæ‰‹åŠ¨ç®¡ç†æ›´æ–°é€»è¾‘         â”‚</span></span>
<span class="line"><span>â”‚ - ç‰¹å¾ï¼šç»“æ„åŒ–ã€å¯è¿½è¸ªã€é€‚åˆå¤æ‚ä¸šåŠ¡æµ     â”‚</span></span>
<span class="line"><span>â”‚ - ç”¨é€”ï¼šå¤§å‹é¡¹ç›®ã€å¤æ‚å¼‚æ­¥é€»è¾‘ã€æ•°æ®æµç®¡ç† â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre></div><h2 id="åº”ç”¨åˆå§‹åŒ–çŠ¶æ€" tabindex="-1">åº”ç”¨åˆå§‹åŒ–çŠ¶æ€ <a class="header-anchor" href="#åº”ç”¨åˆå§‹åŒ–çŠ¶æ€" aria-label="Permalink to &quot;åº”ç”¨åˆå§‹åŒ–çŠ¶æ€&quot;">â€‹</a></h2><h3 id="åˆå§‹åŒ–çŠ¶æ€è®¾ç½®" tabindex="-1">åˆå§‹åŒ–çŠ¶æ€è®¾ç½® <a class="header-anchor" href="#åˆå§‹åŒ–çŠ¶æ€è®¾ç½®" aria-label="Permalink to &quot;åˆå§‹åŒ–çŠ¶æ€è®¾ç½®&quot;">â€‹</a></h3><p>UmiJS é€šè¿‡ <code>@umijs/plugin-initial-state</code> æ’ä»¶æä¾›åº”ç”¨åˆå§‹åŒ–æ•°æ®ç®¡ç†ã€‚åœ¨ <code>src/app.ts</code> ä¸­å¯¼å‡º <code>getInitialState</code> æ–¹æ³•ï¼š</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// src/app.ts</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> getInitialState</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> data</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> fetchXXX</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> data;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><p>è¯¥é…ç½®æ˜¯ä¸€ä¸ª async çš„ functionï¼Œä¼šåœ¨æ•´ä¸ªåº”ç”¨æœ€å¼€å§‹æ‰§è¡Œï¼Œè¿”å›å€¼ä¼šä½œä¸ºå…¨å±€å…±äº«çš„æ•°æ®ã€‚</p><h3 id="ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€" tabindex="-1">ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€ <a class="header-anchor" href="#ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€" aria-label="Permalink to &quot;ä½¿ç”¨åˆå§‹åŒ–çŠ¶æ€&quot;">â€‹</a></h3><p>é€šè¿‡ <code>useModel</code> é’©å­è·å–åˆå§‹çŠ¶æ€ï¼š</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useModel } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;umi&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">initialState</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">loading</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">error</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">refresh</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setInitialState</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">    useModel</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@@initialState&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (loading) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;åŠ è½½ä¸­...&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (error) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;åŠ è½½å¤±è´¥&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;åˆå§‹æ•°æ®ï¼š{initialState}&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><p><strong>å¯ç”¨å±æ€§ï¼š</strong></p><ul><li><code>initialState</code>ï¼šgetInitialState çš„è¿”å›å€¼</li><li><code>loading</code>ï¼šè·å–çŠ¶æ€æ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­</li><li><code>error</code>ï¼šè·å–è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯</li><li><code>refresh</code>ï¼šé‡æ–°æ‰§è¡Œ getInitialState</li><li><code>setInitialState</code>ï¼šæ‰‹åŠ¨è®¾ç½® initialState çš„å€¼</li></ul><h2 id="ç®€æ˜“æ•°æ®ç®¡ç†æ–¹æ¡ˆ" tabindex="-1">ç®€æ˜“æ•°æ®ç®¡ç†æ–¹æ¡ˆ <a class="header-anchor" href="#ç®€æ˜“æ•°æ®ç®¡ç†æ–¹æ¡ˆ" aria-label="Permalink to &quot;ç®€æ˜“æ•°æ®ç®¡ç†æ–¹æ¡ˆ&quot;">â€‹</a></h2><h3 id="plugin-model-åŸºç¡€" tabindex="-1">Plugin-model åŸºç¡€ <a class="header-anchor" href="#plugin-model-åŸºç¡€" aria-label="Permalink to &quot;Plugin-model åŸºç¡€&quot;">â€‹</a></h3><p><code>@umijs/plugin-model</code> æ˜¯ä¸€ç§åŸºäº hooks èŒƒå¼çš„ç®€æ˜“æ•°æ®ç®¡ç†æ–¹æ¡ˆï¼Œé€šå¸¸ç”¨äºä¸­å°é¡¹ç›®çš„å…¨å±€å…±äº«æ•°æ®ã€‚</p><p>åœ¨ <code>src/models</code> ç›®å½•ä¸‹åˆ›å»º model æ–‡ä»¶ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// src/models/useAuthModel.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useState, useCallback } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> useAuthModel</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">user</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setUser</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> signin</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useCallback</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">account</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">password</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">    // signin implementation</span></span>
<span class="line"><span style="color:#6A737D;">    // setUser(user from signin API)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, []);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> signout</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useCallback</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">    // signout implementation</span></span>
<span class="line"><span style="color:#6A737D;">    // setUser(null)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, []);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    user,</span></span>
<span class="line"><span style="color:#E1E4E8;">    signin,</span></span>
<span class="line"><span style="color:#E1E4E8;">    signout</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-model" tabindex="-1">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Model <a class="header-anchor" href="#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-model" aria-label="Permalink to &quot;åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Model&quot;">â€‹</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useModel } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;umi&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">user</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">signin</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useModel</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;useAuthModel&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      å½“å‰ç”¨æˆ·ï¼š{user?.name}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> signin</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;account&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;password&#39;</span><span style="color:#E1E4E8;">)}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        ç™»å½•</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><h2 id="åŸºäº-dva-çš„å¤æ‚çŠ¶æ€ç®¡ç†" tabindex="-1">åŸºäº Dva çš„å¤æ‚çŠ¶æ€ç®¡ç† <a class="header-anchor" href="#åŸºäº-dva-çš„å¤æ‚çŠ¶æ€ç®¡ç†" aria-label="Permalink to &quot;åŸºäº Dva çš„å¤æ‚çŠ¶æ€ç®¡ç†&quot;">â€‹</a></h2><h3 id="dva-model-ç»“æ„" tabindex="-1">Dva Model ç»“æ„ <a class="header-anchor" href="#dva-model-ç»“æ„" aria-label="Permalink to &quot;Dva Model ç»“æ„&quot;">â€‹</a></h3><p>å¯¹äºå¤æ‚çš„æ•°æ®æµåœºæ™¯ï¼ŒUmiJS å†…ç½®äº† Dva çŠ¶æ€ç®¡ç†æ¡†æ¶ã€‚åœ¨ <code>src/models</code> ç›®å½•ä¸‹åˆ›å»ºç¬¦åˆ Dva è§„èŒƒçš„æ–‡ä»¶ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// src/models/users.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { apiUserList } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;@/services/user&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  namespace: </span><span style="color:#9ECBFF;">&#39;users&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  state: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    list: [],</span></span>
<span class="line"><span style="color:#E1E4E8;">    currentUser: </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  effects: {</span></span>
<span class="line"><span style="color:#F97583;">    *</span><span style="color:#B392F0;">fetchUserList</span><span style="color:#E1E4E8;">({ </span><span style="color:#FFAB70;">payload</span><span style="color:#E1E4E8;"> }, { </span><span style="color:#FFAB70;">call</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">put</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#F97583;">      const</span><span style="color:#79B8FF;"> response</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> yield</span><span style="color:#B392F0;"> call</span><span style="color:#E1E4E8;">(apiUserList, payload);</span></span>
<span class="line"><span style="color:#F97583;">      yield</span><span style="color:#B392F0;"> put</span><span style="color:#E1E4E8;">({ </span></span>
<span class="line"><span style="color:#E1E4E8;">        type: </span><span style="color:#9ECBFF;">&#39;setUserList&#39;</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#E1E4E8;">        payload: response </span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  reducers: {</span></span>
<span class="line"><span style="color:#B392F0;">    setUserList</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;">, { </span><span style="color:#FFAB70;">payload</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#F97583;">      return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">        ...</span><span style="color:#E1E4E8;">state,</span></span>
<span class="line"><span style="color:#E1E4E8;">        list: payload,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><p><strong>Model æ ¸å¿ƒæ¦‚å¿µï¼š</strong></p><ul><li><code>namespace</code>ï¼šæ¨¡å‹çš„å‘½åç©ºé—´ï¼Œç”¨äºåŒºåˆ†ä¸åŒæ¨¡å‹</li><li><code>state</code>ï¼šåˆå§‹çŠ¶æ€å€¼</li><li><code>effects</code>ï¼šå¤„ç†å¼‚æ­¥æ“ä½œå’Œä¸šåŠ¡é€»è¾‘</li><li><code>reducers</code>ï¼šå¤„ç†åŒæ­¥æ“ä½œï¼Œæ›´æ–° state</li></ul><h3 id="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-dva" tabindex="-1">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Dva <a class="header-anchor" href="#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-dva" aria-label="Permalink to &quot;åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Dva&quot;">â€‹</a></h3><h4 id="å‡½æ•°ç»„ä»¶ç”¨æ³•" tabindex="-1">å‡½æ•°ç»„ä»¶ç”¨æ³• <a class="header-anchor" href="#å‡½æ•°ç»„ä»¶ç”¨æ³•" aria-label="Permalink to &quot;å‡½æ•°ç»„ä»¶ç”¨æ³•&quot;">â€‹</a></h4><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { connect } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;dva&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> Users</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> ({ </span><span style="color:#FFAB70;">dispatch</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">userList</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">loading</span><span style="color:#E1E4E8;"> }) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#B392F0;"> fetchUsers</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    dispatch</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: </span><span style="color:#9ECBFF;">&#39;users/fetchUserList&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      payload: { page: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, size: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{fetchUsers} </span><span style="color:#B392F0;">disabled</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{loading}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        {loading </span><span style="color:#F97583;">?</span><span style="color:#9ECBFF;"> &#39;åŠ è½½ä¸­...&#39;</span><span style="color:#F97583;"> :</span><span style="color:#9ECBFF;"> &#39;è·å–ç”¨æˆ·åˆ—è¡¨&#39;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        {userList.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">user</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> key</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{user.id}&gt;{user.name}&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        ))}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> mapStateToProps</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    userList: state.users.list,</span></span>
<span class="line"><span style="color:#E1E4E8;">    loading: state.loading.models.users,</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#B392F0;"> connect</span><span style="color:#E1E4E8;">(mapStateToProps)(Users);</span></span></code></pre></div><h4 id="hooks-ç”¨æ³•" tabindex="-1">Hooks ç”¨æ³• <a class="header-anchor" href="#hooks-ç”¨æ³•" aria-label="Permalink to &quot;Hooks ç”¨æ³•&quot;">â€‹</a></h4><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useSelector, useDispatch } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;umi&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> UsersPage</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> dispatch</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useDispatch</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">loading</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useSelector</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">state</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> state.users);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#B392F0;"> handleAddUser</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    dispatch</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: </span><span style="color:#9ECBFF;">&#39;users/addUser&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      payload: { name: </span><span style="color:#9ECBFF;">&#39;æ–°ç”¨æˆ·&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#6A737D;">    // JSX å†…å®¹</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="å¼‚æ­¥æ•°æ®ç®¡ç†" tabindex="-1">å¼‚æ­¥æ•°æ®ç®¡ç† <a class="header-anchor" href="#å¼‚æ­¥æ•°æ®ç®¡ç†" aria-label="Permalink to &quot;å¼‚æ­¥æ•°æ®ç®¡ç†&quot;">â€‹</a></h2><h3 id="useapi-hook" tabindex="-1">useAPI Hook <a class="header-anchor" href="#useapi-hook" aria-label="Permalink to &quot;useAPI Hook&quot;">â€‹</a></h3><p><code>@umijs/use-api</code> æ˜¯ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„ React Hooks åº“ï¼Œç”¨äºç®¡ç†å¼‚æ­¥æ•°æ®ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> useAPI </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;@umijs/use-api&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">error</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">loading</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useAPI</span><span style="color:#E1E4E8;">(getUserInfo);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (error) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;åŠ è½½å¤±è´¥&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (loading) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;åŠ è½½ä¸­...&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;ä½ å¥½ {data.username}!&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><h3 id="é«˜çº§å¼‚æ­¥åŠŸèƒ½" tabindex="-1">é«˜çº§å¼‚æ­¥åŠŸèƒ½ <a class="header-anchor" href="#é«˜çº§å¼‚æ­¥åŠŸèƒ½" aria-label="Permalink to &quot;é«˜çº§å¼‚æ­¥åŠŸèƒ½&quot;">â€‹</a></h3><h4 id="æ‰‹åŠ¨è§¦å‘è¯·æ±‚" tabindex="-1">æ‰‹åŠ¨è§¦å‘è¯·æ±‚ <a class="header-anchor" href="#æ‰‹åŠ¨è§¦å‘è¯·æ±‚" aria-label="Permalink to &quot;æ‰‹åŠ¨è§¦å‘è¯·æ±‚&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">loading</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">run</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useAPI</span><span style="color:#E1E4E8;">(changeUsername, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  manual: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> run</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;new name&#39;</span><span style="color:#E1E4E8;">)}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  {loading </span><span style="color:#F97583;">?</span><span style="color:#9ECBFF;"> &#39;ä¿®æ”¹ä¸­...&#39;</span><span style="color:#F97583;"> :</span><span style="color:#9ECBFF;"> &#39;ä¿®æ”¹&#39;</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="è½®è¯¢è¯·æ±‚" tabindex="-1">è½®è¯¢è¯·æ±‚ <a class="header-anchor" href="#è½®è¯¢è¯·æ±‚" aria-label="Permalink to &quot;è½®è¯¢è¯·æ±‚&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">loading</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useAPI</span><span style="color:#E1E4E8;">(getUserInfo, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  pollingInterval: </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  pollingWhenHidden: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h4 id="ç¼“å­˜å’Œ-swr" tabindex="-1">ç¼“å­˜å’Œ SWR <a class="header-anchor" href="#ç¼“å­˜å’Œ-swr" aria-label="Permalink to &quot;ç¼“å­˜å’Œ SWR&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">loading</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useAPI</span><span style="color:#E1E4E8;">(getInfo, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  cacheKey: </span><span style="color:#9ECBFF;">&#39;getInfoKey&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h2 id="æƒé™çŠ¶æ€ç®¡ç†" tabindex="-1">æƒé™çŠ¶æ€ç®¡ç† <a class="header-anchor" href="#æƒé™çŠ¶æ€ç®¡ç†" aria-label="Permalink to &quot;æƒé™çŠ¶æ€ç®¡ç†&quot;">â€‹</a></h2><h3 id="æƒé™å®šä¹‰" tabindex="-1">æƒé™å®šä¹‰ <a class="header-anchor" href="#æƒé™å®šä¹‰" aria-label="Permalink to &quot;æƒé™å®šä¹‰&quot;">â€‹</a></h3><p>UmiJS é€šè¿‡ <code>@umijs/plugin-access</code> æä¾›æƒé™ç®¡ç†èƒ½åŠ›ï¼Œç»“åˆåˆå§‹åŒ–çŠ¶æ€å®ç°è·¯ç”±å’Œç»„ä»¶çº§æƒé™æ§åˆ¶ã€‚</p><p>åœ¨ <code>src/access.ts</code> ä¸­å®šä¹‰æƒé™ï¼š</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// src/access.ts</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">initialState</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">currentUser</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> initialState </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> {};</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    canReadAdmin: currentUser </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> currentUser.isAdmin,</span></span>
<span class="line"><span style="color:#B392F0;">    canUpdateUser</span><span style="color:#E1E4E8;">: (</span><span style="color:#FFAB70;">userId</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      return</span><span style="color:#E1E4E8;"> currentUser </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> currentUser.id </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> userId;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="ç»„ä»¶å†…æƒé™æ§åˆ¶" tabindex="-1">ç»„ä»¶å†…æƒé™æ§åˆ¶ <a class="header-anchor" href="#ç»„ä»¶å†…æƒé™æ§åˆ¶" aria-label="Permalink to &quot;ç»„ä»¶å†…æƒé™æ§åˆ¶&quot;">â€‹</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useAccess, Access } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;umi&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> PageA</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> access</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useAccess</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Access</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">        accessible</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{access.canReadAdmin} </span></span>
<span class="line"><span style="color:#B392F0;">        fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;æ— ç®¡ç†å‘˜æƒé™&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">AdminPanel</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#79B8FF;">Access</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Access</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">        accessible</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{access.</span><span style="color:#B392F0;">canUpdateUser</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">123</span><span style="color:#E1E4E8;">)} </span></span>
<span class="line"><span style="color:#B392F0;">        fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;æ— æ³•æ›´æ–°è¯¥ç”¨æˆ·&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">UserEditor</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#79B8FF;">Access</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><h3 id="è·¯ç”±æƒé™æ§åˆ¶" tabindex="-1">è·¯ç”±æƒé™æ§åˆ¶ <a class="header-anchor" href="#è·¯ç”±æƒé™æ§åˆ¶" aria-label="Permalink to &quot;è·¯ç”±æƒé™æ§åˆ¶&quot;">â€‹</a></h3><p>åœ¨è·¯ç”±é…ç½®ä¸­é›†æˆæƒé™æ§åˆ¶ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// config/config.ts</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  routes: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      path: </span><span style="color:#9ECBFF;">&#39;/admin&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      component: </span><span style="color:#9ECBFF;">&#39;@/pages/Admin&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      access: </span><span style="color:#9ECBFF;">&#39;canReadAdmin&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      path: </span><span style="color:#9ECBFF;">&#39;/user/:id/edit&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      component: </span><span style="color:#9ECBFF;">&#39;@/pages/UserEdit&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      access: </span><span style="color:#9ECBFF;">&#39;canUpdateUser&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><h2 id="çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ" tabindex="-1">çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ <a class="header-anchor" href="#çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ" aria-label="Permalink to &quot;çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="çŠ¶æ€åˆ†ç±»ä¸é€‰å‹" tabindex="-1">çŠ¶æ€åˆ†ç±»ä¸é€‰å‹ <a class="header-anchor" href="#çŠ¶æ€åˆ†ç±»ä¸é€‰å‹" aria-label="Permalink to &quot;çŠ¶æ€åˆ†ç±»ä¸é€‰å‹&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>ç™»å½•åä¿å­˜ç”¨æˆ·ä¿¡æ¯</td><td>initialState</td><td>åº”ç”¨å¯åŠ¨æ—¶åŠ è½½ï¼Œå…¨å±€å…±äº«</td></tr><tr><td>å…¨å±€ä¸»é¢˜/å¸ƒå±€çŠ¶æ€</td><td>valtio</td><td>å“åº”å¼æ›´æ–°ï¼Œä½¿ç”¨ç®€å•</td></tr><tr><td>é¡µé¢å†…ç­›é€‰æ¡ä»¶/è¡¨æ ¼ç¼“å­˜</td><td>valtio</td><td>ç»„ä»¶é—´å…±äº«ï¼Œæ€§èƒ½ä¼˜åŒ–</td></tr><tr><td>Modal/è¾“å…¥æ¡†çŠ¶æ€</td><td>useState</td><td>å±€éƒ¨çŠ¶æ€ï¼Œç®€å•ç›´æ¥</td></tr><tr><td>å¤šæ¨¡å—å¼‚æ­¥æ•°æ®ã€å¤æ‚æµè½¬</td><td>redux/dva</td><td>ç»“æ„åŒ–ï¼Œå¯è¿½è¸ª</td></tr></tbody></table><h3 id="æ€§èƒ½ä¼˜åŒ–" tabindex="-1">æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h3><h4 id="ä¸å¯å˜æ›´æ–°" tabindex="-1">ä¸å¯å˜æ›´æ–° <a class="header-anchor" href="#ä¸å¯å˜æ›´æ–°" aria-label="Permalink to &quot;ä¸å¯å˜æ›´æ–°&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// ä¸æ¨è - ç›´æ¥ä¿®æ”¹</span></span>
<span class="line"><span style="color:#E1E4E8;">state.list.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(newItem);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ¨è - ä¸å¯å˜æ›´æ–°</span></span>
<span class="line"><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  ...</span><span style="color:#E1E4E8;">state,</span></span>
<span class="line"><span style="color:#E1E4E8;">  list: [</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">state.list, newItem],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä½¿ç”¨ immer ä¼˜åŒ–å¤æ‚æ›´æ–°</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> produce </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;immer&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> noticeReducer</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> initialState, </span><span style="color:#FFAB70;">action</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  switch</span><span style="color:#E1E4E8;"> (action.type) {</span></span>
<span class="line"><span style="color:#F97583;">    case</span><span style="color:#9ECBFF;"> &#39;notice/readed&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#F97583;">      return</span><span style="color:#B392F0;"> produce</span><span style="color:#E1E4E8;">(state, (</span><span style="color:#FFAB70;">draft</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">        const</span><span style="color:#79B8FF;"> index</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> action.payload;</span></span>
<span class="line"><span style="color:#E1E4E8;">        draft.list[index].read </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> true</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"><span style="color:#F97583;">    default</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#F97583;">      return</span><span style="color:#E1E4E8;"> state;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><h4 id="ç²¾ç»†åŒ–è®¢é˜…" tabindex="-1">ç²¾ç»†åŒ–è®¢é˜… <a class="header-anchor" href="#ç²¾ç»†åŒ–è®¢é˜…" aria-label="Permalink to &quot;ç²¾ç»†åŒ–è®¢é˜…&quot;">â€‹</a></h4><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// ä¸æ¨è - è®¢é˜…æ•´ä¸ª state</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">user</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">settings</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">notifications</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useModel</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;userModel&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ¨è - åªè®¢é˜…éœ€è¦çš„çŠ¶æ€</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">user</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useModel</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;userModel&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">model</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  user: model.user,</span></span>
<span class="line"><span style="color:#E1E4E8;">}));</span></span></code></pre></div><h3 id="æ•°æ®æµæ¶æ„" tabindex="-1">æ•°æ®æµæ¶æ„ <a class="header-anchor" href="#æ•°æ®æµæ¶æ„" aria-label="Permalink to &quot;æ•°æ®æµæ¶æ„&quot;">â€‹</a></h3><p>åœ¨å¤æ‚åº”ç”¨ä¸­ï¼Œæ¨èé‡‡ç”¨åˆ†å±‚çš„æ•°æ®æµæ¶æ„ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>ç»„ä»¶å±‚ â†’ Hookså±‚ â†’ Modelå±‚ â†’ æœåŠ¡å±‚</span></span></code></pre></div><p><strong>å„å±‚èŒè´£ï¼š</strong></p><ul><li>ç»„ä»¶å±‚ï¼šè´Ÿè´£ UI æ¸²æŸ“å’Œç”¨æˆ·äº¤äº’</li><li>Hooks å±‚ï¼šå°è£…ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€æ›´æ–°</li><li>Model å±‚ï¼šç®¡ç†å…¨å±€çŠ¶æ€å’Œæ•°æ®æµ</li><li>æœåŠ¡å±‚ï¼šå¤„ç†æ•°æ®è·å–å’ŒæŒä¹…åŒ–</li></ul><p>é€šè¿‡åˆç†è¿ç”¨ UmiJS æä¾›çš„å„ç§çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œå¯ä»¥æ„å»ºå‡ºæ—¢çµæ´»åˆå¯ç»´æŠ¤çš„å‰ç«¯åº”ç”¨æ¶æ„ã€‚</p>`,69)])])}const F=a(o,[["render",e]]);export{d as __pageData,F as default};

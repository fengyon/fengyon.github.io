import{_ as o,c as t,o as a,b as n}from"./chunks/framework.CMLuPXeo.js";const m=JSON.parse('{"title":"性能监控","description":"","frontmatter":{},"headers":[{"level":2,"title":"为什么需要性能监控","slug":"why-performance-monitoring","link":"#why-performance-monitoring","children":[]},{"level":2,"title":"关键性能指标","slug":"key-performance-metrics","link":"#key-performance-metrics","children":[]},{"level":2,"title":"常用性能监控工具","slug":"common-performance-monitoring-tools","link":"#common-performance-monitoring-tools","children":[{"level":3,"title":"Google Lighthouse","slug":"google-lighthouse","link":"#google-lighthouse","children":[]},{"level":3,"title":"WebPageTest","slug":"webpagetest","link":"#webpagetest","children":[]},{"level":3,"title":"New Relic","slug":"new-relic","link":"#new-relic","children":[]},{"level":3,"title":"Datadog","slug":"datadog","link":"#datadog","children":[]}]},{"level":2,"title":"如何实施性能监控","slug":"how-to-implement-performance-monitoring","link":"#how-to-implement-performance-monitoring","children":[]}],"relativePath":"engineering/performance/monitoring.md","filePath":"engineering/performance/monitoring.md"}'),r={name:"engineering/performance/monitoring.md"};function i(l,e,s,c,g,p){return a(),t("div",null,[...e[0]||(e[0]=[n(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /engineering/performance/monitoring.md for this page in Markdown format</div><h1 id="性能监控" tabindex="-1">性能监控 <a class="header-anchor" href="#性能监控" aria-label="Permalink to &quot;性能监控&quot;">​</a></h1><h2 id="why-performance-monitoring" tabindex="-1">为什么需要性能监控 <a class="header-anchor" href="#why-performance-monitoring" aria-label="Permalink to &quot;为什么需要性能监控 {#why-performance-monitoring}&quot;">​</a></h2><p>Web 性能直接影响用户体验、业务转化率和搜索引擎排名。缓慢的加载会导致用户流失，研究表明页面加载时间每增加 1 秒，转化率可能下降 7%。性能监控帮助识别瓶颈，例如：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>用户请求 --&gt; [DNS 查询] --&gt; [TCP 连接] --&gt; [请求发送] --&gt; [响应接收] --&gt; [解析 HTML] --&gt; [加载资源 (CSS/JS)] --&gt; [渲染完成]</span></span></code></pre></div><p>如果任一环节延迟，整体体验受损。通过监控，团队可以量化问题并优先修复高影响区域。</p><h2 id="key-performance-metrics" tabindex="-1">关键性能指标 <a class="header-anchor" href="#key-performance-metrics" aria-label="Permalink to &quot;关键性能指标 {#key-performance-metrics}&quot;">​</a></h2><p>性能监控依赖核心指标，分为加载性能、交互性和视觉稳定性三类：</p><ul><li><p><strong>首次内容绘制 (FCP)</strong>：测量页面首次显示任何内容的时间，反映初始加载感知。<br> 示意图：<br><code>[空白页] --(FCP)--&gt; [文本/图像出现]</code></p></li><li><p><strong>最大内容绘制 (LCP)</strong>：记录视口内最大元素 (如图片或文本块) 的渲染时间，代表主要内容就绪。<br> 示意图：<br><code>[加载中...] --(LCP)--&gt; [主图/标题完全显示]</code></p></li><li><p><strong>首次输入延迟 (FID)</strong>：衡量用户首次交互 (如点击按钮) 到浏览器响应的延迟，关键于交互性。<br> 示意图：<br><code>[用户点击] --(延迟)--&gt; [页面响应]</code></p></li><li><p><strong>累积布局偏移 (CLS)</strong>：量化页面布局意外变化的频率，通过元素位移计算。<br> 示意图：<br><code>[稳定布局] --(广告加载)--&gt; [内容突然下移]</code></p></li></ul><p>这些指标基于真实用户数据 (RUM) 和实验室测试，提供全面视图。</p><h2 id="common-performance-monitoring-tools" tabindex="-1">常用性能监控工具 <a class="header-anchor" href="#common-performance-monitoring-tools" aria-label="Permalink to &quot;常用性能监控工具 {#common-performance-monitoring-tools}&quot;">​</a></h2><h3 id="google-lighthouse" tabindex="-1">Google Lighthouse <a class="header-anchor" href="#google-lighthouse" aria-label="Permalink to &quot;Google Lighthouse&quot;">​</a></h3><p>Lighthouse 是开源自动化工具，集成到 Chrome DevTools 或命令行，用于审计性能、可访问性和 SEO。<br><strong>常用功能</strong>：</p><ul><li>生成性能报告，评分 0-100，并突出显示 FCP、LCP 等指标。</li><li>提供具体建议，如压缩图片或移除未使用 CSS。</li><li>支持模拟移动设备，测试 3G/4G 网络条件。<br> 特点：免费、易用，适合开发阶段，但缺乏实时监控。</li></ul><h3 id="webpagetest" tabindex="-1">WebPageTest <a class="header-anchor" href="#webpagetest" aria-label="Permalink to &quot;WebPageTest&quot;">​</a></h3><p>WebPageTest 提供深度测试能力，允许从全球多个位置运行测试。<br><strong>常用功能</strong>：</p><ul><li>多位置测试：从不同地理节点 (如北美、亚洲) 测量加载时间。</li><li>视频捕获：生成加载过程视频，可视化渲染步骤。</li><li>自定义脚本：模拟用户交互，如登录或表单提交。<br> 特点：高度可配置，支持高级指标如 Speed Index，但需手动触发测试。</li></ul><h3 id="new-relic" tabindex="-1">New Relic <a class="header-anchor" href="#new-relic" aria-label="Permalink to &quot;New Relic&quot;">​</a></h3><p>New Relic 是应用性能管理 (APM) 平台，提供实时监控和分析。<br><strong>常用功能</strong>：</p><ul><li>端到端跟踪：从浏览器到后端服务器，识别延迟根源。</li><li>错误监控：捕获 JavaScript 错误并与性能数据关联。</li><li>自定义仪表板：可视化关键指标，设置警报阈值。<br> 特点：面向企业，支持大规模应用，但成本较高。</li></ul><h3 id="datadog" tabindex="-1">Datadog <a class="header-anchor" href="#datadog" aria-label="Permalink to &quot;Datadog&quot;">​</a></h3><p>Datadog 是云监控服务，整合基础设施、应用和日志数据。<br><strong>常用功能</strong>：</p><ul><li>RUM (真实用户监控)：收集真实用户会话数据，分析 FID、CLS 等。</li><li>合成监控：通过脚本模拟用户流，检测可用性问题。</li><li>趋势分析：比较历史数据，识别性能退化。<br> 特点：集成性强，适合 DevOps 团队，但配置复杂。</li></ul><h2 id="how-to-implement-performance-monitoring" tabindex="-1">如何实施性能监控 <a class="header-anchor" href="#how-to-implement-performance-monitoring" aria-label="Permalink to &quot;如何实施性能监控 {#how-to-implement-performance-monitoring}&quot;">​</a></h2><p>实施性能监控需结合工具和策略，覆盖开发到生产环境：</p><ol><li><p><strong>定义目标</strong>：基于业务需求设定阈值，例如 LCP &lt; 2.5 秒。<br> 示意图：<br><code>[目标设定] --&gt; [工具选择] --&gt; [数据收集] --&gt; [分析优化]</code></p></li><li><p><strong>集成监控</strong>：在代码中嵌入 SDK，如使用 <code>web-vitals</code> 库捕获核心指标：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { getLCP } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;web-vitals&#39;</span></span>
<span class="line"><span style="color:#B392F0;">getLCP</span><span style="color:#E1E4E8;">(console.log)</span></span></code></pre></div><p>同时配置工具如 New Relic 的浏览器代理。</p></li><li><p><strong>自动化测试</strong>：在 CI/CD 管道中加入 Lighthouse 或 WebPageTest，防止回归。</p></li><li><p><strong>实时警报</strong>：设置监控规则，当指标超出范围时通知团队，确保快速响应。</p></li></ol>`,26)])])}const h=o(r,[["render",i]]);export{m as __pageData,h as default};

import{_ as a,c as n,o as l,b as o}from"./chunks/framework.CMLuPXeo.js";const F=JSON.parse('{"title":"React Router","description":"","frontmatter":{},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"核心组件","slug":"核心组件","link":"#核心组件","children":[{"level":3,"title":"BrowserRouter","slug":"browserrouter","link":"#browserrouter","children":[]},{"level":3,"title":"Routes 和 Route","slug":"routes-和-route","link":"#routes-和-route","children":[]},{"level":3,"title":"Link","slug":"link","link":"#link","children":[]}]},{"level":2,"title":"路由参数","slug":"路由参数","link":"#路由参数","children":[{"level":3,"title":"动态路由参数","slug":"动态路由参数","link":"#动态路由参数","children":[]},{"level":3,"title":"查询参数","slug":"查询参数","link":"#查询参数","children":[]}]},{"level":2,"title":"编程式导航","slug":"编程式导航","link":"#编程式导航","children":[{"level":3,"title":"useNavigate Hook","slug":"usenavigate-hook","link":"#usenavigate-hook","children":[]},{"level":3,"title":"导航选项","slug":"导航选项","link":"#导航选项","children":[]}]},{"level":2,"title":"嵌套路由","slug":"嵌套路由","link":"#嵌套路由","children":[{"level":3,"title":"定义嵌套路由","slug":"定义嵌套路由","link":"#定义嵌套路由","children":[]},{"level":3,"title":"Outlet 组件","slug":"outlet-组件","link":"#outlet-组件","children":[]}]},{"level":2,"title":"路由保护","slug":"路由保护","link":"#路由保护","children":[{"level":3,"title":"身份验证保护","slug":"身份验证保护","link":"#身份验证保护","children":[]}]},{"level":2,"title":"路由配置","slug":"路由配置","link":"#路由配置","children":[{"level":3,"title":"集中式配置","slug":"集中式配置","link":"#集中式配置","children":[]}]},{"level":2,"title":"错误处理","slug":"错误处理","link":"#错误处理","children":[{"level":3,"title":"错误边界路由","slug":"错误边界路由","link":"#错误边界路由","children":[]}]},{"level":2,"title":"常用 Hooks","slug":"常用-hooks","link":"#常用-hooks","children":[{"level":3,"title":"useLocation","slug":"uselocation","link":"#uselocation","children":[]},{"level":3,"title":"useMatch","slug":"usematch","link":"#usematch","children":[]}]},{"level":2,"title":"最佳实践","slug":"最佳实践","link":"#最佳实践","children":[{"level":3,"title":"懒加载示例","slug":"懒加载示例","link":"#懒加载示例","children":[]}]}],"relativePath":"framework/react/router.md","filePath":"framework/react/router.md"}'),p={name:"framework/react/router.md"};function e(t,s,c,r,E,i){return l(),n("div",null,[...s[0]||(s[0]=[o(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /framework/react/router.md for this page in Markdown format</div><h1 id="react-router" tabindex="-1">React Router <a class="header-anchor" href="#react-router" aria-label="Permalink to &quot;React Router&quot;">​</a></h1><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>React Router 是 React 应用的标准路由库，用于实现单页面应用 (SPA) 的路由管理。</p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#9ECBFF;"> install</span><span style="color:#9ECBFF;"> react-router-dom</span></span></code></pre></div><h2 id="核心组件" tabindex="-1">核心组件 <a class="header-anchor" href="#核心组件" aria-label="Permalink to &quot;核心组件&quot;">​</a></h2><h3 id="browserrouter" tabindex="-1">BrowserRouter <a class="header-anchor" href="#browserrouter" aria-label="Permalink to &quot;BrowserRouter&quot;">​</a></h3><p>提供基于 HTML5 History API 的路由</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { BrowserRouter } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">BrowserRouter</span><span style="color:#E1E4E8;">&gt;{</span><span style="color:#6A737D;">/* 应用内容 */</span><span style="color:#E1E4E8;">}&lt;/</span><span style="color:#79B8FF;">BrowserRouter</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="routes-和-route" tabindex="-1">Routes 和 Route <a class="header-anchor" href="#routes-和-route" aria-label="Permalink to &quot;Routes 和 Route&quot;">​</a></h3><p>定义路由映射关系</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Routes, Route } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#B392F0;"> path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#B392F0;"> element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#B392F0;"> path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/about&quot;</span><span style="color:#B392F0;"> element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">About</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#B392F0;"> path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/users/:id&quot;</span><span style="color:#B392F0;"> element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">UserProfile</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="link" tabindex="-1">Link <a class="header-anchor" href="#link" aria-label="Permalink to &quot;Link&quot;">​</a></h3><p>声明式导航组件</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Link } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> Navigation</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#B392F0;"> to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">&gt;首页&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#B392F0;"> to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/about&quot;</span><span style="color:#E1E4E8;">&gt;关于&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="路由参数" tabindex="-1">路由参数 <a class="header-anchor" href="#路由参数" aria-label="Permalink to &quot;路由参数&quot;">​</a></h2><h3 id="动态路由参数" tabindex="-1">动态路由参数 <a class="header-anchor" href="#动态路由参数" aria-label="Permalink to &quot;动态路由参数&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">;</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Route path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/users/:userId&quot;</span><span style="color:#E1E4E8;"> element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;UserDetail /&gt;} </span><span style="color:#F97583;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 组件内获取参数</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useParams } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> UserDetail</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">userId</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useParams</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;用户ID: {userId}&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="查询参数" tabindex="-1">查询参数 <a class="header-anchor" href="#查询参数" aria-label="Permalink to &quot;查询参数&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useSearchParams } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> SearchPage</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">searchParams</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setSearchParams</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useSearchParams</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> keyword</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> searchParams.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;q&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      搜索关键词: {keyword}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> setSearchParams</span><span style="color:#E1E4E8;">({ q: </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;"> })}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        搜索 React</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="编程式导航" tabindex="-1">编程式导航 <a class="header-anchor" href="#编程式导航" aria-label="Permalink to &quot;编程式导航&quot;">​</a></h2><h3 id="usenavigate-hook" tabindex="-1">useNavigate Hook <a class="header-anchor" href="#usenavigate-hook" aria-label="Permalink to &quot;useNavigate Hook&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useNavigate } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> LoginButton</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> navigate</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useNavigate</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#B392F0;"> handleLogin</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">    // 执行登录逻辑</span></span>
<span class="line"><span style="color:#B392F0;">    navigate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/dashboard&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleLogin}&gt;登录&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="导航选项" tabindex="-1">导航选项 <a class="header-anchor" href="#导航选项" aria-label="Permalink to &quot;导航选项&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// 替换当前历史记录</span></span>
<span class="line"><span style="color:#B392F0;">navigate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/new-path&#39;</span><span style="color:#E1E4E8;">, { replace: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 传递状态</span></span>
<span class="line"><span style="color:#B392F0;">navigate</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/user&#39;</span><span style="color:#E1E4E8;">, { state: { from: </span><span style="color:#9ECBFF;">&#39;homepage&#39;</span><span style="color:#E1E4E8;"> } })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 获取传递的状态</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> location</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useLocation</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> state</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> location.state</span></span></code></pre></div><h2 id="嵌套路由" tabindex="-1">嵌套路由 <a class="header-anchor" href="#嵌套路由" aria-label="Permalink to &quot;嵌套路由&quot;">​</a></h2><h3 id="定义嵌套路由" tabindex="-1">定义嵌套路由 <a class="header-anchor" href="#定义嵌套路由" aria-label="Permalink to &quot;定义嵌套路由&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#B392F0;"> path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/dashboard&quot;</span><span style="color:#B392F0;"> element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Dashboard</span><span style="color:#E1E4E8;"> /&gt;}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#B392F0;"> path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;profile&quot;</span><span style="color:#B392F0;"> element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Profile</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#B392F0;"> path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;settings&quot;</span><span style="color:#B392F0;"> element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Settings</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#B392F0;"> index</span><span style="color:#B392F0;"> element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">DashboardHome</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">Route</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="outlet-组件" tabindex="-1">Outlet 组件 <a class="header-anchor" href="#outlet-组件" aria-label="Permalink to &quot;Outlet 组件&quot;">​</a></h3><p>在父组件中渲染子路由</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> Dashboard</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">h1</span><span style="color:#E1E4E8;">&gt;仪表板&lt;/</span><span style="color:#85E89D;">h1</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;{</span><span style="color:#6A737D;">/* 子路由导航 */</span><span style="color:#E1E4E8;">}&lt;/</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Outlet</span><span style="color:#E1E4E8;"> /&gt; {</span><span style="color:#6A737D;">/* 子路由将在这里渲染 */</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="路由保护" tabindex="-1">路由保护 <a class="header-anchor" href="#路由保护" aria-label="Permalink to &quot;路由保护&quot;">​</a></h2><h3 id="身份验证保护" tabindex="-1">身份验证保护 <a class="header-anchor" href="#身份验证保护" aria-label="Permalink to &quot;身份验证保护&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Navigate, useLocation } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> RequireAuth</span><span style="color:#E1E4E8;">({ </span><span style="color:#FFAB70;">children</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> auth</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useAuth</span><span style="color:#E1E4E8;">() </span><span style="color:#6A737D;">// 自定义认证Hook</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> location</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useLocation</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">auth.user) {</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">Navigate</span><span style="color:#B392F0;"> to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/login&quot;</span><span style="color:#B392F0;"> state</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ from: location }} </span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> children</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 使用</span></span>
<span class="line"><span style="color:#E1E4E8;">;</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Route</span></span>
<span class="line"><span style="color:#E1E4E8;">  path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/protected&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;RequireAuth&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;ProtectedPage /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/RequireAuth&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#F97583;">/&gt;</span></span></code></pre></div><h2 id="路由配置" tabindex="-1">路由配置 <a class="header-anchor" href="#路由配置" aria-label="Permalink to &quot;路由配置&quot;">​</a></h2><h3 id="集中式配置" tabindex="-1">集中式配置 <a class="header-anchor" href="#集中式配置" aria-label="Permalink to &quot;集中式配置&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> router</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createBrowserRouter</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span></span>
<span class="line"><span style="color:#E1E4E8;">    path: </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    element: &lt;</span><span style="color:#79B8FF;">Root</span><span style="color:#E1E4E8;"> /&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    children: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        index: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        element: &lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> /&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        path: </span><span style="color:#9ECBFF;">&#39;about&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        element: &lt;</span><span style="color:#79B8FF;">About</span><span style="color:#E1E4E8;"> /&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 在 main.jsx 中使用</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { RouterProvider } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">createRoot</span><span style="color:#E1E4E8;">(document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;root&#39;</span><span style="color:#E1E4E8;">)).</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">React.StrictMode</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">RouterProvider</span><span style="color:#B392F0;"> router</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{router} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">React.StrictMode</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span></code></pre></div><h2 id="错误处理" tabindex="-1">错误处理 <a class="header-anchor" href="#错误处理" aria-label="Permalink to &quot;错误处理&quot;">​</a></h2><h3 id="错误边界路由" tabindex="-1">错误边界路由 <a class="header-anchor" href="#错误边界路由" aria-label="Permalink to &quot;错误边界路由&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> router</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createBrowserRouter</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span></span>
<span class="line"><span style="color:#E1E4E8;">    path: </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    element: &lt;</span><span style="color:#79B8FF;">Root</span><span style="color:#E1E4E8;"> /&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    errorElement: &lt;</span><span style="color:#79B8FF;">ErrorPage</span><span style="color:#E1E4E8;"> /&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    children: [</span></span>
<span class="line"><span style="color:#6A737D;">      // 子路由</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">])</span></span></code></pre></div><h2 id="常用-hooks" tabindex="-1">常用 Hooks <a class="header-anchor" href="#常用-hooks" aria-label="Permalink to &quot;常用 Hooks&quot;">​</a></h2><h3 id="uselocation" tabindex="-1">useLocation <a class="header-anchor" href="#uselocation" aria-label="Permalink to &quot;useLocation&quot;">​</a></h3><p>获取当前 location 对象</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useLocation } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> CurrentPath</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> location</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useLocation</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;当前路径: {location.pathname}&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="usematch" tabindex="-1">useMatch <a class="header-anchor" href="#usematch" aria-label="Permalink to &quot;useMatch&quot;">​</a></h3><p>检查当前路径是否匹配指定模式</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useMatch } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react-router-dom&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> NavLink</span><span style="color:#E1E4E8;">({ </span><span style="color:#FFAB70;">to</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">children</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> match</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> useMatch</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#B392F0;"> to</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{to} </span><span style="color:#B392F0;">className</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{match </span><span style="color:#F97583;">?</span><span style="color:#9ECBFF;"> &#39;active&#39;</span><span style="color:#F97583;"> :</span><span style="color:#9ECBFF;"> &#39;&#39;</span><span style="color:#E1E4E8;">}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      {children}</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><ol><li><strong>路由结构扁平化</strong>：避免过深的嵌套路由</li><li><strong>懒加载路由</strong>：使用 React.lazy 实现代码分割</li><li><strong>错误处理</strong>：为关键路由提供错误边界</li><li><strong>类型安全</strong>：在 TypeScript 项目中定义路由类型</li><li><strong>测试友好</strong>：将路由逻辑与组件逻辑分离</li></ol><h3 id="懒加载示例" tabindex="-1">懒加载示例 <a class="header-anchor" href="#懒加载示例" aria-label="Permalink to &quot;懒加载示例&quot;">​</a></h3><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> LazyAbout</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> lazy</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#F97583;"> import</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;./pages/About&#39;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">;</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">Route</span></span>
<span class="line"><span style="color:#E1E4E8;">  path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/about&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;Suspense fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;div&gt;加载中</span><span style="color:#F97583;">...&lt;/</span><span style="color:#E1E4E8;">div</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">}</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;LazyAbout /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/Suspense&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#F97583;">/&gt;</span></span></code></pre></div>`,52)])])}const u=a(p,[["render",e]]);export{F as __pageData,u as default};

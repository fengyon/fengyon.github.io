import{_ as s,c as n,o as l,b as e}from"./chunks/framework.CMLuPXeo.js";const u=JSON.parse('{"title":"TCP/IP","description":"","frontmatter":{},"headers":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"历史","slug":"历史","link":"#历史","children":[]},{"level":2,"title":"协议栈","slug":"协议栈","link":"#协议栈","children":[]},{"level":2,"title":"核心特点","slug":"核心特点","link":"#核心特点","children":[{"level":3,"title":"分层架构","slug":"分层架构","link":"#分层架构","children":[]},{"level":3,"title":"端到端原则","slug":"端到端原则","link":"#端到端原则","children":[]},{"level":3,"title":"包交换技术","slug":"包交换技术","link":"#包交换技术","children":[]},{"level":3,"title":"全局寻址系统","slug":"全局寻址系统","link":"#全局寻址系统","children":[]},{"level":3,"title":"可靠性机制","slug":"可靠性机制","link":"#可靠性机制","children":[]},{"level":3,"title":"流量控制","slug":"流量控制","link":"#流量控制","children":[]},{"level":3,"title":"拥塞控制","slug":"拥塞控制","link":"#拥塞控制","children":[]}]},{"level":2,"title":"工作原理","slug":"工作原理","link":"#工作原理","children":[{"level":3,"title":"数据封装过程","slug":"数据封装过程","link":"#数据封装过程","children":[]},{"level":3,"title":"三次握手","slug":"三次握手","link":"#三次握手","children":[]},{"level":3,"title":"四次挥手","slug":"四次挥手","link":"#四次挥手","children":[]}]},{"level":2,"title":"核心协议","slug":"核心协议","link":"#核心协议","children":[{"level":3,"title":"IP 协议","slug":"ip-协议","link":"#ip-协议","children":[]},{"level":3,"title":"TCP 协议","slug":"tcp-协议","link":"#tcp-协议","children":[]},{"level":3,"title":"UDP 协议","slug":"udp-协议","link":"#udp-协议","children":[]},{"level":3,"title":"支持协议","slug":"支持协议","link":"#支持协议","children":[]}]},{"level":2,"title":"路由机制","slug":"路由机制","link":"#路由机制","children":[]},{"level":2,"title":"安全考虑","slug":"安全考虑","link":"#安全考虑","children":[{"level":3,"title":"固有漏洞","slug":"固有漏洞","link":"#固有漏洞","children":[]},{"level":3,"title":"防护机制","slug":"防护机制","link":"#防护机制","children":[]}]}],"relativePath":"full-stack/network/tcp-ip.md","filePath":"full-stack/network/tcp-ip.md"}'),p={name:"full-stack/network/tcp-ip.md"};function i(t,a,c,o,d,r){return l(),n("div",null,[...a[0]||(a[0]=[e(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /full-stack/network/tcp-ip.md for this page in Markdown format</div><h1 id="tcp-ip" tabindex="-1">TCP/IP <a class="header-anchor" href="#tcp-ip" aria-label="Permalink to &quot;TCP/IP&quot;">​</a></h1><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-label="Permalink to &quot;介绍&quot;">​</a></h2><p>TCP/IP (Transmission Control Protocol/Internet Protocol) 是互联网的基础协议套件，定义了设备如何在网络中通信。它采用分层架构，将复杂的通信过程分解为相对独立的层次，每层负责特定功能。TCP/IP 不仅包括 TCP 和 IP 两个核心协议，还包含多个支持协议，共同构成了现代互联网的通信基础。</p><h2 id="历史" tabindex="-1">历史 <a class="header-anchor" href="#历史" aria-label="Permalink to &quot;历史&quot;">​</a></h2><p>TCP/IP 起源于 20 世纪 70 年代的美国国防部高级研究计划局 (DARPA) 项目，旨在创建可靠的、可互操作的计算机网络。1974 年，文顿·瑟夫和鲍勃·卡恩发表了 TCP/IP 设计论文。1983 年，ARPANET 正式采用 TCP/IP，取代了之前的 NCP 协议。随着 BSD Unix 集成 TCP/IP 栈，它逐渐成为事实标准。1990 年代互联网商业化浪潮中，TCP/IP 成为全球互联网的唯一协议标准。</p><h2 id="协议栈" tabindex="-1">协议栈 <a class="header-anchor" href="#协议栈" aria-label="Permalink to &quot;协议栈&quot;">​</a></h2><p>TCP/IP 采用四层模型，与 OSI 七层模型对应关系如下：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>应用层 (Application)    - 对应OSI应用层、表示层、会话层</span></span>
<span class="line"><span>传输层 (Transport)     - 对应OSI传输层</span></span>
<span class="line"><span>网络层 (Internet)      - 对应OSI网络层</span></span>
<span class="line"><span>网络接口层 (Network Interface) - 对应OSI数据链路层、物理层</span></span></code></pre></div><p>各层功能：</p><ul><li>应用层：提供用户服务 (HTTP、FTP、DNS 等)</li><li>传输层：端到端通信 (TCP、UDP)</li><li>网络层：寻址和路由 (IP、ICMP)</li><li>网络接口层：物理传输 (以太网、Wi-Fi)</li></ul><h2 id="核心特点" tabindex="-1">核心特点 <a class="header-anchor" href="#核心特点" aria-label="Permalink to &quot;核心特点&quot;">​</a></h2><h3 id="分层架构" tabindex="-1">分层架构 <a class="header-anchor" href="#分层架构" aria-label="Permalink to &quot;分层架构&quot;">​</a></h3><p>TCP/IP 采用严格的分层设计，每层只与相邻层交互，各层独立发展。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>应用数据 -&gt; [传输层封装] -&gt; [网络层封装] -&gt; [网络接口层封装] -&gt; 物理传输</span></span>
<span class="line"><span>接收方反向解封装 -&gt; [网络接口层] -&gt; [网络层] -&gt; [传输层] -&gt; 应用数据</span></span></code></pre></div><p>优势：模块化设计、易于实现和维护、技术演进互不影响。</p><h3 id="端到端原则" tabindex="-1">端到端原则 <a class="header-anchor" href="#端到端原则" aria-label="Permalink to &quot;端到端原则&quot;">​</a></h3><p>智能置于网络边缘，核心网络保持简单。端系统负责可靠性、流量控制等复杂功能，网络只负责数据包转发。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>主机A [智能] -- 简单网络 -- 主机B [智能]</span></span></code></pre></div><p>优点：网络架构简单、扩展性强、创新集中在终端。</p><h3 id="包交换技术" tabindex="-1">包交换技术 <a class="header-anchor" href="#包交换技术" aria-label="Permalink to &quot;包交换技术&quot;">​</a></h3><p>数据被分割为独立的数据包，每个包包含目的地址，通过网络独立路由。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>数据 -&gt; 分割为包1,包2,包3 -&gt; 分别路由 -&gt; 目的地重组</span></span></code></pre></div><p>与电路交换对比：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>电路交换: 建立专用路径 -&gt; 持续通信 -&gt; 释放路径</span></span>
<span class="line"><span>包交换: 数据包独立寻路，共享网络资源</span></span></code></pre></div><p>优势：网络资源利用率高、容错性强。</p><h3 id="全局寻址系统" tabindex="-1">全局寻址系统 <a class="header-anchor" href="#全局寻址系统" aria-label="Permalink to &quot;全局寻址系统&quot;">​</a></h3><p>IP 地址唯一标识网络中的设备，支持网络层路由。IPv4 使用 32 位地址，IPv6 使用 128 位地址。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>IPv4: 192.168.1.1 (点分十进制)</span></span>
<span class="line"><span>IPv6: 2001:0db8:85a3::8a2e:0370:7334 (十六进制)</span></span></code></pre></div><p>配合 DNS 系统将域名解析为 IP 地址：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>www.example.com --DNS查询--&gt; 192.0.2.1</span></span></code></pre></div><h3 id="可靠性机制" tabindex="-1">可靠性机制 <a class="header-anchor" href="#可靠性机制" aria-label="Permalink to &quot;可靠性机制&quot;">​</a></h3><p>TCP 提供可靠的字节流服务，确保数据完整、有序交付。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>发送方: 数据分段 -&gt; 编号 -&gt; 发送 -&gt; 等待确认 -&gt; 超时重传</span></span>
<span class="line"><span>接收方: 接收数据 -&gt; 按序重组 -&gt; 发送确认 -&gt; 交付应用</span></span></code></pre></div><p>通过序列号、确认机制、重传计时器实现可靠性。</p><h3 id="流量控制" tabindex="-1">流量控制 <a class="header-anchor" href="#流量控制" aria-label="Permalink to &quot;流量控制&quot;">​</a></h3><p>TCP 使用滑动窗口机制进行流量控制，防止发送方淹没接收方。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>发送窗口: [已确认][可发送][等待发送]</span></span>
<span class="line"><span>接收窗口大小通告 -&gt; 发送方调整发送速率</span></span></code></pre></div><p>图示：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>发送方: |已确认|可发送|受限|</span></span>
<span class="line"><span>接收方: |已处理|可用缓冲|</span></span></code></pre></div><h3 id="拥塞控制" tabindex="-1">拥塞控制 <a class="header-anchor" href="#拥塞控制" aria-label="Permalink to &quot;拥塞控制&quot;">​</a></h3><p>TCP 动态调整发送速率避免网络拥塞，包含慢启动、拥塞避免、快速重传、快速恢复等算法。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>慢启动: 指数增长窗口 -&gt; 到达阈值 -&gt; 拥塞避免: 线性增长</span></span>
<span class="line"><span>检测丢包 -&gt; 调整阈值 -&gt; 重新慢启动或快速恢复</span></span></code></pre></div><h2 id="工作原理" tabindex="-1">工作原理 <a class="header-anchor" href="#工作原理" aria-label="Permalink to &quot;工作原理&quot;">​</a></h2><h3 id="数据封装过程" tabindex="-1">数据封装过程 <a class="header-anchor" href="#数据封装过程" aria-label="Permalink to &quot;数据封装过程&quot;">​</a></h3><p>数据在发送时从上到下封装，接收时从下到上解封装。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>应用数据</span></span>
<span class="line"><span>↓ 添加TCP头</span></span>
<span class="line"><span>TCP段 (Segment)</span></span>
<span class="line"><span>↓ 添加IP头</span></span>
<span class="line"><span>IP数据包 (Packet)</span></span>
<span class="line"><span>↓ 添加帧头帧尾</span></span>
<span class="line"><span>帧 (Frame)</span></span>
<span class="line"><span>↓ 转换为信号</span></span>
<span class="line"><span>物理传输</span></span></code></pre></div><h3 id="三次握手" tabindex="-1">三次握手 <a class="header-anchor" href="#三次握手" aria-label="Permalink to &quot;三次握手&quot;">​</a></h3><p>TCP 建立连接需要三次握手，确保双方就绪：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>客户端 -&gt; SYN=1, seq=x -&gt; 服务器</span></span>
<span class="line"><span>客户端 &lt;- SYN=1, ACK=1, seq=y, ack=x+1 &lt;- 服务器</span></span>
<span class="line"><span>客户端 -&gt; ACK=1, seq=x+1, ack=y+1 -&gt; 服务器</span></span>
<span class="line"><span>连接建立</span></span></code></pre></div><h3 id="四次挥手" tabindex="-1">四次挥手 <a class="header-anchor" href="#四次挥手" aria-label="Permalink to &quot;四次挥手&quot;">​</a></h3><p>TCP 终止连接需要四次挥手，确保数据完整传输：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>客户端 -&gt; FIN=1 -&gt; 服务器</span></span>
<span class="line"><span>客户端 &lt;- ACK=1 &lt;- 服务器</span></span>
<span class="line"><span>(服务器可能继续发送数据)</span></span>
<span class="line"><span>客户端 &lt;- FIN=1 &lt;- 服务器</span></span>
<span class="line"><span>客户端 -&gt; ACK=1 -&gt; 服务器</span></span>
<span class="line"><span>连接关闭</span></span></code></pre></div><h2 id="核心协议" tabindex="-1">核心协议 <a class="header-anchor" href="#核心协议" aria-label="Permalink to &quot;核心协议&quot;">​</a></h2><h3 id="ip-协议" tabindex="-1">IP 协议 <a class="header-anchor" href="#ip-协议" aria-label="Permalink to &quot;IP 协议&quot;">​</a></h3><p>网络层核心协议，提供无连接、不可靠的数据包传输服务。</p><ul><li>IPv4：32 位地址，头部 20-60 字节</li><li>IPv6：128 位地址，简化头部设计 IP 数据包结构：</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>[版本|头长|服务类型|总长度]</span></span>
<span class="line"><span>[标识|标志|片偏移]</span></span>
<span class="line"><span>[生存时间|协议|头部校验和]</span></span>
<span class="line"><span>[源IP地址]</span></span>
<span class="line"><span>[目的IP地址]</span></span>
<span class="line"><span>[选项|填充]</span></span>
<span class="line"><span>[数据]</span></span></code></pre></div><h3 id="tcp-协议" tabindex="-1">TCP 协议 <a class="header-anchor" href="#tcp-协议" aria-label="Permalink to &quot;TCP 协议&quot;">​</a></h3><p>面向连接的可靠传输协议，提供字节流服务。 TCP 段结构：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>[源端口|目的端口]</span></span>
<span class="line"><span>[序列号]</span></span>
<span class="line"><span>[确认号]</span></span>
<span class="line"><span>[头长|保留|标志位|窗口大小]</span></span>
<span class="line"><span>[校验和|紧急指针]</span></span>
<span class="line"><span>[选项|填充]</span></span>
<span class="line"><span>[数据]</span></span></code></pre></div><p>标志位：URG、ACK、PSH、RST、SYN、FIN</p><h3 id="udp-协议" tabindex="-1">UDP 协议 <a class="header-anchor" href="#udp-协议" aria-label="Permalink to &quot;UDP 协议&quot;">​</a></h3><p>无连接的简单传输协议，提供数据报服务。 UDP 数据报结构：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>[源端口|目的端口]</span></span>
<span class="line"><span>[长度|校验和]</span></span>
<span class="line"><span>[数据]</span></span></code></pre></div><p>特点：开销小、延迟低、无可靠性保证</p><h3 id="支持协议" tabindex="-1">支持协议 <a class="header-anchor" href="#支持协议" aria-label="Permalink to &quot;支持协议&quot;">​</a></h3><ul><li>ICMP：网络控制消息，用于 ping、traceroute</li><li>ARP：地址解析协议，IP 地址到 MAC 地址映射</li><li>DNS：域名解析系统</li><li>DHCP：动态主机配置协议</li></ul><h2 id="路由机制" tabindex="-1">路由机制 <a class="header-anchor" href="#路由机制" aria-label="Permalink to &quot;路由机制&quot;">​</a></h2><p>IP 路由基于路由表，每个路由器独立决策下一跳。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>路由表:</span></span>
<span class="line"><span>目标网络 | 子网掩码 | 下一跳 | 接口</span></span>
<span class="line"><span>192.168.1.0 | 255.255.255.0 | 直接 | eth0</span></span>
<span class="line"><span>0.0.0.0 | 0.0.0.0 | 192.168.1.1 | eth0</span></span></code></pre></div><p>路由过程：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>收到数据包 -&gt; 提取目的IP -&gt; 查找路由表 -&gt; 匹配最长前缀 -&gt; 转发到下一跳</span></span></code></pre></div><h2 id="安全考虑" tabindex="-1">安全考虑 <a class="header-anchor" href="#安全考虑" aria-label="Permalink to &quot;安全考虑&quot;">​</a></h2><h3 id="固有漏洞" tabindex="-1">固有漏洞 <a class="header-anchor" href="#固有漏洞" aria-label="Permalink to &quot;固有漏洞&quot;">​</a></h3><ul><li>IP 欺骗：伪造源 IP 地址</li><li>嗅探攻击：网络流量监听</li><li>会话劫持：接管 TCP 连接</li><li>拒绝服务：耗尽资源</li></ul><h3 id="防护机制" tabindex="-1">防护机制 <a class="header-anchor" href="#防护机制" aria-label="Permalink to &quot;防护机制&quot;">​</a></h3><ul><li>IPsec：网络层加密和认证</li><li>TLS/SSL：传输层安全</li><li>防火墙：包过滤和状态检测</li><li>VPN：建立安全隧道</li></ul>`,78)])])}const g=s(p,[["render",i]]);export{u as __pageData,g as default};

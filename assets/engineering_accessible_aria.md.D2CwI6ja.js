import{_ as a,c as n,o as l,b as p}from"./chunks/framework.CMLuPXeo.js";const F=JSON.parse('{"title":"aria","description":"","frontmatter":{},"headers":[{"level":2,"title":"什么是 ARIA","slug":"什么是-aria","link":"#什么是-aria","children":[]},{"level":2,"title":"ARIA 的三个核心概念","slug":"aria-的三个核心概念","link":"#aria-的三个核心概念","children":[{"level":3,"title":"角色 (Roles)","slug":"角色-roles","link":"#角色-roles","children":[]},{"level":3,"title":"属性 (Properties)","slug":"属性-properties","link":"#属性-properties","children":[]},{"level":3,"title":"状态 (States)","slug":"状态-states","link":"#状态-states","children":[]}]},{"level":2,"title":"可访问性树原理","slug":"可访问性树原理","link":"#可访问性树原理","children":[{"level":3,"title":"DOM 树到可访问性树","slug":"dom-树到可访问性树","link":"#dom-树到可访问性树","children":[]},{"level":3,"title":"浏览器映射过程","slug":"浏览器映射过程","link":"#浏览器映射过程","children":[]}]},{"level":2,"title":"核心 ARIA 模式","slug":"核心-aria-模式","link":"#核心-aria-模式","children":[{"level":3,"title":"地标角色","slug":"地标角色","link":"#地标角色","children":[]},{"level":3,"title":"实时区域 (Live Regions)","slug":"实时区域-live-regions","link":"#实时区域-live-regions","children":[]},{"level":3,"title":"表单验证","slug":"表单验证","link":"#表单验证","children":[]}]},{"level":2,"title":"复杂组件模式","slug":"复杂组件模式","link":"#复杂组件模式","children":[{"level":3,"title":"标签页组件","slug":"标签页组件","link":"#标签页组件","children":[]},{"level":3,"title":"模态对话框","slug":"模态对话框","link":"#模态对话框","children":[]}]},{"level":2,"title":"ARIA 属性分类详解","slug":"aria-属性分类详解","link":"#aria-属性分类详解","children":[{"level":3,"title":"标签和描述属性","slug":"标签和描述属性","link":"#标签和描述属性","children":[]},{"level":3,"title":"关系属性","slug":"关系属性","link":"#关系属性","children":[]},{"level":3,"title":"状态属性","slug":"状态属性","link":"#状态属性","children":[]}]},{"level":2,"title":"ARIA 使用最佳实践","slug":"aria-使用最佳实践","link":"#aria-使用最佳实践","children":[{"level":3,"title":"ARIA 第一规则","slug":"aria-第一规则","link":"#aria-第一规则","children":[]},{"level":3,"title":"角色和属性验证","slug":"角色和属性验证","link":"#角色和属性验证","children":[]},{"level":3,"title":"动态更新管理","slug":"动态更新管理","link":"#动态更新管理","children":[]}]},{"level":2,"title":"测试和调试","slug":"测试和调试","link":"#测试和调试","children":[{"level":3,"title":"屏幕阅读器测试","slug":"屏幕阅读器测试","link":"#屏幕阅读器测试","children":[]},{"level":3,"title":"开发者工具检查","slug":"开发者工具检查","link":"#开发者工具检查","children":[]},{"level":3,"title":"自动化测试","slug":"自动化测试","link":"#自动化测试","children":[]},{"level":3,"title":"ARIA 属性验证函数","slug":"aria-属性验证函数","link":"#aria-属性验证函数","children":[]}]}],"relativePath":"engineering/accessible/aria.md","filePath":"engineering/accessible/aria.md"}'),o={name:"engineering/accessible/aria.md"};function e(t,s,E,c,r,y){return l(),n("div",null,[...s[0]||(s[0]=[p(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /engineering/accessible/aria.md for this page in Markdown format</div><h1 id="aria" tabindex="-1">aria <a class="header-anchor" href="#aria" aria-label="Permalink to &quot;aria&quot;">​</a></h1><h2 id="什么是-aria" tabindex="-1">什么是 ARIA <a class="header-anchor" href="#什么是-aria" aria-label="Permalink to &quot;什么是 ARIA&quot;">​</a></h2><p>可访问的富互联网应用程序 (ARIA) 是一组特殊属性，用于增强 HTML 的无障碍性。当原生 HTML 无法充分描述组件的语义和行为时，ARIA 通过修改浏览器可访问性树来为辅助技术提供额外信息。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>标准HTML: &lt;div&gt;菜单&lt;/div&gt;</span></span>
<span class="line"><span>          ↓</span></span>
<span class="line"><span>屏幕阅读器: &quot;菜单&quot; (无上下文)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ARIA增强: &lt;div role=&quot;menu&quot; aria-label=&quot;主导航&quot;&gt;菜单&lt;/div&gt;</span></span>
<span class="line"><span>          ↓  </span></span>
<span class="line"><span>屏幕阅读器: &quot;主导航 菜单&quot;</span></span></code></pre></div><p>核心原理：ARIA 在 DOM 和可访问性树之间架起桥梁，将自定义组件映射为辅助技术能够理解的标准角色和状态。</p><h2 id="aria-的三个核心概念" tabindex="-1">ARIA 的三个核心概念 <a class="header-anchor" href="#aria-的三个核心概念" aria-label="Permalink to &quot;ARIA 的三个核心概念&quot;">​</a></h2><h3 id="角色-roles" tabindex="-1">角色 (Roles) <a class="header-anchor" href="#角色-roles" aria-label="Permalink to &quot;角色 (Roles)&quot;">​</a></h3><p>定义元素的类型或目的，将自定义组件映射为标准 UI 模式。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 导航地标 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">nav</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;navigation&quot;</span><span style="color:#B392F0;"> aria-label</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;主导航&quot;</span><span style="color:#E1E4E8;">&gt;...&lt;/</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 自定义按钮 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;button&quot;</span><span style="color:#B392F0;"> tabindex</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#E1E4E8;">&gt;自定义按钮&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 对话框 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dialog&quot;</span><span style="color:#B392F0;"> aria-labelledby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dialog-title&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">h2</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dialog-title&quot;</span><span style="color:#E1E4E8;">&gt;确认删除&lt;/</span><span style="color:#85E89D;">h2</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><p>角色分类示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>抽象角色: (不直接使用)</span></span>
<span class="line"><span>    └── 小部件角色: button, checkbox, slider</span></span>
<span class="line"><span>    └── 文档结构角色: heading, list, table  </span></span>
<span class="line"><span>    └── 地标角色: banner, navigation, main</span></span></code></pre></div><h3 id="属性-properties" tabindex="-1">属性 (Properties) <a class="header-anchor" href="#属性-properties" aria-label="Permalink to &quot;属性 (Properties)&quot;">​</a></h3><p>描述元素的特征或关系，提供额外语义信息。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 标签和描述 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">input</span><span style="color:#B392F0;"> type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#B392F0;"> aria-label</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;搜索关键词&quot;</span><span style="color:#B392F0;"> aria-describedby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;search-help&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">span</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;search-help&quot;</span><span style="color:#E1E4E8;">&gt;输入产品名称或关键词&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 关系属性 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;menu&quot;</span><span style="color:#B392F0;"> aria-labelledby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;menu-button&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;menu-button&quot;</span><span style="color:#B392F0;"> aria-haspopup</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">&gt;选项&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 实时区域 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> aria-live</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;polite&quot;</span><span style="color:#B392F0;"> aria-atomic</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  新消息到达</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="状态-states" tabindex="-1">状态 (States) <a class="header-anchor" href="#状态-states" aria-label="Permalink to &quot;状态 (States)&quot;">​</a></h3><p>表示元素的当前条件，通常是动态变化的。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 切换状态 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-pressed</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#E1E4E8;">&gt;收藏&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 展开状态 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;button&quot;</span><span style="color:#B392F0;"> aria-expanded</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#B392F0;"> aria-controls</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;content&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  显示更多</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;content&quot;</span><span style="color:#B392F0;"> hidden</span><span style="color:#E1E4E8;">&gt;详细内容...&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 选择状态 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tablist&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tab&quot;</span><span style="color:#B392F0;"> aria-selected</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">&gt;标签一&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tab&quot;</span><span style="color:#B392F0;"> aria-selected</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#E1E4E8;">&gt;标签二&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="可访问性树原理" tabindex="-1">可访问性树原理 <a class="header-anchor" href="#可访问性树原理" aria-label="Permalink to &quot;可访问性树原理&quot;">​</a></h2><h3 id="dom-树到可访问性树" tabindex="-1">DOM 树到可访问性树 <a class="header-anchor" href="#dom-树到可访问性树" aria-label="Permalink to &quot;DOM 树到可访问性树&quot;">​</a></h3><p>浏览器将 DOM 元素转换为辅助技术可理解的可访问性节点。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>DOM树:</span></span>
<span class="line"><span>&lt;div class=&quot;custom-btn&quot;&gt;点击我&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>可访问性树:</span></span>
<span class="line"><span>generic container (无意义)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>添加ARIA后:</span></span>
<span class="line"><span>&lt;div class=&quot;custom-btn&quot; role=&quot;button&quot;&gt;点击我&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>可访问性树:</span></span>
<span class="line"><span>button: &quot;点击我&quot;</span></span></code></pre></div><h3 id="浏览器映射过程" tabindex="-1">浏览器映射过程 <a class="header-anchor" href="#浏览器映射过程" aria-label="Permalink to &quot;浏览器映射过程&quot;">​</a></h3><p>代码示例分析：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;native&quot;</span><span style="color:#E1E4E8;">&gt;原生按钮&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;custom&quot;</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;button&quot;</span><span style="color:#B392F0;"> tabindex</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#E1E4E8;">&gt;自定义按钮&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><p>浏览器处理流程：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>1. 解析DOM</span></span>
<span class="line"><span>2. 计算可访问性树:</span></span>
<span class="line"><span>   - 原生按钮 → button角色 + 默认属性</span></span>
<span class="line"><span>   - 自定义div + role=&quot;button&quot; → button角色 + 手动属性</span></span>
<span class="line"><span>3. 暴露给辅助技术API</span></span></code></pre></div><p>JavaScript 检查可访问性树：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// 获取元素的可访问性信息</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> element</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;custom&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> name</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> element.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-label&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> element.textContent;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> role</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> element.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;role&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> state</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  disabled: element.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-disabled&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">===</span><span style="color:#9ECBFF;"> &#39;true&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  expanded: element.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-expanded&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  pressed: element.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-pressed&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`角色: \${</span><span style="color:#E1E4E8;">role</span><span style="color:#9ECBFF;">}, 名称: \${</span><span style="color:#E1E4E8;">name</span><span style="color:#9ECBFF;">}, 状态:\`</span><span style="color:#E1E4E8;">, state);</span></span></code></pre></div><h2 id="核心-aria-模式" tabindex="-1">核心 ARIA 模式 <a class="header-anchor" href="#核心-aria-模式" aria-label="Permalink to &quot;核心 ARIA 模式&quot;">​</a></h2><h3 id="地标角色" tabindex="-1">地标角色 <a class="header-anchor" href="#地标角色" aria-label="Permalink to &quot;地标角色&quot;">​</a></h3><p>标识页面主要区域，帮助屏幕阅读器用户快速导航。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">header</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;banner&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">h1</span><span style="color:#E1E4E8;">&gt;网站标题&lt;/</span><span style="color:#85E89D;">h1</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">header</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">nav</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;navigation&quot;</span><span style="color:#B392F0;"> aria-label</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;主导航&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">ul</span><span style="color:#E1E4E8;">&gt;...&lt;/</span><span style="color:#85E89D;">ul</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">main</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;main&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">article</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;article&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">h2</span><span style="color:#E1E4E8;">&gt;文章标题&lt;/</span><span style="color:#85E89D;">h2</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">article</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">main</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">aside</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;complementary&quot;</span><span style="color:#B392F0;"> aria-label</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;相关链接&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">section</span><span style="color:#E1E4E8;">&gt;...&lt;/</span><span style="color:#85E89D;">section</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">aside</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">footer</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;contentinfo&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;版权信息&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">footer</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><p>屏幕阅读器导航命令：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>地标导航: &quot;按D键跳转下一个地标&quot;</span></span>
<span class="line"><span>输出: &quot;横幅, 主导航 导航, 主内容 主区域, 文章, 相关链接 补充内容, 内容信息&quot;</span></span></code></pre></div><h3 id="实时区域-live-regions" tabindex="-1">实时区域 (Live Regions) <a class="header-anchor" href="#实时区域-live-regions" aria-label="Permalink to &quot;实时区域 (Live Regions)&quot;">​</a></h3><p>声明动态更新内容，控制屏幕阅读器如何宣布变化。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 重要通知 - 立即中断 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;alert&quot;</span><span style="color:#B392F0;"> aria-live</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;assertive&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  系统错误：请立即保存工作</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 普通更新 - 等待当前阅读完成 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> aria-live</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;polite&quot;</span><span style="color:#B392F0;"> aria-atomic</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  消息已发送</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 复杂更新 - 只读相关部分 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> aria-live</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;polite&quot;</span><span style="color:#B392F0;"> aria-atomic</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  更新了&lt;</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;5条&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;新消息</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><p>实时区域行为示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>aria-live=&quot;off&quot;:     更新被忽略</span></span>
<span class="line"><span>aria-live=&quot;polite&quot;:  &quot;消息已发送&quot; (等待合适时机)</span></span>
<span class="line"><span>aria-live=&quot;assertive&quot;: &quot;系统错误!&quot; (立即中断)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>aria-atomic=&quot;true&quot;:  &quot;消息已发送&quot; (朗读整个区域)</span></span>
<span class="line"><span>aria-atomic=&quot;false&quot;: &quot;5条&quot; (只读变化部分)</span></span></code></pre></div><h3 id="表单验证" tabindex="-1">表单验证 <a class="header-anchor" href="#表单验证" aria-label="Permalink to &quot;表单验证&quot;">​</a></h3><p>提供错误状态和描述信息。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">label</span><span style="color:#B392F0;"> for</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;email&quot;</span><span style="color:#E1E4E8;">&gt;邮箱地址:&lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">input</span><span style="color:#B392F0;"> type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;email&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">       id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;email&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">       name</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;email&quot;</span></span>
<span class="line"><span style="color:#B392F0;">       aria-required</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#B392F0;">       aria-invalid</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span></span>
<span class="line"><span style="color:#B392F0;">       aria-describedby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;email-error email-help&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">span</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;email-help&quot;</span><span style="color:#E1E4E8;">&gt;请输入有效的邮箱地址&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">span</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;email-error&quot;</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;alert&quot;</span><span style="color:#B392F0;"> aria-live</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;polite&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;email&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;blur&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> errorElement</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;email-error&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> isValid</span><span style="color:#F97583;"> =</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.value.</span><span style="color:#B392F0;">includes</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#79B8FF;">  this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">setAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-invalid&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">isValid);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">isValid) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    errorElement.textContent </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;请输入包含@符号的有效邮箱地址&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    errorElement.textContent </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><p>验证状态流程图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>用户输入 → 失去焦点 → 验证检查</span></span>
<span class="line"><span>         ↓</span></span>
<span class="line"><span>有效: aria-invalid=&quot;false&quot; → 无错误消息</span></span>
<span class="line"><span>无效: aria-invalid=&quot;true&quot; + 错误描述 → 屏幕阅读器宣布错误</span></span></code></pre></div><h2 id="复杂组件模式" tabindex="-1">复杂组件模式 <a class="header-anchor" href="#复杂组件模式" aria-label="Permalink to &quot;复杂组件模式&quot;">​</a></h2><h3 id="标签页组件" tabindex="-1">标签页组件 <a class="header-anchor" href="#标签页组件" aria-label="Permalink to &quot;标签页组件&quot;">​</a></h3><p>实现完整的标签页交互模式。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tablist&quot;</span><span style="color:#B392F0;"> aria-label</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;内容分类&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tab&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">          aria-selected</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">          aria-controls</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;panel-1&quot;</span></span>
<span class="line"><span style="color:#B392F0;">          id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tab-1&quot;</span></span>
<span class="line"><span style="color:#B392F0;">          tabindex</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    基本信息</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tab&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">          aria-selected</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">          aria-controls</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;panel-2&quot;</span></span>
<span class="line"><span style="color:#B392F0;">          id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tab-2&quot;</span></span>
<span class="line"><span style="color:#B392F0;">          tabindex</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;-1&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    高级设置</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tabpanel&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">     id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;panel-1&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">     aria-labelledby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tab-1&quot;</span></span>
<span class="line"><span style="color:#B392F0;">     tabindex</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  基本信息内容...</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tabpanel&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">     id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;panel-2&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">     aria-labelledby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;tab-2&quot;</span></span>
<span class="line"><span style="color:#B392F0;">     hidden</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">     tabindex</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  高级设置内容...</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><p>JavaScript 交互实现：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> TabComponent</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">container</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.tablist </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> container.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;[role=&quot;tablist&quot;]&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.tabs </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> container.</span><span style="color:#B392F0;">querySelectorAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;[role=&quot;tab&quot;]&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.panels </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> container.</span><span style="color:#B392F0;">querySelectorAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;[role=&quot;tabpanel&quot;]&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">bindEvents</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">  bindEvents</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.tabs.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">tab</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      tab.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;click&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">activateTab</span><span style="color:#E1E4E8;">(tab));</span></span>
<span class="line"><span style="color:#E1E4E8;">      tab.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;keydown&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">handleKeydown</span><span style="color:#E1E4E8;">(e, tab));</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">  activateTab</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">selectedTab</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#6A737D;">    // 更新标签状态</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.tabs.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">tab</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      const</span><span style="color:#79B8FF;"> isSelected</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> tab </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> selectedTab;</span></span>
<span class="line"><span style="color:#E1E4E8;">      tab.</span><span style="color:#B392F0;">setAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-selected&#39;</span><span style="color:#E1E4E8;">, isSelected);</span></span>
<span class="line"><span style="color:#E1E4E8;">      tab.</span><span style="color:#B392F0;">setAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;tabindex&#39;</span><span style="color:#E1E4E8;">, isSelected </span><span style="color:#F97583;">?</span><span style="color:#9ECBFF;"> &#39;0&#39;</span><span style="color:#F97583;"> :</span><span style="color:#9ECBFF;"> &#39;-1&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">    // 更新面板显示</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.panels.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">panel</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      const</span><span style="color:#79B8FF;"> isActive</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> panel.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-labelledby&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> selectedTab.id;</span></span>
<span class="line"><span style="color:#E1E4E8;">      panel.hidden </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">isActive;</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">  handleKeydown</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">event</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">tab</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> key</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> event.key;</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> currentIndex</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> Array.</span><span style="color:#B392F0;">from</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.tabs).</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(tab);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#F97583;">    switch</span><span style="color:#E1E4E8;">(key) {</span></span>
<span class="line"><span style="color:#F97583;">      case</span><span style="color:#9ECBFF;"> &#39;ArrowRight&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        event.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">        const</span><span style="color:#79B8FF;"> nextTab</span><span style="color:#F97583;"> =</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.tabs[(currentIndex </span><span style="color:#F97583;">+</span><span style="color:#79B8FF;"> 1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">%</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.tabs.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">        nextTab.</span><span style="color:#B392F0;">focus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">activateTab</span><span style="color:#E1E4E8;">(nextTab);</span></span>
<span class="line"><span style="color:#F97583;">        break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#F97583;">      case</span><span style="color:#9ECBFF;"> &#39;ArrowLeft&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        event.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">        const</span><span style="color:#79B8FF;"> prevTab</span><span style="color:#F97583;"> =</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.tabs[(currentIndex </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;"> 1</span><span style="color:#F97583;"> +</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.tabs.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">%</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.tabs.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">        prevTab.</span><span style="color:#B392F0;">focus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">activateTab</span><span style="color:#E1E4E8;">(prevTab);</span></span>
<span class="line"><span style="color:#F97583;">        break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#F97583;">      case</span><span style="color:#9ECBFF;"> &#39;Home&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        event.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.tabs[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">].</span><span style="color:#B392F0;">focus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">activateTab</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.tabs[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">]);</span></span>
<span class="line"><span style="color:#F97583;">        break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#F97583;">      case</span><span style="color:#9ECBFF;"> &#39;End&#39;</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        event.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.tabs[</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.tabs.</span><span style="color:#79B8FF;">length</span><span style="color:#F97583;"> -</span><span style="color:#79B8FF;"> 1</span><span style="color:#E1E4E8;">].</span><span style="color:#B392F0;">focus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">        this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">activateTab</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.tabs[</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.tabs.</span><span style="color:#79B8FF;">length</span><span style="color:#F97583;"> -</span><span style="color:#79B8FF;"> 1</span><span style="color:#E1E4E8;">]);</span></span>
<span class="line"><span style="color:#F97583;">        break</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="模态对话框" tabindex="-1">模态对话框 <a class="header-anchor" href="#模态对话框" aria-label="Permalink to &quot;模态对话框&quot;">​</a></h3><p>创建可访问的模态对话框。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-haspopup</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dialog&quot;</span><span style="color:#B392F0;"> onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">openModal</span><span style="color:#9ECBFF;">()&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  打开设置</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;modal&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">     role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dialog&quot;</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">     aria-labelledby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;modal-title&quot;</span></span>
<span class="line"><span style="color:#B392F0;">     aria-modal</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#B392F0;">     aria-describedby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;modal-desc&quot;</span></span>
<span class="line"><span style="color:#B392F0;">     hidden</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">h2</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;modal-title&quot;</span><span style="color:#E1E4E8;">&gt;系统设置&lt;/</span><span style="color:#85E89D;">h2</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;modal-desc&quot;</span><span style="color:#E1E4E8;">&gt;修改您的个人偏好设置&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">form</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      主题:</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">select</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">&gt;浅色&lt;/</span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">&gt;深色&lt;/</span><span style="color:#85E89D;">option</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">select</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;button&quot;</span><span style="color:#B392F0;"> onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">closeModal</span><span style="color:#9ECBFF;">()&quot;</span><span style="color:#E1E4E8;">&gt;取消&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;submit&quot;</span><span style="color:#E1E4E8;">&gt;保存&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">form</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><p>模态框管理 JavaScript：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> previousActiveElement;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> openModal</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> modal</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;modal&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  previousActiveElement </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.activeElement;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 显示模态框</span></span>
<span class="line"><span style="color:#E1E4E8;">  modal.hidden </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 设置焦点陷阱</span></span>
<span class="line"><span style="color:#B392F0;">  trapFocus</span><span style="color:#E1E4E8;">(modal);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 将焦点移动到模态框</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> firstFocusable</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> modal.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;button, input, select&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  firstFocusable.</span><span style="color:#B392F0;">focus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 隐藏背景内容</span></span>
<span class="line"><span style="color:#E1E4E8;">  document.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;main&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">setAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-hidden&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;true&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> closeModal</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> modal</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;modal&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  modal.hidden </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> true</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 恢复背景内容</span></span>
<span class="line"><span style="color:#E1E4E8;">  document.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;main&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">removeAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-hidden&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 恢复焦点</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (previousActiveElement) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    previousActiveElement.</span><span style="color:#B392F0;">focus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> trapFocus</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">modal</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> focusableElements</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> modal.</span><span style="color:#B392F0;">querySelectorAll</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#9ECBFF;">    &#39;button, [href], input, select, textarea, [tabindex]:not([tabindex=&quot;-1&quot;])&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> firstElement</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> focusableElements[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> lastElement</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> focusableElements[focusableElements.</span><span style="color:#79B8FF;">length</span><span style="color:#F97583;"> -</span><span style="color:#79B8FF;"> 1</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  modal.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;keydown&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (e.key </span><span style="color:#F97583;">===</span><span style="color:#9ECBFF;"> &#39;Tab&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">      if</span><span style="color:#E1E4E8;"> (e.shiftKey) {</span></span>
<span class="line"><span style="color:#6A737D;">        // Shift + Tab</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> (document.activeElement </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> firstElement) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          lastElement.</span><span style="color:#B392F0;">focus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">          e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">        // Tab</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> (document.activeElement </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> lastElement) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          firstElement.</span><span style="color:#B392F0;">focus</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">          e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#F97583;"> if</span><span style="color:#E1E4E8;"> (e.key </span><span style="color:#F97583;">===</span><span style="color:#9ECBFF;"> &#39;Escape&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#B392F0;">      closeModal</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="aria-属性分类详解" tabindex="-1">ARIA 属性分类详解 <a class="header-anchor" href="#aria-属性分类详解" aria-label="Permalink to &quot;ARIA 属性分类详解&quot;">​</a></h2><h3 id="标签和描述属性" tabindex="-1">标签和描述属性 <a class="header-anchor" href="#标签和描述属性" aria-label="Permalink to &quot;标签和描述属性&quot;">​</a></h3><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 直接标签 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-label</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;关闭对话框&quot;</span><span style="color:#E1E4E8;">&gt;X&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 引用标签 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">label</span><span style="color:#B392F0;"> for</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;search&quot;</span><span style="color:#E1E4E8;">&gt;搜索&lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">input</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;search&quot;</span><span style="color:#B392F0;"> type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#B392F0;"> aria-describedby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;search-help&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">span</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;search-help&quot;</span><span style="color:#E1E4E8;">&gt;输入关键词进行搜索&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 组合标签 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;group&quot;</span><span style="color:#B392F0;"> aria-labelledby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;address-heading&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">h3</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;address-heading&quot;</span><span style="color:#E1E4E8;">&gt;邮寄地址&lt;/</span><span style="color:#85E89D;">h3</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#6A737D;">  &lt;!-- 地址字段 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="关系属性" tabindex="-1">关系属性 <a class="header-anchor" href="#关系属性" aria-label="Permalink to &quot;关系属性&quot;">​</a></h3><p>建立元素间的关系连接。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 控制关系 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-expanded</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#B392F0;"> aria-controls</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dropdown-menu&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  选项菜单</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">ul</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dropdown-menu&quot;</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;menu&quot;</span><span style="color:#B392F0;"> hidden</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">li</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;menuitem&quot;</span><span style="color:#E1E4E8;">&gt;选项一&lt;/</span><span style="color:#85E89D;">li</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">ul</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 所属关系 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;toolbar&quot;</span><span style="color:#B392F0;"> aria-labelledby</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;toolbar-label&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">span</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;toolbar-label&quot;</span><span style="color:#B392F0;"> class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;visually-hidden&quot;</span><span style="color:#E1E4E8;">&gt;格式工具栏&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-pressed</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#E1E4E8;">&gt;粗体&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-pressed</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#E1E4E8;">&gt;斜体&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 弹出框关系 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-haspopup</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#B392F0;"> aria-expanded</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  用户菜单</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="状态属性" tabindex="-1">状态属性 <a class="header-anchor" href="#状态属性" aria-label="Permalink to &quot;状态属性&quot;">​</a></h3><p>表示动态交互状态。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 选择状态 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;listbox&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;option&quot;</span><span style="color:#B392F0;"> aria-selected</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">&gt;选项一&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;option&quot;</span><span style="color:#B392F0;"> aria-selected</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#E1E4E8;">&gt;选项二&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 禁用状态 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-disabled</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">&gt;正在提交...&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 拖放状态 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;button&quot;</span><span style="color:#B392F0;"> aria-grabbed</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#B392F0;"> draggable</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  可拖动项目</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 必需状态 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">input</span><span style="color:#B392F0;"> type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#B392F0;"> aria-required</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="aria-使用最佳实践" tabindex="-1">ARIA 使用最佳实践 <a class="header-anchor" href="#aria-使用最佳实践" aria-label="Permalink to &quot;ARIA 使用最佳实践&quot;">​</a></h2><h3 id="aria-第一规则" tabindex="-1">ARIA 第一规则 <a class="header-anchor" href="#aria-第一规则" aria-label="Permalink to &quot;ARIA 第一规则&quot;">​</a></h3><p>“如果你能使用原生 HTML 元素或属性具有所需的语义和行为，而不是重新使用 ARIA 来补充，那么就这样做。”</p><p>代码示例对比：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 不良实践：用ARIA模拟原生元素 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;button&quot;</span><span style="color:#B392F0;"> tabindex</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#B392F0;"> onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">handleClick</span><span style="color:#9ECBFF;">()&quot;</span><span style="color:#E1E4E8;">&gt;点击&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 良好实践：使用原生按钮 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">handleClick</span><span style="color:#9ECBFF;">()&quot;</span><span style="color:#E1E4E8;">&gt;点击&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 例外情况：需要增强语义时 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> aria-pressed</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;false&quot;</span><span style="color:#B392F0;"> aria-label</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;静音&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  🔇</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="角色和属性验证" tabindex="-1">角色和属性验证 <a class="header-anchor" href="#角色和属性验证" aria-label="Permalink to &quot;角色和属性验证&quot;">​</a></h3><p>确保 ARIA 使用符合规范。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">&lt;!-- 无效：button角色不能包含子按钮 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;button&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;子按钮&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#6A737D;">&lt;!-- 无效嵌套 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- 有效：使用适当的容器角色 --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;toolbar&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;工具一&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;工具二&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="动态更新管理" tabindex="-1">动态更新管理 <a class="header-anchor" href="#动态更新管理" aria-label="Permalink to &quot;动态更新管理&quot;">​</a></h3><p>正确处理 ARIA 状态的动态变化。</p><p>代码示例：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> AccessibleComponent</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">element</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.element </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> element;</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">updateAriaAttributes</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">  updateAriaAttributes</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">    // 根据组件状态更新ARIA</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> isExpanded</span><span style="color:#F97583;"> =</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.element.classList.</span><span style="color:#B392F0;">contains</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;expanded&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.element.</span><span style="color:#B392F0;">setAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-expanded&#39;</span><span style="color:#E1E4E8;">, isExpanded);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> isDisabled</span><span style="color:#F97583;"> =</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.element.disabled;</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.element.</span><span style="color:#B392F0;">setAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-disabled&#39;</span><span style="color:#E1E4E8;">, isDisabled);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 使用MutationObserver监听变化</span></span>
<span class="line"><span style="color:#B392F0;">  observeChanges</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> observer</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> MutationObserver</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">mutations</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      mutations.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">mutation</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> (mutation.type </span><span style="color:#F97583;">===</span><span style="color:#9ECBFF;"> &#39;attributes&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#79B8FF;">          this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">updateAriaAttributes</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    observer.</span><span style="color:#B392F0;">observe</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.element, {</span></span>
<span class="line"><span style="color:#E1E4E8;">      attributes: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      attributeFilter: [</span><span style="color:#9ECBFF;">&#39;class&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;disabled&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="测试和调试" tabindex="-1">测试和调试 <a class="header-anchor" href="#测试和调试" aria-label="Permalink to &quot;测试和调试&quot;">​</a></h2><h3 id="屏幕阅读器测试" tabindex="-1">屏幕阅读器测试 <a class="header-anchor" href="#屏幕阅读器测试" aria-label="Permalink to &quot;屏幕阅读器测试&quot;">​</a></h3><p>使用不同屏幕阅读器验证 ARIA 实现。</p><p>测试流程：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>1. NVDA + Firefox: 检查角色宣布</span></span>
<span class="line"><span>2. VoiceOver + Safari: 验证交互状态</span></span>
<span class="line"><span>3. JAWS + Chrome: 测试键盘导航</span></span></code></pre></div><h3 id="开发者工具检查" tabindex="-1">开发者工具检查 <a class="header-anchor" href="#开发者工具检查" aria-label="Permalink to &quot;开发者工具检查&quot;">​</a></h3><p>使用浏览器开发者工具检查可访问性树。</p><p>代码示例：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;navigation&quot;</span><span style="color:#B392F0;"> aria-label</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;侧边栏导航&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">ul</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;list&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">li</span><span style="color:#B392F0;"> role</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;listitem&quot;</span><span style="color:#E1E4E8;">&gt;&lt;</span><span style="color:#85E89D;">a</span><span style="color:#B392F0;"> href</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;#&quot;</span><span style="color:#E1E4E8;">&gt;链接一&lt;/</span><span style="color:#85E89D;">a</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">li</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">ul</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><p>浏览器工具显示：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>可访问性树:</span></span>
<span class="line"><span>navigation: &quot;侧边栏导航&quot;</span></span>
<span class="line"><span>  list: &quot;&quot;</span></span>
<span class="line"><span>    listitem: &quot;&quot;</span></span>
<span class="line"><span>      link: &quot;链接一&quot;</span></span></code></pre></div><h3 id="自动化测试" tabindex="-1">自动化测试 <a class="header-anchor" href="#自动化测试" aria-label="Permalink to &quot;自动化测试&quot;">​</a></h3><p>使用工具验证 ARIA 使用正确性。</p><p>代码示例 (使用 axe-core)：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// ARIA规则测试</span></span>
<span class="line"><span style="color:#E1E4E8;">axe.</span><span style="color:#B392F0;">run</span><span style="color:#E1E4E8;">(document, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  rules: {</span></span>
<span class="line"><span style="color:#9ECBFF;">    &#39;aria-valid-attr&#39;</span><span style="color:#E1E4E8;">: { enabled: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#9ECBFF;">    &#39;aria-required-attr&#39;</span><span style="color:#E1E4E8;">: { enabled: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#9ECBFF;">    &#39;aria-required-parent&#39;</span><span style="color:#E1E4E8;">: { enabled: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#9ECBFF;">    &#39;aria-required-children&#39;</span><span style="color:#E1E4E8;">: { enabled: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}, (</span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">results</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (err) </span><span style="color:#F97583;">throw</span><span style="color:#E1E4E8;"> err;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  results.violations.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">violation</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ARIA违规:&#39;</span><span style="color:#E1E4E8;">, violation.description);</span></span>
<span class="line"><span style="color:#E1E4E8;">    violation.nodes.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">node</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;问题节点:&#39;</span><span style="color:#E1E4E8;">, node.html);</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;修复建议:&#39;</span><span style="color:#E1E4E8;">, node.any.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">fix</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> fix.message));</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h3 id="aria-属性验证函数" tabindex="-1">ARIA 属性验证函数 <a class="header-anchor" href="#aria-属性验证函数" aria-label="Permalink to &quot;ARIA 属性验证函数&quot;">​</a></h3><p>自定义验证工具检查常见错误。</p><p>代码示例：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> validateAriaUsage</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">element</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> issues</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> [];</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 检查无效属性</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> validAttrs</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#9ECBFF;">    &#39;role&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;aria-label&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;aria-labelledby&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;aria-describedby&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#9ECBFF;">    &#39;aria-hidden&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;aria-disabled&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;aria-expanded&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;aria-pressed&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#6A737D;">    // ... 其他有效属性</span></span>
<span class="line"><span style="color:#E1E4E8;">  ];</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  Array.</span><span style="color:#B392F0;">from</span><span style="color:#E1E4E8;">(element.attributes).</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">attr</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (attr.name.</span><span style="color:#B392F0;">startsWith</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">validAttrs.</span><span style="color:#B392F0;">includes</span><span style="color:#E1E4E8;">(attr.name)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      issues.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`无效ARIA属性: \${</span><span style="color:#E1E4E8;">attr</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">name</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 检查必需属性</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> role</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> element.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;role&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (role </span><span style="color:#F97583;">===</span><span style="color:#9ECBFF;"> &#39;button&#39;</span><span style="color:#F97583;"> &amp;&amp;</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">element.</span><span style="color:#B392F0;">hasAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;tabindex&#39;</span><span style="color:#E1E4E8;">)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    issues.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;自定义按钮需要tabindex属性&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 检查关系完整性</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> labelledBy</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> element.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aria-labelledby&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (labelledBy </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#F97583;"> !</span><span style="color:#E1E4E8;">document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(labelledBy)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    issues.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`aria-labelledby指向不存在的元素: \${</span><span style="color:#E1E4E8;">labelledBy</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> issues;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div>`,109)])])}const u=a(o,[["render",e]]);export{F as __pageData,u as default};

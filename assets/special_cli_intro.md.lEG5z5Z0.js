import{_ as a,c as n,o as l,b as p}from"./chunks/framework.CMLuPXeo.js";const F=JSON.parse('{"title":"ç®€ä»‹","description":"","frontmatter":{},"headers":[{"level":2,"title":"ä»€ä¹ˆæ˜¯ Node.js å‘½ä»¤è¡Œåº”ç”¨","slug":"ä»€ä¹ˆæ˜¯-node-js-å‘½ä»¤è¡Œåº”ç”¨","link":"#ä»€ä¹ˆæ˜¯-node-js-å‘½ä»¤è¡Œåº”ç”¨","children":[]},{"level":2,"title":"æ ¸å¿ƒä¼˜åŠ¿","slug":"æ ¸å¿ƒä¼˜åŠ¿","link":"#æ ¸å¿ƒä¼˜åŠ¿","children":[{"level":3,"title":"è·¨å¹³å°å…¼å®¹æ€§","slug":"è·¨å¹³å°å…¼å®¹æ€§","link":"#è·¨å¹³å°å…¼å®¹æ€§","children":[]},{"level":3,"title":"ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ","slug":"ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ","link":"#ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ","children":[]},{"level":3,"title":"JavaScript å…¨æ ˆç»Ÿä¸€","slug":"javascript-å…¨æ ˆç»Ÿä¸€","link":"#javascript-å…¨æ ˆç»Ÿä¸€","children":[]}]},{"level":2,"title":"å…³é”®æŠ€æœ¯ç»„æˆ","slug":"å…³é”®æŠ€æœ¯ç»„æˆ","link":"#å…³é”®æŠ€æœ¯ç»„æˆ","children":[{"level":3,"title":"è„šæœ¬å£°æ˜","slug":"è„šæœ¬å£°æ˜","link":"#è„šæœ¬å£°æ˜","children":[]},{"level":3,"title":"å‚æ•°è§£æ","slug":"å‚æ•°è§£æ","link":"#å‚æ•°è§£æ","children":[]},{"level":3,"title":"ç”¨æˆ·äº¤äº’","slug":"ç”¨æˆ·äº¤äº’","link":"#ç”¨æˆ·äº¤äº’","children":[]},{"level":3,"title":"ç»ˆç«¯æ ·å¼","slug":"ç»ˆç«¯æ ·å¼","link":"#ç»ˆç«¯æ ·å¼","children":[]},{"level":3,"title":"æ–‡ä»¶ç³»ç»Ÿæ“ä½œ","slug":"æ–‡ä»¶ç³»ç»Ÿæ“ä½œ","link":"#æ–‡ä»¶ç³»ç»Ÿæ“ä½œ","children":[]},{"level":3,"title":"å­è¿›ç¨‹ç®¡ç†","slug":"å­è¿›ç¨‹ç®¡ç†","link":"#å­è¿›ç¨‹ç®¡ç†","children":[]}]},{"level":2,"title":"å¼€å‘æœ€ä½³å®è·µ","slug":"å¼€å‘æœ€ä½³å®è·µ","link":"#å¼€å‘æœ€ä½³å®è·µ","children":[{"level":3,"title":"é”™è¯¯å¤„ç†","slug":"é”™è¯¯å¤„ç†","link":"#é”™è¯¯å¤„ç†","children":[]},{"level":3,"title":"é…ç½®ç®¡ç†","slug":"é…ç½®ç®¡ç†","link":"#é…ç½®ç®¡ç†","children":[]},{"level":3,"title":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","link":"#æ€§èƒ½ä¼˜åŒ–","children":[]}]},{"level":2,"title":"å‘å¸ƒä¸åˆ†å‘","slug":"å‘å¸ƒä¸åˆ†å‘","link":"#å‘å¸ƒä¸åˆ†å‘","children":[{"level":3,"title":"package.json é…ç½®","slug":"package-json-é…ç½®","link":"#package-json-é…ç½®","children":[]},{"level":3,"title":"å®‰è£…æµ‹è¯•","slug":"å®‰è£…æµ‹è¯•","link":"#å®‰è£…æµ‹è¯•","children":[]}]}],"relativePath":"special/cli/intro.md","filePath":"special/cli/intro.md"}'),o={name:"special/cli/intro.md"};function e(c,s,t,E,r,y){return l(),n("div",null,[...s[0]||(s[0]=[p(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /special/cli/intro.md for this page in Markdown format</div><h1 id="ç®€ä»‹" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹" aria-label="Permalink to &quot;ç®€ä»‹&quot;">â€‹</a></h1><h2 id="ä»€ä¹ˆæ˜¯-node-js-å‘½ä»¤è¡Œåº”ç”¨" tabindex="-1">ä»€ä¹ˆæ˜¯ Node.js å‘½ä»¤è¡Œåº”ç”¨ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-node-js-å‘½ä»¤è¡Œåº”ç”¨" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ Node.js å‘½ä»¤è¡Œåº”ç”¨&quot;">â€‹</a></h2><p>Node.js å‘½ä»¤è¡Œåº”ç”¨æ˜¯åŸºäº Node.js è¿è¡Œæ—¶å¼€å‘çš„ç»ˆç«¯å·¥å…·ï¼Œé€šè¿‡å‘½ä»¤è¡Œç•Œé¢ä¸ç”¨æˆ·äº¤äº’ã€‚è¿™ç±»åº”ç”¨é€šå¸¸ä»¥å¯æ‰§è¡Œè„šæœ¬å½¢å¼å­˜åœ¨ï¼Œèƒ½å¤Ÿè·¨å¹³å°è¿è¡Œã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>ç”¨æˆ·è¾“å…¥å‘½ä»¤ -&gt; Node.jsè§£ææ‰§è¡Œ -&gt; ç»ˆç«¯è¾“å‡ºç»“æœ</span></span></code></pre></div><h2 id="æ ¸å¿ƒä¼˜åŠ¿" tabindex="-1">æ ¸å¿ƒä¼˜åŠ¿ <a class="header-anchor" href="#æ ¸å¿ƒä¼˜åŠ¿" aria-label="Permalink to &quot;æ ¸å¿ƒä¼˜åŠ¿&quot;">â€‹</a></h2><h3 id="è·¨å¹³å°å…¼å®¹æ€§" tabindex="-1">è·¨å¹³å°å…¼å®¹æ€§ <a class="header-anchor" href="#è·¨å¹³å°å…¼å®¹æ€§" aria-label="Permalink to &quot;è·¨å¹³å°å…¼å®¹æ€§&quot;">â€‹</a></h3><p>Node.js å†…ç½®çš„ <code>os</code> æ¨¡å—å’Œç¬¬ä¸‰æ–¹åº“å¦‚ <code>cross-spawn</code> ç¡®ä¿ä»£ç åœ¨ Windowsã€Linuxã€macOS ä¸Šä¸€è‡´è¿è¡Œã€‚</p><h3 id="ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ" tabindex="-1">ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ <a class="header-anchor" href="#ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ" aria-label="Permalink to &quot;ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ&quot;">â€‹</a></h3><p>npm ä»“åº“æä¾›æ•°åƒä¸ªä¸“é—¨ç”¨äºå‘½ä»¤è¡Œå¼€å‘çš„åŒ…ï¼Œè¦†ç›–ä»å‚æ•°è§£æåˆ°ç•Œé¢äº¤äº’çš„å„ä¸ªæ–¹é¢ã€‚</p><h3 id="javascript-å…¨æ ˆç»Ÿä¸€" tabindex="-1">JavaScript å…¨æ ˆç»Ÿä¸€ <a class="header-anchor" href="#javascript-å…¨æ ˆç»Ÿä¸€" aria-label="Permalink to &quot;JavaScript å…¨æ ˆç»Ÿä¸€&quot;">â€‹</a></h3><p>å‰åç«¯å¼€å‘ä½¿ç”¨ç›¸åŒè¯­è¨€ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬ã€‚</p><h2 id="å…³é”®æŠ€æœ¯ç»„æˆ" tabindex="-1">å…³é”®æŠ€æœ¯ç»„æˆ <a class="header-anchor" href="#å…³é”®æŠ€æœ¯ç»„æˆ" aria-label="Permalink to &quot;å…³é”®æŠ€æœ¯ç»„æˆ&quot;">â€‹</a></h2><h3 id="è„šæœ¬å£°æ˜" tabindex="-1">è„šæœ¬å£°æ˜ <a class="header-anchor" href="#è„šæœ¬å£°æ˜" aria-label="Permalink to &quot;è„šæœ¬å£°æ˜&quot;">â€‹</a></h3><p>åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œé¦–è¡Œéœ€è¦æ·»åŠ  Shebang å£°æ˜ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#!/usr/bin/env node</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { program } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;commander&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">program</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">version</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;1.0.0&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(process.argv);</span></span></code></pre></div><p>æ–‡ä»¶éœ€è®¾ç½®æ‰§è¡Œæƒé™ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#9ECBFF;"> +x</span><span style="color:#9ECBFF;"> cli.js</span></span></code></pre></div><h3 id="å‚æ•°è§£æ" tabindex="-1">å‚æ•°è§£æ <a class="header-anchor" href="#å‚æ•°è§£æ" aria-label="Permalink to &quot;å‚æ•°è§£æ&quot;">â€‹</a></h3><h4 id="åŸºç¡€å‚æ•°å¤„ç†" tabindex="-1">åŸºç¡€å‚æ•°å¤„ç† <a class="header-anchor" href="#åŸºç¡€å‚æ•°å¤„ç†" aria-label="Permalink to &quot;åŸºç¡€å‚æ•°å¤„ç†&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// è·å–åŸå§‹å‚æ•°</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(process.argv); </span><span style="color:#6A737D;">// [&#39;node&#39;, &#39;script.js&#39;, &#39;arg1&#39;, &#39;arg2&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä½¿ç”¨ commander è¿›è¡Œé«˜çº§è§£æ</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Command } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;commander&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> program</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> Command</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">program</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;my-cli&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">description</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ä¸€ä¸ªç¤ºä¾‹å‘½ä»¤è¡Œå·¥å…·&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">version</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;0.1.0&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">program</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">argument</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;&lt;input&gt;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;è¾“å…¥æ–‡ä»¶&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">option</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;-o, --output &lt;file&gt;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;è¾“å‡ºæ–‡ä»¶&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">action</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">input</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">options</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`å¤„ç†æ–‡ä»¶: \${</span><span style="color:#E1E4E8;">input</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (options.output) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`è¾“å‡ºåˆ°: \${</span><span style="color:#E1E4E8;">options</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">output</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">program.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">();</span></span></code></pre></div><h4 id="å¤æ‚é€‰é¡¹é…ç½®" tabindex="-1">å¤æ‚é€‰é¡¹é…ç½® <a class="header-anchor" href="#å¤æ‚é€‰é¡¹é…ç½®" aria-label="Permalink to &quot;å¤æ‚é€‰é¡¹é…ç½®&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">program</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">option</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;-v, --verbose&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;è¯¦ç»†è¾“å‡ºæ¨¡å¼&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">option</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;-c, --count &lt;number&gt;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;é‡å¤æ¬¡æ•°&#39;</span><span style="color:#E1E4E8;">, parseInt)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">requiredOption</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;-u, --user &lt;name&gt;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;å¿…é¡»çš„ç”¨æˆ·å&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">option</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;--no-color&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;ç¦ç”¨é¢œè‰²è¾“å‡º&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><h3 id="ç”¨æˆ·äº¤äº’" tabindex="-1">ç”¨æˆ·äº¤äº’ <a class="header-anchor" href="#ç”¨æˆ·äº¤äº’" aria-label="Permalink to &quot;ç”¨æˆ·äº¤äº’&quot;">â€‹</a></h3><h4 id="è¾“å…¥æç¤º" tabindex="-1">è¾“å…¥æç¤º <a class="header-anchor" href="#è¾“å…¥æç¤º" aria-label="Permalink to &quot;è¾“å…¥æç¤º&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> readline </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;readline/promises&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> rl</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> readline.</span><span style="color:#B392F0;">createInterface</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  input: process.stdin,</span></span>
<span class="line"><span style="color:#E1E4E8;">  output: process.stdout</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> name</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> rl.</span><span style="color:#B392F0;">question</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;è¯·è¾“å…¥æ‚¨çš„å§“å: &#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> age</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> rl.</span><span style="color:#B392F0;">question</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;è¯·è¾“å…¥æ‚¨çš„å¹´é¾„: &#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`æ‚¨å¥½ \${</span><span style="color:#E1E4E8;">name</span><span style="color:#9ECBFF;">}, æ‚¨ \${</span><span style="color:#E1E4E8;">age</span><span style="color:#9ECBFF;">} å²\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">rl.</span><span style="color:#B392F0;">close</span><span style="color:#E1E4E8;">();</span></span></code></pre></div><h4 id="ä½¿ç”¨-inquirer-js-å¢å¼ºäº¤äº’" tabindex="-1">ä½¿ç”¨ Inquirer.js å¢å¼ºäº¤äº’ <a class="header-anchor" href="#ä½¿ç”¨-inquirer-js-å¢å¼ºäº¤äº’" aria-label="Permalink to &quot;ä½¿ç”¨ Inquirer.js å¢å¼ºäº¤äº’&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> inquirer </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;inquirer&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> answers</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> inquirer.</span><span style="color:#B392F0;">prompt</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: </span><span style="color:#9ECBFF;">&#39;list&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;framework&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    message: </span><span style="color:#9ECBFF;">&#39;é€‰æ‹©æ‚¨å–œæ¬¢çš„æ¡†æ¶:&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    choices: [</span><span style="color:#9ECBFF;">&#39;React&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;Vue&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;Angular&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;Svelte&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: </span><span style="color:#9ECBFF;">&#39;checkbox&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;tools&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    message: </span><span style="color:#9ECBFF;">&#39;é€‰æ‹©å¼€å‘å·¥å…·:&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    choices: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&#39;ESLint&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#9ECBFF;">&#39;eslint&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&#39;Prettier&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#9ECBFF;">&#39;prettier&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&#39;TypeScript&#39;</span><span style="color:#E1E4E8;">, value: </span><span style="color:#9ECBFF;">&#39;typescript&#39;</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span></span>
<span class="line"><span style="color:#E1E4E8;">    type: </span><span style="color:#9ECBFF;">&#39;confirm&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;confirm&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    message: </span><span style="color:#9ECBFF;">&#39;ç¡®è®¤åˆ›å»ºé¡¹ç›®?&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    default: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ç”¨æˆ·é€‰æ‹©:&#39;</span><span style="color:#E1E4E8;">, answers);</span></span></code></pre></div><h3 id="ç»ˆç«¯æ ·å¼" tabindex="-1">ç»ˆç«¯æ ·å¼ <a class="header-anchor" href="#ç»ˆç«¯æ ·å¼" aria-label="Permalink to &quot;ç»ˆç«¯æ ·å¼&quot;">â€‹</a></h3><h4 id="åŸºç¡€æ–‡æœ¬æ ·å¼" tabindex="-1">åŸºç¡€æ–‡æœ¬æ ·å¼ <a class="header-anchor" href="#åŸºç¡€æ–‡æœ¬æ ·å¼" aria-label="Permalink to &quot;åŸºç¡€æ–‡æœ¬æ ·å¼&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> chalk </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;chalk&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(chalk.</span><span style="color:#B392F0;">blue</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;è“è‰²ä¿¡æ¯æ–‡æœ¬&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(chalk.red.</span><span style="color:#B392F0;">bold</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;çº¢è‰²åŠ ç²—é”™è¯¯ä¿¡æ¯&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(chalk.</span><span style="color:#B392F0;">green</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`</span></span>
<span class="line"><span style="color:#9ECBFF;">  æˆåŠŸæ¶ˆæ¯:</span></span>
<span class="line"><span style="color:#9ECBFF;">  âœ… æ“ä½œå®Œæˆ</span></span>
<span class="line"><span style="color:#9ECBFF;">  ğŸ“ æ–‡ä»¶å·²åˆ›å»º</span></span>
<span class="line"><span style="color:#9ECBFF;">\`</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> fileName</span><span style="color:#F97583;"> =</span><span style="color:#9ECBFF;"> &#39;config.json&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">chalk</span><span style="color:#9ECBFF;">\`{green æˆåŠŸ} åˆ›å»ºæ–‡ä»¶ {yellow \${</span><span style="color:#E1E4E8;">fileName</span><span style="color:#9ECBFF;">}}\`</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><h4 id="è¿›åº¦æ˜¾ç¤º" tabindex="-1">è¿›åº¦æ˜¾ç¤º <a class="header-anchor" href="#è¿›åº¦æ˜¾ç¤º" aria-label="Permalink to &quot;è¿›åº¦æ˜¾ç¤º&quot;">â€‹</a></h4><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> cliProgress </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;cli-progress&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// åˆ›å»ºè¿›åº¦æ¡</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> progressBar</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#E1E4E8;"> cliProgress.</span><span style="color:#B392F0;">SingleBar</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  format: </span><span style="color:#9ECBFF;">&#39;è¿›åº¦ |{bar}| {percentage}% | {value}/{total}&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  barCompleteChar: </span><span style="color:#9ECBFF;">&#39;â–ˆ&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  barIncompleteChar: </span><span style="color:#9ECBFF;">&#39;â–‘&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  hideCursor: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">progressBar.</span><span style="color:#B392F0;">start</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">; i </span><span style="color:#F97583;">&lt;=</span><span style="color:#79B8FF;"> 100</span><span style="color:#E1E4E8;">; i</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  progressBar.</span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">(i);</span></span>
<span class="line"><span style="color:#F97583;">  await</span><span style="color:#F97583;"> new</span><span style="color:#79B8FF;"> Promise</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">resolve</span><span style="color:#F97583;"> =&gt;</span><span style="color:#B392F0;"> setTimeout</span><span style="color:#E1E4E8;">(resolve, </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">progressBar.</span><span style="color:#B392F0;">stop</span><span style="color:#E1E4E8;">();</span></span></code></pre></div><h3 id="æ–‡ä»¶ç³»ç»Ÿæ“ä½œ" tabindex="-1">æ–‡ä»¶ç³»ç»Ÿæ“ä½œ <a class="header-anchor" href="#æ–‡ä»¶ç³»ç»Ÿæ“ä½œ" aria-label="Permalink to &quot;æ–‡ä»¶ç³»ç»Ÿæ“ä½œ&quot;">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> fs </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;fs/promises&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> path </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;path&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { fileURLToPath } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;url&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> __filename</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> fileURLToPath</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">meta</span><span style="color:#E1E4E8;">.url);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> __dirname</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">dirname</span><span style="color:#E1E4E8;">(__filename);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// é€’å½’ç›®å½•éå†</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> scanDirectory</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">dirPath</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> items</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">readdir</span><span style="color:#E1E4E8;">(dirPath);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> item</span><span style="color:#F97583;"> of</span><span style="color:#E1E4E8;"> items) {</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> fullPath</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(dirPath, item);</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> stat</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">stat</span><span style="color:#E1E4E8;">(fullPath);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (stat.</span><span style="color:#B392F0;">isDirectory</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`ğŸ“ \${</span><span style="color:#E1E4E8;">fullPath</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">      await</span><span style="color:#B392F0;"> scanDirectory</span><span style="color:#E1E4E8;">(fullPath);</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`ğŸ“„ \${</span><span style="color:#E1E4E8;">fullPath</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ–‡ä»¶æ¨¡æ¿ç”Ÿæˆ</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> createFromTemplate</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">templatePath</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">outputPath</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">variables</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  let</span><span style="color:#E1E4E8;"> content </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">readFile</span><span style="color:#E1E4E8;">(templatePath, </span><span style="color:#9ECBFF;">&#39;utf8&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // æ›¿æ¢å˜é‡</span></span>
<span class="line"><span style="color:#E1E4E8;">  Object.</span><span style="color:#B392F0;">entries</span><span style="color:#E1E4E8;">(variables).</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(([</span><span style="color:#FFAB70;">key</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">value</span><span style="color:#E1E4E8;">]) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    content </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> content.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> RegExp</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`{{\${</span><span style="color:#E1E4E8;">key</span><span style="color:#9ECBFF;">}}}\`</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;g&#39;</span><span style="color:#E1E4E8;">), value);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  await</span><span style="color:#E1E4E8;"> fs.</span><span style="color:#B392F0;">writeFile</span><span style="color:#E1E4E8;">(outputPath, content);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`åˆ›å»ºæ–‡ä»¶: \${</span><span style="color:#E1E4E8;">outputPath</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="å­è¿›ç¨‹ç®¡ç†" tabindex="-1">å­è¿›ç¨‹ç®¡ç† <a class="header-anchor" href="#å­è¿›ç¨‹ç®¡ç†" aria-label="Permalink to &quot;å­è¿›ç¨‹ç®¡ç†&quot;">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { spawn } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;child_process&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { promisify } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;util&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> executeCommand</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">command</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">options</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {}) {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#F97583;"> new</span><span style="color:#79B8FF;"> Promise</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">resolve</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">reject</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> child</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> spawn</span><span style="color:#E1E4E8;">(command, args, {</span></span>
<span class="line"><span style="color:#E1E4E8;">      stdio: </span><span style="color:#9ECBFF;">&#39;inherit&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#F97583;">      ...</span><span style="color:#E1E4E8;">options</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    child.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;close&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">code</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      if</span><span style="color:#E1E4E8;"> (code </span><span style="color:#F97583;">===</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#B392F0;">        resolve</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        reject</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œé€€å‡ºç : \${</span><span style="color:#E1E4E8;">code</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    child.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">, reject);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  await</span><span style="color:#B392F0;"> executeCommand</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;git&#39;</span><span style="color:#E1E4E8;">, [</span><span style="color:#9ECBFF;">&#39;clone&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;https://github.com/user/repo.git&#39;</span><span style="color:#E1E4E8;">]);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ä»“åº“å…‹éš†æˆåŠŸ&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;å…‹éš†å¤±è´¥:&#39;</span><span style="color:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="å¼€å‘æœ€ä½³å®è·µ" tabindex="-1">å¼€å‘æœ€ä½³å®è·µ <a class="header-anchor" href="#å¼€å‘æœ€ä½³å®è·µ" aria-label="Permalink to &quot;å¼€å‘æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="é”™è¯¯å¤„ç†" tabindex="-1">é”™è¯¯å¤„ç† <a class="header-anchor" href="#é”™è¯¯å¤„ç†" aria-label="Permalink to &quot;é”™è¯¯å¤„ç†&quot;">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> process </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;process&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ç»Ÿä¸€é”™è¯¯å¤„ç†</span></span>
<span class="line"><span style="color:#E1E4E8;">process.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;unhandledRejection&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">reason</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">promise</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;æœªå¤„ç†çš„Promiseæ‹’ç»:&#39;</span><span style="color:#E1E4E8;">, reason);</span></span>
<span class="line"><span style="color:#E1E4E8;">  process.</span><span style="color:#B392F0;">exit</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">process.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;uncaughtException&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">error</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;æœªæ•è·çš„å¼‚å¸¸:&#39;</span><span style="color:#E1E4E8;">, error);</span></span>
<span class="line"><span style="color:#E1E4E8;">  process.</span><span style="color:#B392F0;">exit</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä¼˜é›…é€€å‡º</span></span>
<span class="line"><span style="color:#E1E4E8;">process.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;SIGINT&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">æ¥æ”¶åˆ°ä¸­æ–­ä¿¡å·ï¼Œæ­£åœ¨é€€å‡º...&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  process.</span><span style="color:#B392F0;">exit</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h3 id="é…ç½®ç®¡ç†" tabindex="-1">é…ç½®ç®¡ç† <a class="header-anchor" href="#é…ç½®ç®¡ç†" aria-label="Permalink to &quot;é…ç½®ç®¡ç†&quot;">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { homedir } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;os&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { join } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;path&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> fs </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;fs&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> ConfigManager</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">appName</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.configDir </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> join</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">homedir</span><span style="color:#E1E4E8;">(), </span><span style="color:#9ECBFF;">\`.\${</span><span style="color:#E1E4E8;">appName</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.configFile </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> join</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.configDir, </span><span style="color:#9ECBFF;">&#39;config.json&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  async</span><span style="color:#B392F0;"> ensureConfigDir</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">    try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      await</span><span style="color:#E1E4E8;"> fs.promises.</span><span style="color:#B392F0;">access</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.configDir);</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      await</span><span style="color:#E1E4E8;"> fs.promises.</span><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.configDir, { recursive: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  async</span><span style="color:#B392F0;"> loadConfig</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">    try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      const</span><span style="color:#79B8FF;"> data</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> fs.promises.</span><span style="color:#B392F0;">readFile</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.configFile, </span><span style="color:#9ECBFF;">&#39;utf8&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">      return</span><span style="color:#79B8FF;"> JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(data);</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      return</span><span style="color:#E1E4E8;"> {};</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  async</span><span style="color:#B392F0;"> saveConfig</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">config</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">    await</span><span style="color:#79B8FF;"> this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">ensureConfigDir</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">    await</span><span style="color:#E1E4E8;"> fs.promises.</span><span style="color:#B392F0;">writeFile</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#79B8FF;">      this</span><span style="color:#E1E4E8;">.configFile, </span></span>
<span class="line"><span style="color:#79B8FF;">      JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(config, </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="æ€§èƒ½ä¼˜åŒ–" tabindex="-1">æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// ä½¿ç”¨æµå¤„ç†å¤§æ–‡ä»¶</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createReadStream, createWriteStream } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;fs&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { pipeline } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;stream/promises&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createGzip } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;zlib&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> compressFile</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">inputPath</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">outputPath</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  await</span><span style="color:#B392F0;"> pipeline</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#B392F0;">    createReadStream</span><span style="color:#E1E4E8;">(inputPath),</span></span>
<span class="line"><span style="color:#B392F0;">    createGzip</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"><span style="color:#B392F0;">    createWriteStream</span><span style="color:#E1E4E8;">(outputPath)</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// å¹¶è¡Œå¤„ç†</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { promises </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> fs } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;fs&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { cpus } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;os&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> processFilesParallel</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">files</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">processor</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> concurrency</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">min</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">cpus</span><span style="color:#E1E4E8;">().</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">, files.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> results</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> [];</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">; i </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> files.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">; i </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> concurrency) {</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> batch</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> files.</span><span style="color:#B392F0;">slice</span><span style="color:#E1E4E8;">(i, i </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> concurrency);</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> batchResults</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#79B8FF;"> Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">all</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      batch.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">file</span><span style="color:#F97583;"> =&gt;</span><span style="color:#B392F0;"> processor</span><span style="color:#E1E4E8;">(file))</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">    results.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">batchResults);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> results;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="å‘å¸ƒä¸åˆ†å‘" tabindex="-1">å‘å¸ƒä¸åˆ†å‘ <a class="header-anchor" href="#å‘å¸ƒä¸åˆ†å‘" aria-label="Permalink to &quot;å‘å¸ƒä¸åˆ†å‘&quot;">â€‹</a></h2><h3 id="package-json-é…ç½®" tabindex="-1">package.json é…ç½® <a class="header-anchor" href="#package-json-é…ç½®" aria-label="Permalink to &quot;package.json é…ç½®&quot;">â€‹</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;my-cli-tool&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;version&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;1.0.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;module&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;bin&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;my-cli&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;./bin/cli.js&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;files&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#9ECBFF;">    &quot;bin&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#9ECBFF;">    &quot;lib&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;engines&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;node&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&gt;=14.0.0&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="å®‰è£…æµ‹è¯•" tabindex="-1">å®‰è£…æµ‹è¯• <a class="header-anchor" href="#å®‰è£…æµ‹è¯•" aria-label="Permalink to &quot;å®‰è£…æµ‹è¯•&quot;">â€‹</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># å…¨å±€å®‰è£…æµ‹è¯•</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#9ECBFF;"> install</span><span style="color:#79B8FF;"> -g</span><span style="color:#9ECBFF;"> .</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># ä½¿ç”¨npxæµ‹è¯•</span></span>
<span class="line"><span style="color:#B392F0;">npx</span><span style="color:#9ECBFF;"> my-cli-tool</span><span style="color:#79B8FF;"> --help</span></span></code></pre></div>`,49)])])}const B=a(o,[["render",e]]);export{F as __pageData,B as default};

import{_ as a,c as n,o as l,b as p}from"./chunks/framework.CMLuPXeo.js";const y=JSON.parse('{"title":"umijs 路由","description":"","frontmatter":{},"headers":[{"level":2,"title":"什么是 UmiJS 路由","slug":"什么是-umijs-路由","link":"#什么是-umijs-路由","children":[]},{"level":2,"title":"路由的两种方式","slug":"路由的两种方式","link":"#路由的两种方式","children":[{"level":3,"title":"约定式路由","slug":"约定式路由","link":"#约定式路由","children":[]},{"level":3,"title":"配置式路由","slug":"配置式路由","link":"#配置式路由","children":[]}]},{"level":2,"title":"约定式路由详解","slug":"约定式路由详解","link":"#约定式路由详解","children":[{"level":3,"title":"动态路由","slug":"动态路由","link":"#动态路由","children":[]},{"level":3,"title":"可选动态路由","slug":"可选动态路由","link":"#可选动态路由","children":[]},{"level":3,"title":"嵌套路由","slug":"嵌套路由","link":"#嵌套路由","children":[]}]},{"level":2,"title":"配置式路由详解","slug":"配置式路由详解","link":"#配置式路由详解","children":[{"level":3,"title":"基本配置","slug":"基本配置","link":"#基本配置","children":[]},{"level":3,"title":"路由属性","slug":"路由属性","link":"#路由属性","children":[]}]},{"level":2,"title":"路由跳转","slug":"路由跳转","link":"#路由跳转","children":[{"level":3,"title":"声明式跳转","slug":"声明式跳转","link":"#声明式跳转","children":[]},{"level":3,"title":"命令式跳转","slug":"命令式跳转","link":"#命令式跳转","children":[]}]},{"level":2,"title":"布局系统","slug":"布局系统","link":"#布局系统","children":[{"level":3,"title":"全局布局","slug":"全局布局","link":"#全局布局","children":[]},{"level":3,"title":"局部布局","slug":"局部布局","link":"#局部布局","children":[]}]},{"level":2,"title":"路由进阶功能","slug":"路由进阶功能","link":"#路由进阶功能","children":[{"level":3,"title":"按需加载","slug":"按需加载","link":"#按需加载","children":[]},{"level":3,"title":"路由权限控制","slug":"路由权限控制","link":"#路由权限控制","children":[]},{"level":3,"title":"通过注释扩展路由","slug":"通过注释扩展路由","link":"#通过注释扩展路由","children":[]}]},{"level":2,"title":"最佳实践","slug":"最佳实践","link":"#最佳实践","children":[{"level":3,"title":"选择路由方式","slug":"选择路由方式","link":"#选择路由方式","children":[]},{"level":3,"title":"路由组织","slug":"路由组织","link":"#路由组织","children":[]},{"level":3,"title":"开发技巧","slug":"开发技巧","link":"#开发技巧","children":[]}]}],"relativePath":"framework/umijs/router.md","filePath":"framework/umijs/router.md"}'),o={name:"framework/umijs/router.md"};function e(t,s,c,r,i,E){return l(),n("div",null,[...s[0]||(s[0]=[p(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /framework/umijs/router.md for this page in Markdown format</div><h1 id="umijs-路由" tabindex="-1">umijs 路由 <a class="header-anchor" href="#umijs-路由" aria-label="Permalink to &quot;umijs 路由&quot;">​</a></h1><p>UmiJS 是一个可扩展的企业级前端应用框架，它以路由为基础，支持配置式路由和约定式路由，并以此进行功能扩展。UmiJS 的路由系统非常强大，提供了多种路由方式和进阶功能，让开发者能够灵活地处理各种路由需求。</p><h2 id="什么是-umijs-路由" tabindex="-1">什么是 UmiJS 路由 <a class="header-anchor" href="#什么是-umijs-路由" aria-label="Permalink to &quot;什么是 UmiJS 路由&quot;">​</a></h2><p>UmiJS 路由是 UmiJS 框架的核心功能之一，它以路由为基础，支持多种路由方式，并提供了丰富的路由功能。UmiJS 路由基于 React Router 6 实现，提供了完备的路由功能。</p><p><strong>主要特性：</strong></p><ul><li>同时支持配置式路由和约定式路由</li><li>支持动态路由、嵌套路由等进阶功能</li><li>支持路由级的按需加载</li><li>内置路由权限控制机制</li><li>完整的 TypeScript 支持</li></ul><h2 id="路由的两种方式" tabindex="-1">路由的两种方式 <a class="header-anchor" href="#路由的两种方式" aria-label="Permalink to &quot;路由的两种方式&quot;">​</a></h2><p>UmiJS 提供了两种路由方式：约定式路由和配置式路由。</p><h3 id="约定式路由" tabindex="-1">约定式路由 <a class="header-anchor" href="#约定式路由" aria-label="Permalink to &quot;约定式路由&quot;">​</a></h3><p>约定式路由是指 UmiJS 会根据 <code>src/pages</code> 目录的结构自动生成路由配置。这种方式无需手动配置路由，UmiJS 会自动扫描 <code>pages</code> 目录下的文件结构并生成对应的路由。</p><p><strong>基础路由示例：</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>pages/</span></span>
<span class="line"><span>  index.tsx        =&gt; 路由: /</span></span>
<span class="line"><span>  users/</span></span>
<span class="line"><span>    index.tsx      =&gt; 路由: /users</span></span>
<span class="line"><span>    list.tsx       =&gt; 路由: /users/list</span></span></code></pre></div><p>UmiJS 会自动生成以下路由配置：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">[</span></span>
<span class="line"><span style="color:#E1E4E8;">  { path: </span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/index.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  { path: </span><span style="color:#9ECBFF;">&quot;/users/&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/users/index.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  { path: </span><span style="color:#9ECBFF;">&quot;/users/list&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/users/list.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span></code></pre></div><h3 id="配置式路由" tabindex="-1">配置式路由 <a class="header-anchor" href="#配置式路由" aria-label="Permalink to &quot;配置式路由&quot;">​</a></h3><p>配置式路由需要在 <code>.umirc.ts</code> 或 <code>config/config.ts</code> 文件中通过 <code>routes</code> 配置项手动定义路由规则。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// .umirc.ts</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  routes: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    { exact: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">, path: </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&#39;@/pages/home&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">    { exact: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">, path: </span><span style="color:#9ECBFF;">&#39;/home&#39;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&#39;@/pages/about&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">    { exact: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">, path: </span><span style="color:#9ECBFF;">&#39;/about&#39;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&#39;@/pages/index&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><p>**注意：**一旦手动配置了 <code>routes</code>，约定式路由将自动失效。</p><h2 id="约定式路由详解" tabindex="-1">约定式路由详解 <a class="header-anchor" href="#约定式路由详解" aria-label="Permalink to &quot;约定式路由详解&quot;">​</a></h2><p>约定式路由是 UmiJS 的特色功能，它通过文件系统的结构来自动生成路由配置。</p><h3 id="动态路由" tabindex="-1">动态路由 <a class="header-anchor" href="#动态路由" aria-label="Permalink to &quot;动态路由&quot;">​</a></h3><p>UmiJS 约定，带 <code>$</code> 前缀的目录或文件为动态路由。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>pages/</span></span>
<span class="line"><span>  users/</span></span>
<span class="line"><span>    $id.tsx        =&gt; 路由: /users/:id</span></span>
<span class="line"><span>  $post/</span></span>
<span class="line"><span>    index.tsx      =&gt; 路由: /:post</span></span>
<span class="line"><span>    comments.tsx   =&gt; 路由: /:post/comments</span></span></code></pre></div><p>对应的路由配置为：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">[</span></span>
<span class="line"><span style="color:#E1E4E8;">  { path: </span><span style="color:#9ECBFF;">&quot;/users/:id&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/users/$id.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  { path: </span><span style="color:#9ECBFF;">&quot;/:post/&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/$post/index.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  { path: </span><span style="color:#9ECBFF;">&quot;/:post/comments&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/$post/comments.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span></code></pre></div><h3 id="可选动态路由" tabindex="-1">可选动态路由 <a class="header-anchor" href="#可选动态路由" aria-label="Permalink to &quot;可选动态路由&quot;">​</a></h3><p>UmiJS 约定带 <code>$</code> 后缀的动态路由为可选动态路由。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>pages/</span></span>
<span class="line"><span>  users/</span></span>
<span class="line"><span>    $id$.tsx       =&gt; 路由: /users/:id?</span></span>
<span class="line"><span>  index.tsx        =&gt; 路由: /</span></span></code></pre></div><p>对应的路由配置为：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">[</span></span>
<span class="line"><span style="color:#E1E4E8;">  { path: </span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/index.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  { path: </span><span style="color:#9ECBFF;">&quot;/users/:id?&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/users/$id$.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span></code></pre></div><h3 id="嵌套路由" tabindex="-1">嵌套路由 <a class="header-anchor" href="#嵌套路由" aria-label="Permalink to &quot;嵌套路由&quot;">​</a></h3><p>UmiJS 约定目录下有 <code>_layout.tsx</code> 时会生成嵌套路由，以 <code>_layout.tsx</code> 为该目录的布局组件。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>pages/</span></span>
<span class="line"><span>  users/</span></span>
<span class="line"><span>    _layout.tsx</span></span>
<span class="line"><span>    index.tsx</span></span>
<span class="line"><span>    $id.tsx</span></span></code></pre></div><p>对应的路由配置为：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">[</span></span>
<span class="line"><span style="color:#E1E4E8;">  { </span></span>
<span class="line"><span style="color:#E1E4E8;">    path: </span><span style="color:#9ECBFF;">&quot;/users&quot;</span><span style="color:#E1E4E8;">, </span></span>
<span class="line"><span style="color:#E1E4E8;">    component: </span><span style="color:#9ECBFF;">&quot;./pages/users/_layout.tsx&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    routes: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      { path: </span><span style="color:#9ECBFF;">&quot;/users/&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/users/index.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      { path: </span><span style="color:#9ECBFF;">&quot;/users/:id&quot;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&quot;./pages/users/$id.tsx&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span></code></pre></div><h2 id="配置式路由详解" tabindex="-1">配置式路由详解 <a class="header-anchor" href="#配置式路由详解" aria-label="Permalink to &quot;配置式路由详解&quot;">​</a></h2><p>配置式路由提供了更灵活的路由控制能力，适合复杂的路由需求。</p><h3 id="基本配置" tabindex="-1">基本配置 <a class="header-anchor" href="#基本配置" aria-label="Permalink to &quot;基本配置&quot;">​</a></h3><p>在 <code>.umirc.ts</code> 或 <code>config/config.ts</code> 文件中配置路由：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  routes: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    { exact: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">, path: </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&#39;@/pages/index&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">    { exact: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">, path: </span><span style="color:#9ECBFF;">&#39;/user&#39;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&#39;@/pages/user&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      path: </span><span style="color:#9ECBFF;">&#39;/admin&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      component: </span><span style="color:#9ECBFF;">&#39;@/layouts/admin&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      routes: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        { path: </span><span style="color:#9ECBFF;">&#39;/admin/user&#39;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&#39;@/pages/admin/user&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { path: </span><span style="color:#9ECBFF;">&#39;/admin/settings&#39;</span><span style="color:#E1E4E8;">, component: </span><span style="color:#9ECBFF;">&#39;@/pages/admin/settings&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><h3 id="路由属性" tabindex="-1">路由属性 <a class="header-anchor" href="#路由属性" aria-label="Permalink to &quot;路由属性&quot;">​</a></h3><p>配置式路由支持多种路由属性：</p><ul><li><code>path</code>：路由路径</li><li><code>component</code>：路由组件</li><li><code>exact</code>：是否精确匹配</li><li><code>routes</code>：子路由配置</li><li><code>redirect</code>：重定向路径</li><li><code>wrappers</code>：路由包装组件，可用于路由权限控制</li></ul><h2 id="路由跳转" tabindex="-1">路由跳转 <a class="header-anchor" href="#路由跳转" aria-label="Permalink to &quot;路由跳转&quot;">​</a></h2><p>UmiJS 提供了两种方式进行路由跳转：声明式和命令式。</p><h3 id="声明式跳转" tabindex="-1">声明式跳转 <a class="header-anchor" href="#声明式跳转" aria-label="Permalink to &quot;声明式跳转&quot;">​</a></h3><p>使用 <code>Link</code> 组件进行声明式路由跳转：</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Link } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;umi&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#B392F0;"> to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/users&quot;</span><span style="color:#E1E4E8;">&gt;Go to Users Page&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre></div><h3 id="命令式跳转" tabindex="-1">命令式跳转 <a class="header-anchor" href="#命令式跳转" aria-label="Permalink to &quot;命令式跳转&quot;">​</a></h3><p>使用 <code>history</code> 或 <code>router</code> 对象进行命令式路由跳转：</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { history } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;umi&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#B392F0;"> goToListPage</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    history.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/list&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{goToListPage}&gt;Go to List Page&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><h2 id="布局系统" tabindex="-1">布局系统 <a class="header-anchor" href="#布局系统" aria-label="Permalink to &quot;布局系统&quot;">​</a></h2><p>UmiJS 提供了强大的布局系统，包括全局布局和局部布局。</p><h3 id="全局布局" tabindex="-1">全局布局 <a class="header-anchor" href="#全局布局" aria-label="Permalink to &quot;全局布局&quot;">​</a></h3><p>在 <code>src/layouts/index.tsx</code> 中定义全局布局，该布局会自动应用于所有页面。</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// src/layouts/index.tsx</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> styles </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;./index.css&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> className</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{styles.header}&gt;头部&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> className</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{styles.main}&gt;{props.children}&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#B392F0;"> className</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{styles.footer}&gt;底部&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><p><strong>布局示意图：</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>+-----------------------+</span></span>
<span class="line"><span>|        头部           |</span></span>
<span class="line"><span>+-----------------------+</span></span>
<span class="line"><span>|                       |</span></span>
<span class="line"><span>|       props.children  |</span></span>
<span class="line"><span>|      (页面内容)       |</span></span>
<span class="line"><span>|                       |</span></span>
<span class="line"><span>+-----------------------+</span></span>
<span class="line"><span>|        底部           |</span></span>
<span class="line"><span>+-----------------------+</span></span></code></pre></div><h3 id="局部布局" tabindex="-1">局部布局 <a class="header-anchor" href="#局部布局" aria-label="Permalink to &quot;局部布局&quot;">​</a></h3><p>在页面目录中使用 <code>_layout.tsx</code> 文件定义局部布局，该布局会应用于当前目录及其子目录下的所有页面。</p><h2 id="路由进阶功能" tabindex="-1">路由进阶功能 <a class="header-anchor" href="#路由进阶功能" aria-label="Permalink to &quot;路由进阶功能&quot;">​</a></h2><h3 id="按需加载" tabindex="-1">按需加载 <a class="header-anchor" href="#按需加载" aria-label="Permalink to &quot;按需加载&quot;">​</a></h3><p>UmiJS 支持路由级别的按需加载，可以通过配置开启：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// .umirc.ts</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  dynamicImport: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    loading: </span><span style="color:#9ECBFF;">&#39;@/components/Loading&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><p>开启后，UmiJS 会自动将路由组件按需加载，提升应用性能。</p><h3 id="路由权限控制" tabindex="-1">路由权限控制 <a class="header-anchor" href="#路由权限控制" aria-label="Permalink to &quot;路由权限控制&quot;">​</a></h3><p>UmiJS 支持通过路由包装器实现路由权限控制：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// .umirc.ts</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  routes: [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      path: </span><span style="color:#9ECBFF;">&#39;/admin&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      component: </span><span style="color:#9ECBFF;">&#39;@/pages/admin&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      wrappers: [</span><span style="color:#9ECBFF;">&#39;@/wrappers/auth&#39;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><p>在 <code>@/wrappers/auth</code> 组件中可以实现权限校验逻辑：</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// src/wrappers/auth.tsx</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Redirect } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;umi&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">isLogin</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useAuth</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (isLogin) {</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;{ props.children }&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">Redirect</span><span style="color:#B392F0;"> to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/login&quot;</span><span style="color:#E1E4E8;"> /&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><h3 id="通过注释扩展路由" tabindex="-1">通过注释扩展路由 <a class="header-anchor" href="#通过注释扩展路由" aria-label="Permalink to &quot;通过注释扩展路由&quot;">​</a></h3><p>在约定式路由中，可以通过 YAML 注释扩展路由功能：</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * title: 用户页面</span></span>
<span class="line"><span style="color:#6A737D;"> * Routes:</span></span>
<span class="line"><span style="color:#6A737D;"> *   - ./src/routes/private.tsx</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;User Page&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre></div><p>这种方式可以在约定式路由的基础上，实现更灵活的路由配置。</p><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><h3 id="选择路由方式" tabindex="-1">选择路由方式 <a class="header-anchor" href="#选择路由方式" aria-label="Permalink to &quot;选择路由方式&quot;">​</a></h3><ul><li><strong>约定式路由</strong>：适合新项目、标准页面结构、快速开发</li><li><strong>配置式路由</strong>：适合复杂路由需求、需要精细控制路由的场景</li></ul><h3 id="路由组织" tabindex="-1">路由组织 <a class="header-anchor" href="#路由组织" aria-label="Permalink to &quot;路由组织&quot;">​</a></h3><ul><li>合理使用嵌套路由组织相关页面</li><li>使用动态路由处理相似结构的页面</li><li>通过布局系统保持页面一致性</li><li>使用按需加载优化性能</li></ul><h3 id="开发技巧" tabindex="-1">开发技巧 <a class="header-anchor" href="#开发技巧" aria-label="Permalink to &quot;开发技巧&quot;">​</a></h3><ul><li>充分利用 UmiJS 的路由约定减少配置</li><li>使用路由权限控制保护敏感页面</li><li>通过路由注释扩展约定式路由功能</li><li>合理拆分路由组件，保持代码可维护性</li></ul><p>UmiJS 的路由系统既强大又灵活，无论是简单的静态站点还是复杂的企业级应用，都能找到合适的路由方案。掌握 UmiJS 路由的使用，能够大大提高 React 应用的开发效率和质量。</p>`,83)])])}const u=a(o,[["render",e]]);export{y as __pageData,u as default};

import{_ as n,c as a,o as l,b as p}from"./chunks/framework.CMLuPXeo.js";const d=JSON.parse('{"title":"Electron 快速开始","description":"","frontmatter":{},"headers":[{"level":2,"title":"环境搭建与项目初始化","slug":"环境搭建与项目初始化","link":"#环境搭建与项目初始化","children":[{"level":3,"title":"环境准备","slug":"环境准备","link":"#环境准备","children":[]},{"level":3,"title":"初始化项目","slug":"初始化项目","link":"#初始化项目","children":[]},{"level":3,"title":"安装 Electron","slug":"安装-electron","link":"#安装-electron","children":[]}]},{"level":2,"title":"Electron 应用架构","slug":"electron-应用架构","link":"#electron-应用架构","children":[{"level":3,"title":"进程模型","slug":"进程模型","link":"#进程模型","children":[]},{"level":3,"title":"进程间通信 (IPC)","slug":"进程间通信-ipc","link":"#进程间通信-ipc","children":[]}]},{"level":2,"title":"创建第一个应用程序","slug":"创建第一个应用程序","link":"#创建第一个应用程序","children":[{"level":3,"title":"主进程脚本","slug":"主进程脚本","link":"#主进程脚本","children":[]},{"level":3,"title":"预加载脚本","slug":"预加载脚本","link":"#预加载脚本","children":[]},{"level":3,"title":"创建用户界面","slug":"创建用户界面","link":"#创建用户界面","children":[]},{"level":3,"title":"运行应用程序","slug":"运行应用程序","link":"#运行应用程序","children":[]}]},{"level":2,"title":"核心 API 详解","slug":"核心-api-详解","link":"#核心-api-详解","children":[{"level":3,"title":"BrowserWindow 选项","slug":"browserwindow-选项","link":"#browserwindow-选项","children":[]},{"level":3,"title":"进程间通信示例","slug":"进程间通信示例","link":"#进程间通信示例","children":[]}]},{"level":2,"title":"打包与分发","slug":"打包与分发","link":"#打包与分发","children":[{"level":3,"title":"使用 Electron Forge","slug":"使用-electron-forge","link":"#使用-electron-forge","children":[]},{"level":3,"title":"构建配置","slug":"构建配置","link":"#构建配置","children":[]}]},{"level":2,"title":"开发技巧与最佳实践","slug":"开发技巧与最佳实践","link":"#开发技巧与最佳实践","children":[{"level":3,"title":"开发环境调试","slug":"开发环境调试","link":"#开发环境调试","children":[]},{"level":3,"title":"安全性建议","slug":"安全性建议","link":"#安全性建议","children":[]},{"level":3,"title":"性能优化","slug":"性能优化","link":"#性能优化","children":[]}]}],"relativePath":"special/electron/start.md","filePath":"special/electron/start.md"}'),o={name:"special/electron/start.md"};function e(t,s,c,r,E,i){return l(),a("div",null,[...s[0]||(s[0]=[p(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /special/electron/start.md for this page in Markdown format</div><h1 id="electron-快速开始" tabindex="-1">Electron 快速开始 <a class="header-anchor" href="#electron-快速开始" aria-label="Permalink to &quot;Electron 快速开始&quot;">​</a></h1><p>Electron 是一个用于构建跨平台桌面应用程序的框架，它允许你使用 Web 技术 (如 JavaScript、HTML 和 CSS) 来开发应用。通过将 Chromium 和 Node.js 嵌入到一个二进制文件中，Electron 让你可以维护一个代码库，并创建能在 Windows、macOS 和 Linux 上运行的应用程序，而无需原生开发经验。</p><h2 id="环境搭建与项目初始化" tabindex="-1">环境搭建与项目初始化 <a class="header-anchor" href="#环境搭建与项目初始化" aria-label="Permalink to &quot;环境搭建与项目初始化&quot;">​</a></h2><h3 id="环境准备" tabindex="-1">环境准备 <a class="header-anchor" href="#环境准备" aria-label="Permalink to &quot;环境准备&quot;">​</a></h3><p>在开始之前，确保你的系统已安装 Node.js 和 npm。Electron 依赖于 Node.js 运行时环境，你可以从 Node.js 官网下载并安装最新版本。</p><p>避免使用 WSL</p><p>如果你在 Windows 机器上，请避免使用 Windows Subsystem for Linux (WSL) 来跟随本教程，因为在尝试执行应用程序时可能会遇到问题。</p><h3 id="初始化项目" tabindex="-1">初始化项目 <a class="header-anchor" href="#初始化项目" aria-label="Permalink to &quot;初始化项目&quot;">​</a></h3><p>首先创建一个新目录并初始化 npm 项目：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>mkdir my-electron-app &amp;&amp; cd my-electron-app</span></span>
<span class="line"><span>npm init</span></span></code></pre></div><p>初始化过程中，系统会提示你配置 package.json 中的一些字段。遵循以下规则：</p><ul><li>入口点应设置为 <code>main.js</code> (你稍后将创建此文件)</li><li>作者、许可证和描述可以是任意值，但对于后续的打包是必要的</li></ul><h3 id="安装-electron" tabindex="-1">安装 Electron <a class="header-anchor" href="#安装-electron" aria-label="Permalink to &quot;安装 Electron&quot;">​</a></h3><p>将 Electron 安装到项目的 devDependencies 中：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install electron --save-dev</span></span></code></pre></div><p>为什么 Electron 是开发依赖？</p><p>这可能看起来违反直觉，因为你的生产代码运行着 Electron API。在底层，Electron 的 JavaScript API 绑定到一个包含其实现的二进制文件。Electron 的打包步骤会处理此二进制的捆绑，因此无需将其指定为生产依赖。</p><p>安装完成后，你的 package.json 应该类似这样：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;my-electron-app&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;version&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;1.0.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;description&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Hello World!&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;main&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;main.js&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;scripts&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;start&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;electron .&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;test&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;echo </span><span style="color:#79B8FF;">\\&quot;</span><span style="color:#9ECBFF;">Error: no test specified</span><span style="color:#79B8FF;">\\&quot;</span><span style="color:#9ECBFF;"> &amp;&amp; exit 1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;author&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Jane Doe&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;license&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;MIT&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;devDependencies&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;electron&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;23.1.3&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><p>注意我们添加了一个 <code>start</code> 脚本，用于运行 Electron 应用程序。</p><h2 id="electron-应用架构" tabindex="-1">Electron 应用架构 <a class="header-anchor" href="#electron-应用架构" aria-label="Permalink to &quot;Electron 应用架构&quot;">​</a></h2><h3 id="进程模型" tabindex="-1">进程模型 <a class="header-anchor" href="#进程模型" aria-label="Permalink to &quot;进程模型&quot;">​</a></h3><p>Electron 应用采用多进程架构，主要包括两个部分：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>主进程 (Main Process)</span></span>
<span class="line"><span> |</span></span>
<span class="line"><span> +-- 创建和管理渲染器进程</span></span>
<span class="line"><span> +-- 控制应用生命周期 (app)</span></span>
<span class="line"><span> +-- 使用原生 GUI 相关 API</span></span>
<span class="line"><span> |</span></span>
<span class="line"><span> +-- 渲染器进程 (Renderer Process)</span></span>
<span class="line"><span>      |</span></span>
<span class="line"><span>      +-- 显示 Web 内容 (基于 Chromium)</span></span>
<span class="line"><span>      +-- 运行在独立的进程中</span></span>
<span class="line"><span>      +-- 可通过 Node.js 访问系统资源</span></span></code></pre></div><p><strong>主进程</strong>作为应用程序的入口点，控制应用的生命周期，并负责创建和管理渲染器进程。它在 Node.js 环境中运行，可以访问操作系统 API。</p><p><strong>渲染器进程</strong>负责显示用户界面。每个 Electron 窗口运行在自己的渲染器进程中，这些进程基本上是独立的 Chromium 浏览器实例。</p><h3 id="进程间通信-ipc" tabindex="-1">进程间通信 (IPC) <a class="header-anchor" href="#进程间通信-ipc" aria-label="Permalink to &quot;进程间通信 (IPC)&quot;">​</a></h3><p>主进程和渲染器进程通过进程间通信 (IPC) 机制进行通信：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>主进程 (ipcMain) &lt;---&gt; 渲染器进程 (ipcRenderer)</span></span></code></pre></div><p>Electron 提供了 <code>ipcMain</code> 和 <code>ipcRenderer</code> 模块，允许进程之间发送异步和同步消息。</p><h2 id="创建第一个应用程序" tabindex="-1">创建第一个应用程序 <a class="header-anchor" href="#创建第一个应用程序" aria-label="Permalink to &quot;创建第一个应用程序&quot;">​</a></h2><h3 id="主进程脚本" tabindex="-1">主进程脚本 <a class="header-anchor" href="#主进程脚本" aria-label="Permalink to &quot;主进程脚本&quot;">​</a></h3><p>创建 <code>main.js</code> 文件作为应用程序的入口点：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">app</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">BrowserWindow</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;electron&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> path</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;path&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> createWindow</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">  // 创建浏览器窗口</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> mainWindow</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> BrowserWindow</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    width: </span><span style="color:#79B8FF;">800</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    height: </span><span style="color:#79B8FF;">600</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    webPreferences: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      preload: path.</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(__dirname, </span><span style="color:#9ECBFF;">&#39;preload.js&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// 预加载脚本</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">  // 加载 index.html</span></span>
<span class="line"><span style="color:#E1E4E8;">  mainWindow.</span><span style="color:#B392F0;">loadFile</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;index.html&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 打开开发工具 (可选)</span></span>
<span class="line"><span style="color:#6A737D;">  // mainWindow.webContents.openDevTools();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 当 Electron 完成初始化并准备创建浏览器窗口时，调用此方法</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">whenReady</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  createWindow</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">  // 在 macOS 上，当单击 dock 图标并且没有其他窗口打开时，</span></span>
<span class="line"><span style="color:#6A737D;">  // 通常会在应用程序中重新创建一个窗口</span></span>
<span class="line"><span style="color:#E1E4E8;">  app.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;activate&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (BrowserWindow.</span><span style="color:#B392F0;">getAllWindows</span><span style="color:#E1E4E8;">().</span><span style="color:#79B8FF;">length</span><span style="color:#F97583;"> ===</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">) </span><span style="color:#B392F0;">createWindow</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 当所有窗口都关闭时退出应用程序，macOS 除外</span></span>
<span class="line"><span style="color:#E1E4E8;">app.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;window-all-closed&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (process.platform </span><span style="color:#F97583;">!==</span><span style="color:#9ECBFF;"> &#39;darwin&#39;</span><span style="color:#E1E4E8;">) app.</span><span style="color:#B392F0;">quit</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h3 id="预加载脚本" tabindex="-1">预加载脚本 <a class="header-anchor" href="#预加载脚本" aria-label="Permalink to &quot;预加载脚本&quot;">​</a></h3><p>创建 <code>preload.js</code> 文件，用于安全地在渲染器进程和主进程之间暴露 API：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">contextBridge</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">ipcRenderer</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;electron&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 通过 contextBridge 将受保护的 API 暴露给渲染器进程</span></span>
<span class="line"><span style="color:#E1E4E8;">contextBridge.</span><span style="color:#B392F0;">exposeInMainWorld</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;electronAPI&#39;</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#6A737D;">  // 这里可以暴露一些安全的 Node.js API 或自定义功能</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h3 id="创建用户界面" tabindex="-1">创建用户界面 <a class="header-anchor" href="#创建用户界面" aria-label="Permalink to &quot;创建用户界面&quot;">​</a></h3><p>创建 <code>index.html</code> 文件作为应用程序的用户界面：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;!</span><span style="color:#85E89D;">DOCTYPE</span><span style="color:#B392F0;"> html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">head</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">meta</span><span style="color:#B392F0;"> charset</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;UTF-8&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">title</span><span style="color:#E1E4E8;">&gt;Hello Electron!&lt;/</span><span style="color:#85E89D;">title</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">meta</span><span style="color:#B392F0;"> http-equiv</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;Content-Security-Policy&quot;</span><span style="color:#B392F0;"> content</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;script-src &#39;self&#39; &#39;unsafe-inline&#39;;&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">head</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">h1</span><span style="color:#E1E4E8;">&gt;Hello Electron!&lt;/</span><span style="color:#85E89D;">h1</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        我们正在使用 Node.js &lt;</span><span style="color:#85E89D;">span</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;node-version&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        Chromium &lt;</span><span style="color:#85E89D;">span</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;chrome-version&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        和 Electron &lt;</span><span style="color:#85E89D;">span</span><span style="color:#B392F0;"> id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;electron-version&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;.</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#6A737D;">        // 显示版本信息</span></span>
<span class="line"><span style="color:#E1E4E8;">        window.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;DOMContentLoaded&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">            const</span><span style="color:#B392F0;"> replaceText</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">selector</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">text</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">                const</span><span style="color:#79B8FF;"> element</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(selector)</span></span>
<span class="line"><span style="color:#F97583;">                if</span><span style="color:#E1E4E8;"> (element) element.innerText </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> text</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">            for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> type</span><span style="color:#F97583;"> of</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&#39;chrome&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;node&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;electron&#39;</span><span style="color:#E1E4E8;">]) {</span></span>
<span class="line"><span style="color:#B392F0;">                replaceText</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`\${</span><span style="color:#E1E4E8;">type</span><span style="color:#9ECBFF;">}-version\`</span><span style="color:#E1E4E8;">, process.versions[type])</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="运行应用程序" tabindex="-1">运行应用程序 <a class="header-anchor" href="#运行应用程序" aria-label="Permalink to &quot;运行应用程序&quot;">​</a></h3><p>现在你可以运行你的第一个 Electron 应用程序：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>npm start</span></span></code></pre></div><p>这将启动 Electron 并显示一个包含“Hello Electron！”的窗口。</p><h2 id="核心-api-详解" tabindex="-1">核心 API 详解 <a class="header-anchor" href="#核心-api-详解" aria-label="Permalink to &quot;核心 API 详解&quot;">​</a></h2><h3 id="browserwindow-选项" tabindex="-1">BrowserWindow 选项 <a class="header-anchor" href="#browserwindow-选项" aria-label="Permalink to &quot;BrowserWindow 选项&quot;">​</a></h3><p>BrowserWindow 是 Electron 中最核心的模块之一，用于创建和控制浏览器窗口。常用配置选项包括：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> win</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> BrowserWindow</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  width: </span><span style="color:#79B8FF;">800</span><span style="color:#E1E4E8;">,           </span><span style="color:#6A737D;">// 窗口宽度</span></span>
<span class="line"><span style="color:#E1E4E8;">  height: </span><span style="color:#79B8FF;">600</span><span style="color:#E1E4E8;">,          </span><span style="color:#6A737D;">// 窗口高度</span></span>
<span class="line"><span style="color:#E1E4E8;">  minWidth: </span><span style="color:#79B8FF;">400</span><span style="color:#E1E4E8;">,        </span><span style="color:#6A737D;">// 最小宽度</span></span>
<span class="line"><span style="color:#E1E4E8;">  minHeight: </span><span style="color:#79B8FF;">300</span><span style="color:#E1E4E8;">,       </span><span style="color:#6A737D;">// 最小高度</span></span>
<span class="line"><span style="color:#E1E4E8;">  show: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,          </span><span style="color:#6A737D;">// 初始不显示，等准备好后再显示</span></span>
<span class="line"><span style="color:#E1E4E8;">  webPreferences: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    nodeIntegration: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,     </span><span style="color:#6A737D;">// 不建议启用，安全性考虑</span></span>
<span class="line"><span style="color:#E1E4E8;">    contextIsolation: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,     </span><span style="color:#6A737D;">// 推荐启用，安全性考虑</span></span>
<span class="line"><span style="color:#E1E4E8;">    preload: path.</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(__dirname, </span><span style="color:#9ECBFF;">&#39;preload.js&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#6A737D;">// 预加载脚本</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 窗口准备好后显示，避免视觉闪烁</span></span>
<span class="line"><span style="color:#E1E4E8;">win.</span><span style="color:#B392F0;">once</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ready-to-show&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  win.</span><span style="color:#B392F0;">show</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h3 id="进程间通信示例" tabindex="-1">进程间通信示例 <a class="header-anchor" href="#进程间通信示例" aria-label="Permalink to &quot;进程间通信示例&quot;">​</a></h3><p>以下是主进程与渲染器进程之间通信的完整示例：</p><p><strong>主进程 (main.js) 中添加：</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">app</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">BrowserWindow</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">ipcMain</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;electron&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 处理来自渲染器进程的异步消息</span></span>
<span class="line"><span style="color:#E1E4E8;">ipcMain.</span><span style="color:#B392F0;">handle</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;perform-action&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">event</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;收到来自渲染器的数据:&#39;</span><span style="color:#E1E4E8;">, data);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 执行一些操作，可能是文件系统操作或其他原生功能</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> result</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> someAsyncOperation</span><span style="color:#E1E4E8;">(data);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 返回结果给渲染器</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> { success: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">, result };</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><p><strong>预加载脚本 (preload.js) 中暴露 API：</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">contextBridge</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">ipcRenderer</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;electron&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">contextBridge.</span><span style="color:#B392F0;">exposeInMainWorld</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;electronAPI&#39;</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#B392F0;">  performAction</span><span style="color:#E1E4E8;">: (</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ipcRenderer.</span><span style="color:#B392F0;">invoke</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;perform-action&#39;</span><span style="color:#E1E4E8;">, data)</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><p><strong>渲染器进程 (在 HTML 的 script 标签中) 调用：</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// 在渲染器进程中调用暴露的 API</span></span>
<span class="line"><span style="color:#E1E4E8;">window.electronAPI.</span><span style="color:#B392F0;">performAction</span><span style="color:#E1E4E8;">({ message: </span><span style="color:#9ECBFF;">&#39;Hello from renderer&#39;</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"><span style="color:#E1E4E8;">  .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">response</span><span style="color:#F97583;"> =&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;收到主进程的响应:&#39;</span><span style="color:#E1E4E8;">, response);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span></code></pre></div><h2 id="打包与分发" tabindex="-1">打包与分发 <a class="header-anchor" href="#打包与分发" aria-label="Permalink to &quot;打包与分发&quot;">​</a></h2><h3 id="使用-electron-forge" tabindex="-1">使用 Electron Forge <a class="header-anchor" href="#使用-electron-forge" aria-label="Permalink to &quot;使用 Electron Forge&quot;">​</a></h3><p>Electron Forge 是一个完整的工具，用于打包和分发 Electron 应用程序。</p><p>首先安装 Electron Forge：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install --save-dev @electron-forge/cli</span></span>
<span class="line"><span>npx electron-forge import</span></span></code></pre></div><p>然后使用以下命令打包应用程序：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>npm run make</span></span></code></pre></div><p>这将为当前平台生成可分发的应用程序包。</p><h3 id="构建配置" tabindex="-1">构建配置 <a class="header-anchor" href="#构建配置" aria-label="Permalink to &quot;构建配置&quot;">​</a></h3><p>你可以在 <code>package.json</code> 或 <code>forge.config.js</code> 中配置构建选项：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;my-electron-app&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;version&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;1.0.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;config&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;forge&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">      &quot;packagerConfig&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">        &quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;MyElectronApp&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">        &quot;executableName&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;my-electron-app&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">        &quot;icon&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;./assets/icon&quot;</span><span style="color:#6A737D;"> // 不同平台需要不同格式的图标</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#79B8FF;">      &quot;makers&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#79B8FF;">          &quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;@electron-forge/maker-squirrel&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">          &quot;config&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">            &quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;my_electron_app&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#79B8FF;">          &quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;@electron-forge/maker-zip&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">          &quot;platforms&quot;</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;darwin&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#79B8FF;">          &quot;name&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;@electron-forge/maker-deb&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">          &quot;config&quot;</span><span style="color:#E1E4E8;">: {}</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="开发技巧与最佳实践" tabindex="-1">开发技巧与最佳实践 <a class="header-anchor" href="#开发技巧与最佳实践" aria-label="Permalink to &quot;开发技巧与最佳实践&quot;">​</a></h2><h3 id="开发环境调试" tabindex="-1">开发环境调试 <a class="header-anchor" href="#开发环境调试" aria-label="Permalink to &quot;开发环境调试&quot;">​</a></h3><ul><li><strong>渲染器进程调试</strong>：使用 <code>mainWindow.webContents.openDevTools()</code> 或在窗口打开后按 F12</li><li><strong>主进程调试</strong>：使用 <code>--inspect</code> 或 <code>--inspect-brk</code> 参数启动 Electron，然后在 Chrome 中访问 <code>chrome://inspect</code></li></ul><h3 id="安全性建议" tabindex="-1">安全性建议 <a class="header-anchor" href="#安全性建议" aria-label="Permalink to &quot;安全性建议&quot;">​</a></h3><ol><li><strong>禁用 Node.js 集成</strong>：在不必要的渲染器中设置 <code>nodeIntegration: false</code></li><li><strong>启用上下文隔离</strong>：设置 <code>contextIsolation: true</code></li><li><strong>使用预加载脚本</strong>：安全地暴露必要的 API 给渲染器</li><li><strong>实施 CSP</strong>：在 HTML 中添加内容安全策略元标签</li></ol><h3 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-label="Permalink to &quot;性能优化&quot;">​</a></h3><ul><li>使用多个窗口时，合理管理窗口生命周期</li><li>对于重型任务，考虑在单独的 Node.js 子进程中执行</li><li>使用 <code>webFrame</code> API 优化渲染性能</li><li>合理使用懒加载和代码分割技术</li></ul>`,75)])])}const F=n(o,[["render",e]]);export{d as __pageData,F as default};

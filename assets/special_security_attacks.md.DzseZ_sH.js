import{_ as a,c as e,o as n,b as l}from"./chunks/framework.CMLuPXeo.js";const g=JSON.parse('{"title":"常见 Web 攻击与防护","description":"","frontmatter":{},"headers":[{"level":2,"title":"Web 安全威胁概述","slug":"web-security-threats-overview","link":"#web-security-threats-overview","children":[]},{"level":2,"title":"注入攻击","slug":"injection-attacks","link":"#injection-attacks","children":[{"level":3,"title":"SQL 注入","slug":"sql-注入","link":"#sql-注入","children":[]},{"level":3,"title":"命令注入","slug":"命令注入","link":"#命令注入","children":[]}]},{"level":2,"title":"跨站脚本攻击","slug":"cross-site-scripting","link":"#cross-site-scripting","children":[{"level":3,"title":"反射型 XSS","slug":"反射型-xss","link":"#反射型-xss","children":[]},{"level":3,"title":"存储型 XSS","slug":"存储型-xss","link":"#存储型-xss","children":[]},{"level":3,"title":"DOM 型 XSS","slug":"dom-型-xss","link":"#dom-型-xss","children":[]}]},{"level":2,"title":"跨站请求伪造","slug":"cross-site-request-forgery","link":"#cross-site-request-forgery","children":[]},{"level":2,"title":"文件上传漏洞","slug":"file-upload-vulnerabilities","link":"#file-upload-vulnerabilities","children":[]},{"level":2,"title":"访问控制漏洞","slug":"access-control-vulnerabilities","link":"#access-control-vulnerabilities","children":[{"level":3,"title":"水平越权","slug":"水平越权","link":"#水平越权","children":[]},{"level":3,"title":"垂直越权","slug":"垂直越权","link":"#垂直越权","children":[]}]},{"level":2,"title":"安全配置错误","slug":"security-misconfiguration","link":"#security-misconfiguration","children":[]},{"level":2,"title":"敏感数据泄露","slug":"sensitive-data-exposure","link":"#sensitive-data-exposure","children":[]},{"level":2,"title":"服务器端请求伪造","slug":"server-side-request-forgery","link":"#server-side-request-forgery","children":[]},{"level":2,"title":"API 安全威胁","slug":"api-security-threats","link":"#api-security-threats","children":[]},{"level":2,"title":"防护体系架构","slug":"protection-system-architecture","link":"#protection-system-architecture","children":[]}],"relativePath":"special/security/attacks.md","filePath":"special/security/attacks.md"}'),i={name:"special/security/attacks.md"};function t(p,s,r,o,c,d){return n(),e("div",null,[...s[0]||(s[0]=[l(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /special/security/attacks.md for this page in Markdown format</div><h1 id="常见-web-攻击与防护" tabindex="-1">常见 Web 攻击与防护 <a class="header-anchor" href="#常见-web-攻击与防护" aria-label="Permalink to &quot;常见 Web 攻击与防护&quot;">​</a></h1><h2 id="web-security-threats-overview" tabindex="-1">Web 安全威胁概述 <a class="header-anchor" href="#web-security-threats-overview" aria-label="Permalink to &quot;Web 安全威胁概述 {#web-security-threats-overview}&quot;">​</a></h2><p>Web 应用程序面临着多样化的安全威胁，攻击者利用各种技术手段突破系统防线。这些威胁从简单的数据窃取到复杂的系统控制，呈现出不同的攻击特征和危害程度。</p><p>攻击路径示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>攻击者 -&gt; 网络层(嗅探) -&gt; 应用层(注入) -&gt; 数据层(窃取) -&gt; 系统层(控制)</span></span>
<span class="line"><span>防护措施: HTTPS/WAF -&gt; 输入验证/认证 -&gt; 加密/权限 -&gt; 监控/补丁</span></span></code></pre></div><h2 id="injection-attacks" tabindex="-1">注入攻击 <a class="header-anchor" href="#injection-attacks" aria-label="Permalink to &quot;注入攻击 {#injection-attacks}&quot;">​</a></h2><h3 id="sql-注入" tabindex="-1">SQL 注入 <a class="header-anchor" href="#sql-注入" aria-label="Permalink to &quot;SQL 注入&quot;">​</a></h3><p><strong>攻击原理</strong>：通过用户输入插入恶意 SQL 代码，操纵数据库查询逻辑。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>正常查询: SELECT * FROM users WHERE user=&#39;admin&#39; AND pass=&#39;123&#39;</span></span>
<span class="line"><span>注入输入: admin&#39; OR &#39;1&#39;=&#39;1</span></span>
<span class="line"><span>最终查询: SELECT * FROM users WHERE user=&#39;admin&#39; OR &#39;1&#39;=&#39;1&#39; AND pass=&#39;xxx&#39;</span></span>
<span class="line"><span>查询结果: 返回所有用户记录，绕过身份验证</span></span></code></pre></div><p><strong>高级变种</strong>：</p><ul><li>联合查询注入：<code>&#39; UNION SELECT username, password FROM users--</code></li><li>布尔盲注：<code>&#39; AND (SELECT SUBSTRING(password,1,1) FROM users)=&#39;a&#39;--</code></li><li>时间盲注：<code>&#39; AND IF(1=1,SLEEP(5),0)--</code></li></ul><p><strong>防护措施</strong>：</p><ul><li>参数化查询：使用 PreparedStatement</li><li>存储过程：封装数据库逻辑</li><li>ORM 框架：MyBatis、Hibernate</li><li>输入验证：白名单过滤</li><li>最小权限：数据库账户降权</li></ul><h3 id="命令注入" tabindex="-1">命令注入 <a class="header-anchor" href="#命令注入" aria-label="Permalink to &quot;命令注入&quot;">​</a></h3><p><strong>攻击原理</strong>：通过系统调用执行恶意操作系统命令。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>正常功能: system(&quot;ping &quot; + userInput)</span></span>
<span class="line"><span>恶意输入: 127.0.0.1; cat /etc/passwd</span></span>
<span class="line"><span>最终命令: ping 127.0.0.1; cat /etc/passwd</span></span>
<span class="line"><span>执行结果: 同时执行两条命令，泄露敏感文件</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>输入验证：严格白名单</li><li>命令转义：properly escape shell metacharacters</li><li>沙箱环境：限制执行权限</li><li>API 替代：使用安全库函数</li></ul><h2 id="cross-site-scripting" tabindex="-1">跨站脚本攻击 <a class="header-anchor" href="#cross-site-scripting" aria-label="Permalink to &quot;跨站脚本攻击 {#cross-site-scripting}&quot;">​</a></h2><h3 id="反射型-xss" tabindex="-1">反射型 XSS <a class="header-anchor" href="#反射型-xss" aria-label="Permalink to &quot;反射型 XSS&quot;">​</a></h3><p><strong>攻击原理</strong>：恶意脚本通过 URL 参数注入，服务器直接返回给浏览器执行。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>恶意URL: http://site.com/search?q=&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;</span></span>
<span class="line"><span>服务器响应: &lt;html&gt;搜索结果: &lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;&lt;/html&gt;</span></span>
<span class="line"><span>浏览器执行: 弹出警告框，脚本在受害者浏览器中运行</span></span></code></pre></div><h3 id="存储型-xss" tabindex="-1">存储型 XSS <a class="header-anchor" href="#存储型-xss" aria-label="Permalink to &quot;存储型 XSS&quot;">​</a></h3><p><strong>攻击原理</strong>：恶意脚本存储到服务器数据库，影响所有访问用户。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>攻击者提交: &lt;script&gt;stealCookie()&lt;/script&gt; -&gt; 存储到数据库</span></span>
<span class="line"><span>其他用户访问: 加载包含恶意脚本的页面 -&gt; 执行stealCookie()</span></span>
<span class="line"><span>结果: 会话cookie被窃取，账户被盗</span></span></code></pre></div><h3 id="dom-型-xss" tabindex="-1">DOM 型 XSS <a class="header-anchor" href="#dom-型-xss" aria-label="Permalink to &quot;DOM 型 XSS&quot;">​</a></h3><p><strong>攻击原理</strong>：客户端 JavaScript 处理数据时产生漏洞，不涉及服务器交互。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>漏洞代码: document.write(&#39;&lt;img src=&quot;&#39; + userInput + &#39;&quot;&gt;&#39;)</span></span>
<span class="line"><span>恶意输入: &quot; onerror=&quot;alert(&#39;XSS&#39;)</span></span>
<span class="line"><span>最终HTML: &lt;img src=&quot;&quot; onerror=&quot;alert(&#39;XSS&#39;)&quot;&gt;</span></span>
<span class="line"><span>执行结果: 图片加载失败触发onerror事件</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>输出编码：HTML 实体编码 <code>&lt; → &amp;lt;</code></li><li>CSP 策略：Content-Security-Policy 头</li><li>输入验证：过滤特殊字符</li><li>HttpOnly Cookie：防止 cookie 窃取</li></ul><h2 id="cross-site-request-forgery" tabindex="-1">跨站请求伪造 <a class="header-anchor" href="#cross-site-request-forgery" aria-label="Permalink to &quot;跨站请求伪造 {#cross-site-request-forgery}&quot;">​</a></h2><p><strong>攻击原理</strong>：利用用户已登录状态，诱导其执行非预期操作。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>用户登录银行网站 -&gt; 会话有效</span></span>
<span class="line"><span>攻击者发送恶意链接: &lt;img src=&quot;http://bank.com/transfer?to=hacker&amp;amount=1000&quot;&gt;</span></span>
<span class="line"><span>用户访问恶意页面 -&gt; 浏览器自动发送转账请求</span></span>
<span class="line"><span>服务器验证会话 -&gt; 执行转账操作</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>CSRF Token：随机令牌验证</li><li>同源检测：Referer 头验证</li><li>双重验证：关键操作需重新认证</li><li>SameSite Cookie：限制第三方 Cookie</li></ul><h2 id="file-upload-vulnerabilities" tabindex="-1">文件上传漏洞 <a class="header-anchor" href="#file-upload-vulnerabilities" aria-label="Permalink to &quot;文件上传漏洞 {#file-upload-vulnerabilities}&quot;">​</a></h2><p><strong>攻击原理</strong>：通过上传恶意文件获取服务器控制权。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>攻击者上传: shell.php &lt;?php system($_GET[&#39;cmd&#39;]); ?&gt;</span></span>
<span class="line"><span>服务器存储: /uploads/shell.php</span></span>
<span class="line"><span>攻击者访问: http://site.com/uploads/shell.php?cmd=whoami</span></span>
<span class="line"><span>执行结果: 服务器执行系统命令，返回当前用户</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>文件类型验证：MIME 类型检测 + 扩展名白名单</li><li>内容检查：文件头验证 + 病毒扫描</li><li>重命名存储：随机文件名 + 非 Web 目录</li><li>权限控制：上传目录无执行权限</li></ul><h2 id="access-control-vulnerabilities" tabindex="-1">访问控制漏洞 <a class="header-anchor" href="#access-control-vulnerabilities" aria-label="Permalink to &quot;访问控制漏洞 {#access-control-vulnerabilities}&quot;">​</a></h2><h3 id="水平越权" tabindex="-1">水平越权 <a class="header-anchor" href="#水平越权" aria-label="Permalink to &quot;水平越权&quot;">​</a></h3><p><strong>攻击原理</strong>：访问其他用户的相同权限资源。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>用户A访问: /profile?id=123 (自己的资料)</span></span>
<span class="line"><span>修改ID参数: /profile?id=124 (他人资料)</span></span>
<span class="line"><span>系统未验证 -&gt; 返回用户B的敏感信息</span></span></code></pre></div><h3 id="垂直越权" tabindex="-1">垂直越权 <a class="header-anchor" href="#垂直越权" aria-label="Permalink to &quot;垂直越权&quot;">​</a></h3><p><strong>攻击原理</strong>：普通用户获取管理员权限功能。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>普通用户 -&gt; 隐藏管理员功能 -&gt; 直接访问/admin/dashboard</span></span>
<span class="line"><span>系统未检查角色权限 -&gt; 显示管理员面板</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>权限验证：每次请求检查访问权限</li><li>会话管理：安全会话超时</li><li>角色分离：最小权限原则</li><li>日志审计：记录敏感操作</li></ul><h2 id="security-misconfiguration" tabindex="-1">安全配置错误 <a class="header-anchor" href="#security-misconfiguration" aria-label="Permalink to &quot;安全配置错误 {#security-misconfiguration}&quot;">​</a></h2><p><strong>常见问题</strong>：</p><ul><li>默认账户密码未修改</li><li>错误信息泄露敏感数据</li><li>不必要的服务端口开放</li><li>过时的软件版本</li></ul><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>扫描发现: 服务器开放22,80,443,8080端口</span></span>
<span class="line"><span>8080端口: 管理控制台，默认密码admin/admin</span></span>
<span class="line"><span>登录成功: 获取系统控制权限</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>安全加固：关闭不必要服务</li><li>最小权限：服务账户降权</li><li>定期更新：安全补丁管理</li><li>自动化扫描：配置检查工具</li></ul><h2 id="sensitive-data-exposure" tabindex="-1">敏感数据泄露 <a class="header-anchor" href="#sensitive-data-exposure" aria-label="Permalink to &quot;敏感数据泄露 {#sensitive-data-exposure}&quot;">​</a></h2><p><strong>泄露途径</strong>：</p><ul><li>传输未加密：HTTP 明文传输</li><li>存储未加密：数据库明文存储</li><li>弱加密算法：MD5、DES 等</li><li>密钥硬编码：代码中暴露密钥</li></ul><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>网络嗅探: 拦截HTTP请求 -&gt; 获取明文密码</span></span>
<span class="line"><span>数据库泄露: 用户表密码未哈希 -&gt; 直接获取所有密码</span></span>
<span class="line"><span>代码仓库: 发现API密钥硬编码 -&gt; 滥用云服务资源</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>传输加密：全站 HTTPS</li><li>存储加密：强哈希算法 (bcrypt、Argon2)</li><li>密钥管理：专用密钥管理服务</li><li>数据脱敏：日志中屏蔽敏感信息</li></ul><h2 id="server-side-request-forgery" tabindex="-1">服务器端请求伪造 <a class="header-anchor" href="#server-side-request-forgery" aria-label="Permalink to &quot;服务器端请求伪造 {#server-side-request-forgery}&quot;">​</a></h2><p><strong>攻击原理</strong>：利用服务器作为代理访问内部资源。</p><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>漏洞URL: http://site.com/proxy?url=user_input</span></span>
<span class="line"><span>恶意输入: http://192.168.1.1/admin</span></span>
<span class="line"><span>服务器访问: 内网管理界面 -&gt; 返回给攻击者</span></span>
<span class="line"><span>结果: 攻击者通过外网服务器访问内网资源</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>URL 白名单：只允许访问可信域名</li><li>网络隔离：关键系统禁止外网访问</li><li>协议限制：禁止 file://、gopher://等协议</li><li>身份验证：内部服务也需要认证</li></ul><h2 id="api-security-threats" tabindex="-1">API 安全威胁 <a class="header-anchor" href="#api-security-threats" aria-label="Permalink to &quot;API 安全威胁 {#api-security-threats}&quot;">​</a></h2><p><strong>常见问题</strong>：</p><ul><li>未授权 API 访问</li><li>批量分配漏洞</li><li>速率限制缺失</li><li>敏感信息过度返回</li></ul><p>攻击示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>发现API端点: /api/v1/users/ 无需认证</span></span>
<span class="line"><span>批量请求: POST /api/v1/users {“role”:”admin”}</span></span>
<span class="line"><span>系统接受参数 -&gt; 创建管理员账户</span></span></code></pre></div><p><strong>防护措施</strong>：</p><ul><li>API 认证：JWT、OAuth 2.0</li><li>输入验证：严格参数检查</li><li>速率限制：防暴力破解</li><li>数据过滤：只返回必要字段</li></ul><h2 id="protection-system-architecture" tabindex="-1">防护体系架构 <a class="header-anchor" href="#protection-system-architecture" aria-label="Permalink to &quot;防护体系架构 {#protection-system-architecture}&quot;">​</a></h2><p><strong>纵深防御策略</strong>：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>网络层: WAF + DDoS防护 + 网络隔离</span></span>
<span class="line"><span>应用层: 输入验证 + 输出编码 + 访问控制</span></span>
<span class="line"><span>数据层: 参数化查询 + 加密存储 + 备份恢复</span></span>
<span class="line"><span>监控层: 安全日志 + 实时告警 + 行为分析</span></span></code></pre></div><p><strong>安全开发生命周期</strong>：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>需求阶段: 威胁建模 + 安全需求</span></span>
<span class="line"><span>设计阶段: 安全架构 + 设计审查</span></span>
<span class="line"><span>开发阶段: 安全编码 + 代码审查</span></span>
<span class="line"><span>测试阶段: 渗透测试 + 漏洞扫描</span></span>
<span class="line"><span>运维阶段: 安全监控 + 应急响应</span></span></code></pre></div>`,91)])])}const h=a(i,[["render",t]]);export{g as __pageData,h as default};

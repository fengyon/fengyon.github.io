import{_ as n,c as a,o as l,b as p}from"./chunks/framework.CMLuPXeo.js";const F=JSON.parse('{"title":"node 常用模块","description":"","frontmatter":{},"headers":[{"level":2,"title":"文件系统模块","slug":"文件系统模块","link":"#文件系统模块","children":[{"level":3,"title":"fs 基础操作","slug":"fs-基础操作","link":"#fs-基础操作","children":[]},{"level":3,"title":"流式文件处理","slug":"流式文件处理","link":"#流式文件处理","children":[]}]},{"level":2,"title":"路径处理模块","slug":"路径处理模块","link":"#路径处理模块","children":[{"level":3,"title":"path 常用方法","slug":"path-常用方法","link":"#path-常用方法","children":[]},{"level":3,"title":"路径标准化和解析","slug":"路径标准化和解析","link":"#路径标准化和解析","children":[]}]},{"level":2,"title":"HTTP 网络模块","slug":"http-网络模块","link":"#http-网络模块","children":[{"level":3,"title":"创建 HTTP 服务器","slug":"创建-http-服务器","link":"#创建-http-服务器","children":[]},{"level":3,"title":"发起 HTTP 请求","slug":"发起-http-请求","link":"#发起-http-请求","children":[]}]},{"level":2,"title":"实用工具模块","slug":"实用工具模块","link":"#实用工具模块","children":[{"level":3,"title":"util 工具函数","slug":"util-工具函数","link":"#util-工具函数","children":[]},{"level":3,"title":"类型检查工具","slug":"类型检查工具","link":"#类型检查工具","children":[]}]},{"level":2,"title":"子进程模块","slug":"子进程模块","link":"#子进程模块","children":[{"level":3,"title":"创建和管理子进程","slug":"创建和管理子进程","link":"#创建和管理子进程","children":[]},{"level":3,"title":"进程间通信","slug":"进程间通信","link":"#进程间通信","children":[]}]},{"level":2,"title":"第三方实用模块","slug":"第三方实用模块","link":"#第三方实用模块","children":[{"level":3,"title":"Axios HTTP 客户端","slug":"axios-http-客户端","link":"#axios-http-客户端","children":[]},{"level":3,"title":"Dotenv 环境变量管理","slug":"dotenv-环境变量管理","link":"#dotenv-环境变量管理","children":[]},{"level":3,"title":"日期处理库 date-fns","slug":"日期处理库-date-fns","link":"#日期处理库-date-fns","children":[]},{"level":3,"title":"调试工具 Debug","slug":"调试工具-debug","link":"#调试工具-debug","children":[]}]},{"level":2,"title":"压缩与加密模块","slug":"压缩与加密模块","link":"#压缩与加密模块","children":[{"level":3,"title":"Zlib 压缩解压","slug":"zlib-压缩解压","link":"#zlib-压缩解压","children":[]},{"level":3,"title":"Crypto 加密模块","slug":"crypto-加密模块","link":"#crypto-加密模块","children":[]}]},{"level":2,"title":"事件模块","slug":"事件模块","link":"#事件模块","children":[{"level":3,"title":"EventEmitter 事件管理","slug":"eventemitter-事件管理","link":"#eventemitter-事件管理","children":[]},{"level":3,"title":"自定义事件系统","slug":"自定义事件系统","link":"#自定义事件系统","children":[]}]}],"relativePath":"basic/node/modules.md","filePath":"basic/node/modules.md"}'),o={name:"basic/node/modules.md"};function e(t,s,c,r,E,y){return l(),a("div",null,[...s[0]||(s[0]=[p(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /basic/node/modules.md for this page in Markdown format</div><h1 id="node-常用模块" tabindex="-1">node 常用模块 <a class="header-anchor" href="#node-常用模块" aria-label="Permalink to &quot;node 常用模块&quot;">​</a></h1><p>Node.js 的强大功能很大程度上源于其丰富的模块系统，这些模块为开发人员提供了处理各种任务的工具。从文件操作到网络通信，从路径处理到进程管理，Node.js 的内置模块和第三方包构成了一个完整的开发生态系统。掌握这些常用模块对于构建高效的 Node.js 应用程序至关重要。</p><h2 id="文件系统模块" tabindex="-1">文件系统模块 <a class="header-anchor" href="#文件系统模块" aria-label="Permalink to &quot;文件系统模块&quot;">​</a></h2><h3 id="fs-基础操作" tabindex="-1">fs 基础操作 <a class="header-anchor" href="#fs-基础操作" aria-label="Permalink to &quot;fs 基础操作&quot;">​</a></h3><p><code>fs</code> 模块是 Node.js 中处理文件操作的核心模块，提供了文件的读取、写入、删除等操作。该模块提供同步、回调和 Promise 三种使用方式。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { readFile, writeFile, unlink } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 异步读取文件</span></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> data</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> readFile</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;example.txt&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;utf8&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;文件内容:&#39;</span><span style="color:#E1E4E8;">, data);</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;读取文件失败:&#39;</span><span style="color:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 异步写入文件</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#B392F0;"> writeFile</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;output.txt&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;这是写入的内容&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;utf8&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 删除文件</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#B392F0;"> unlink</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><p>文件操作流程示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>打开文件 → 读取/写入数据 → 关闭文件</span></span>
<span class="line"><span>     ↓</span></span>
<span class="line"><span>   错误处理 ← 异常检查</span></span></code></pre></div><h3 id="流式文件处理" tabindex="-1">流式文件处理 <a class="header-anchor" href="#流式文件处理" aria-label="Permalink to &quot;流式文件处理&quot;">​</a></h3><p>对于大文件，使用流式处理可以显著提高内存效率和性能。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createReadStream, createWriteStream } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:fs&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { pipeline } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:stream/promises&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 使用流复制大文件</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> copyLargeFile</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">source</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">target</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> readStream</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createReadStream</span><span style="color:#E1E4E8;">(source);</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> writeStream</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createWriteStream</span><span style="color:#E1E4E8;">(target);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  await</span><span style="color:#B392F0;"> pipeline</span><span style="color:#E1E4E8;">(readStream, writeStream);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;文件复制完成&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 使用示例</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#B392F0;"> copyLargeFile</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;source.mp4&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;copy.mp4&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><p>流处理优势示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>传统方式: [整个文件加载到内存] → 处理 → 写入</span></span>
<span class="line"><span>流式方式: [小块数据] → 处理 → 写入 → [下一块数据] → ...</span></span></code></pre></div><h2 id="路径处理模块" tabindex="-1">路径处理模块 <a class="header-anchor" href="#路径处理模块" aria-label="Permalink to &quot;路径处理模块&quot;">​</a></h2><h3 id="path-常用方法" tabindex="-1">path 常用方法 <a class="header-anchor" href="#path-常用方法" aria-label="Permalink to &quot;path 常用方法&quot;">​</a></h3><p><code>path</code> 模块提供了一系列处理文件路径的工具函数，帮助解决不同操作系统的路径差异问题。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> path </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:path&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { fileURLToPath } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:url&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 获取当前模块的目录名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> __filename</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> fileURLToPath</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">meta</span><span style="color:#E1E4E8;">.url);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> __dirname</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">dirname</span><span style="color:#E1E4E8;">(__filename);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 路径拼接</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> fullPath</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(__dirname, </span><span style="color:#9ECBFF;">&#39;files&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;data.txt&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;完整路径:&#39;</span><span style="color:#E1E4E8;">, fullPath);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 获取文件名和扩展名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> filename</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">basename</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/path/to/file.html&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// 返回: &#39;file.html&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> nameWithoutExt</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">basename</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/path/to/file.html&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;.html&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// 返回: &#39;file&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> ext</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">extname</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/path/to/file.html&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// 返回: &#39;.html&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 路径解析</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> pathObj</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/home/user/dir/file.txt&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(pathObj);</span></span>
<span class="line"><span style="color:#6A737D;">// 返回: { root: &#39;/&#39;, dir: &#39;/home/user/dir&#39;, base: &#39;file.txt&#39;, ext: &#39;.txt&#39;, name: &#39;file&#39; }</span></span></code></pre></div><p>路径解析示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>/home/user/dir/file.txt</span></span>
<span class="line"><span>  root: /</span></span>
<span class="line"><span>  dir: /home/user/dir  </span></span>
<span class="line"><span>  base: file.txt</span></span>
<span class="line"><span>  name: file</span></span>
<span class="line"><span>  ext: .txt</span></span></code></pre></div><h3 id="路径标准化和解析" tabindex="-1">路径标准化和解析 <a class="header-anchor" href="#路径标准化和解析" aria-label="Permalink to &quot;路径标准化和解析&quot;">​</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// 路径标准化</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> normalized</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">normalize</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/foo/bar//baz/asdf/quux/..&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(normalized); </span><span style="color:#6A737D;">// &#39;/foo/bar/baz/asdf&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 相对路径计算</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> relativePath</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">relative</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/data/oracle&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;/data/mysql&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(relativePath); </span><span style="color:#6A737D;">// &#39;../mysql&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 绝对路径解析</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> absolutePath</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;config&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;app.json&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(absolutePath); </span><span style="color:#6A737D;">// 当前工作目录 + /config/app.json</span></span></code></pre></div><h2 id="http-网络模块" tabindex="-1">HTTP 网络模块 <a class="header-anchor" href="#http-网络模块" aria-label="Permalink to &quot;HTTP 网络模块&quot;">​</a></h2><h3 id="创建-http-服务器" tabindex="-1">创建 HTTP 服务器 <a class="header-anchor" href="#创建-http-服务器" aria-label="Permalink to &quot;创建 HTTP 服务器&quot;">​</a></h3><p><code>http</code> 模块允许创建 HTTP 服务器和客户端，是构建 Web 应用的基础。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createServer } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:http&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { URL } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:url&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> server</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createServer</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">req</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // 解析 URL</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> parsedUrl</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> URL</span><span style="color:#E1E4E8;">(req.url </span><span style="color:#F97583;">||</span><span style="color:#9ECBFF;"> &#39;&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">\`http://\${</span><span style="color:#E1E4E8;">req</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">headers</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">host</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 设置 CORS 头</span></span>
<span class="line"><span style="color:#E1E4E8;">  res.</span><span style="color:#B392F0;">setHeader</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Access-Control-Allow-Origin&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;*&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  res.</span><span style="color:#B392F0;">setHeader</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Content-Type&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;application/json&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">  // 路由处理</span></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (parsedUrl.pathname </span><span style="color:#F97583;">===</span><span style="color:#9ECBFF;"> &#39;/api/users&#39;</span><span style="color:#F97583;"> &amp;&amp;</span><span style="color:#E1E4E8;"> req.method </span><span style="color:#F97583;">===</span><span style="color:#9ECBFF;"> &#39;GET&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    res.statusCode </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 200</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    res.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">({ users: [</span><span style="color:#9ECBFF;">&#39;Alice&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;Bob&#39;</span><span style="color:#E1E4E8;">] }));</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    res.statusCode </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> 404</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    res.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">({ error: </span><span style="color:#9ECBFF;">&#39;Not Found&#39;</span><span style="color:#E1E4E8;"> }));</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">server.</span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3000</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;服务器运行在 http://localhost:3000&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><p>HTTP 请求处理流程：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>客户端请求 → 服务器接收 → 解析请求 → 路由匹配 → 处理逻辑 → 生成响应 → 返回客户端</span></span></code></pre></div><h3 id="发起-http-请求" tabindex="-1">发起 HTTP 请求 <a class="header-anchor" href="#发起-http-请求" aria-label="Permalink to &quot;发起 HTTP 请求&quot;">​</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { request } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:http&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 发起 HTTP 请求</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> httpRequest</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">options</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#F97583;"> new</span><span style="color:#79B8FF;"> Promise</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">resolve</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">reject</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    const</span><span style="color:#79B8FF;"> req</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> request</span><span style="color:#E1E4E8;">(options, (</span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      let</span><span style="color:#E1E4E8;"> data </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span></span>
<span class="line"><span style="color:#E1E4E8;">      res.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;data&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">chunk</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        data </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> chunk;</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span></span>
<span class="line"><span style="color:#E1E4E8;">      res.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;end&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        resolve</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">          statusCode: res.statusCode,</span></span>
<span class="line"><span style="color:#E1E4E8;">          headers: res.headers,</span></span>
<span class="line"><span style="color:#E1E4E8;">          data: data</span></span>
<span class="line"><span style="color:#E1E4E8;">        });</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    req.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">, reject);</span></span>
<span class="line"><span style="color:#E1E4E8;">    req.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 使用示例</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> response</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> httpRequest</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  hostname: </span><span style="color:#9ECBFF;">&#39;api.example.com&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  port: </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  path: </span><span style="color:#9ECBFF;">&#39;/data&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  method: </span><span style="color:#9ECBFF;">&#39;GET&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h2 id="实用工具模块" tabindex="-1">实用工具模块 <a class="header-anchor" href="#实用工具模块" aria-label="Permalink to &quot;实用工具模块&quot;">​</a></h2><h3 id="util-工具函数" tabindex="-1">util 工具函数 <a class="header-anchor" href="#util-工具函数" aria-label="Permalink to &quot;util 工具函数&quot;">​</a></h3><p><code>util</code> 模块提供了各种实用函数，包括类型检查、调试工具等。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> util </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:util&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { inspect } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:util&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 回调函数转 Promise</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> sleep</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> util.</span><span style="color:#B392F0;">promisify</span><span style="color:#E1E4E8;">(setTimeout);</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#B392F0;"> sleep</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">// 等待1秒</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 格式化字符串</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> formatted</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> util.</span><span style="color:#B392F0;">format</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;%s:%s&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;foo&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;bar&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;baz&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(formatted); </span><span style="color:#6A737D;">// &#39;foo:bar baz&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 对象深度检查</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> obj</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&#39;Alice&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  address: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    city: </span><span style="color:#9ECBFF;">&#39;Beijing&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    street: { name: </span><span style="color:#9ECBFF;">&#39;Main St&#39;</span><span style="color:#E1E4E8;">, number: </span><span style="color:#79B8FF;">123</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">inspect</span><span style="color:#E1E4E8;">(obj, { </span></span>
<span class="line"><span style="color:#E1E4E8;">  depth: </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 无限递归</span></span>
<span class="line"><span style="color:#E1E4E8;">  colors: </span><span style="color:#79B8FF;">true</span><span style="color:#6A737D;"> // 彩色输出</span></span>
<span class="line"><span style="color:#E1E4E8;">}));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 调试日志</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> debuglog</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> util.</span><span style="color:#B392F0;">debuglog</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;app&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">debuglog</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;这是调试信息 [%d]&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">123</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">// 需要设置环境变量: NODE_DEBUG=app</span></span></code></pre></div><h3 id="类型检查工具" tabindex="-1">类型检查工具 <a class="header-anchor" href="#类型检查工具" aria-label="Permalink to &quot;类型检查工具&quot;">​</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> util </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:util&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 类型检查</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(util.types.</span><span style="color:#B392F0;">isDate</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Date</span><span style="color:#E1E4E8;">())); </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(util.types.</span><span style="color:#B392F0;">isRegExp</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">abc</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">)); </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(util.types.</span><span style="color:#B392F0;">isAnyArrayBuffer</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> ArrayBuffer</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">))); </span><span style="color:#6A737D;">// true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 错误检查</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> error</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> Error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;测试错误&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(util.types.</span><span style="color:#B392F0;">isNativeError</span><span style="color:#E1E4E8;">(error)); </span><span style="color:#6A737D;">// true</span></span></code></pre></div><h2 id="子进程模块" tabindex="-1">子进程模块 <a class="header-anchor" href="#子进程模块" aria-label="Permalink to &quot;子进程模块&quot;">​</a></h2><h3 id="创建和管理子进程" tabindex="-1">创建和管理子进程 <a class="header-anchor" href="#创建和管理子进程" aria-label="Permalink to &quot;创建和管理子进程&quot;">​</a></h3><p><code>child_process</code> 模块允许创建和管理子进程，用于执行系统命令或其他脚本。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { spawn, exec, fork } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:child_process&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { promisify } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:util&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> execAsync</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> promisify</span><span style="color:#E1E4E8;">(exec);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 使用 spawn 执行命令</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> runCommand</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">command</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">args</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> child</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> spawn</span><span style="color:#E1E4E8;">(command, args);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#F97583;"> new</span><span style="color:#79B8FF;"> Promise</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">resolve</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">reject</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">    let</span><span style="color:#E1E4E8;"> stdout </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">    let</span><span style="color:#E1E4E8;"> stderr </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    child.stdout.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;data&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      stdout </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> data.</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    child.stderr.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;data&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      stderr </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> data.</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    child.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;close&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">code</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">      if</span><span style="color:#E1E4E8;"> (code </span><span style="color:#F97583;">===</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#B392F0;">        resolve</span><span style="color:#E1E4E8;">(stdout);</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        reject</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`Process exited with code \${</span><span style="color:#E1E4E8;">code</span><span style="color:#9ECBFF;">}: \${</span><span style="color:#E1E4E8;">stderr</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 执行示例</span></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> result</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> runCommand</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ls&#39;</span><span style="color:#E1E4E8;">, [</span><span style="color:#9ECBFF;">&#39;-la&#39;</span><span style="color:#E1E4E8;">]);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;目录列表:&#39;</span><span style="color:#E1E4E8;">, result);</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;命令执行失败:&#39;</span><span style="color:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><p>子进程通信示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>父进程 ← IPC通道 → 子进程</span></span>
<span class="line"><span>    ↓               ↓</span></span>
<span class="line"><span>  标准输入        标准输出</span></span>
<span class="line"><span>    ↓               ↓</span></span>
<span class="line"><span>  错误处理        信号处理</span></span></code></pre></div><h3 id="进程间通信" tabindex="-1">进程间通信 <a class="header-anchor" href="#进程间通信" aria-label="Permalink to &quot;进程间通信&quot;">​</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// master.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { fork } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:child_process&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> child</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> fork</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;./worker.js&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">child.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;message&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">message</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;来自子进程的消息:&#39;</span><span style="color:#E1E4E8;">, message);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">child.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">({ hello: </span><span style="color:#9ECBFF;">&#39;world&#39;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// worker.js</span></span>
<span class="line"><span style="color:#E1E4E8;">process.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;message&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">message</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;来自父进程的消息:&#39;</span><span style="color:#E1E4E8;">, message);</span></span>
<span class="line"><span style="color:#E1E4E8;">  process.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">({ response: </span><span style="color:#9ECBFF;">&#39;消息已收到&#39;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h2 id="第三方实用模块" tabindex="-1">第三方实用模块 <a class="header-anchor" href="#第三方实用模块" aria-label="Permalink to &quot;第三方实用模块&quot;">​</a></h2><h3 id="axios-http-客户端" tabindex="-1">Axios HTTP 客户端 <a class="header-anchor" href="#axios-http-客户端" aria-label="Permalink to &quot;Axios HTTP 客户端&quot;">​</a></h3><p>Axios 是一个基于 Promise 的 HTTP 客户端，简化了 HTTP 请求的处理。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> axios </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;axios&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 发起 GET 请求</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> response</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> axios.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;https://api.example.com/data&#39;</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  timeout: </span><span style="color:#79B8FF;">5000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  headers: { </span><span style="color:#9ECBFF;">&#39;Authorization&#39;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;Bearer token&#39;</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(response.data);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 并发请求</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">userData</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">productData</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> await</span><span style="color:#79B8FF;"> Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">all</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">  axios.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/users&#39;</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">  axios.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/products&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 创建实例配置</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> apiClient</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> axios.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  baseURL: </span><span style="color:#9ECBFF;">&#39;https://api.example.com&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  timeout: </span><span style="color:#79B8FF;">10000</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 请求拦截器</span></span>
<span class="line"><span style="color:#E1E4E8;">apiClient.interceptors.request.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">config</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  config.headers[</span><span style="color:#9ECBFF;">&#39;X-Requested-With&#39;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;"> &#39;XMLHttpRequest&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> config;</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 响应拦截器</span></span>
<span class="line"><span style="color:#E1E4E8;">apiClient.interceptors.response.</span><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> response,</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#FFAB70;">error</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;API请求错误:&#39;</span><span style="color:#E1E4E8;">, error);</span></span>
<span class="line"><span style="color:#F97583;">    return</span><span style="color:#79B8FF;"> Promise</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">reject</span><span style="color:#E1E4E8;">(error);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre></div><h3 id="dotenv-环境变量管理" tabindex="-1">Dotenv 环境变量管理 <a class="header-anchor" href="#dotenv-环境变量管理" aria-label="Permalink to &quot;Dotenv 环境变量管理&quot;">​</a></h3><p>Dotenv 是一个零依赖模块，用于从 <code>.env</code> 文件加载环境变量。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> dotenv </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;dotenv&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">dotenv.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 使用环境变量</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> dbConfig</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  host: process.env.</span><span style="color:#79B8FF;">DB_HOST</span><span style="color:#F97583;"> ||</span><span style="color:#9ECBFF;"> &#39;localhost&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  port: process.env.</span><span style="color:#79B8FF;">DB_PORT</span><span style="color:#F97583;"> ||</span><span style="color:#79B8FF;"> 5432</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  username: process.env.</span><span style="color:#79B8FF;">DB_USER</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  password: process.env.</span><span style="color:#79B8FF;">DB_PASS</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 自定义环境文件</span></span>
<span class="line"><span style="color:#E1E4E8;">dotenv.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">({ path: </span><span style="color:#9ECBFF;">&#39;.env.production&#39;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;数据库配置:&#39;</span><span style="color:#E1E4E8;">, dbConfig);</span></span></code></pre></div><p>环境变量加载流程：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>.env文件 → dotenv解析 → process.env对象 → 应用使用</span></span></code></pre></div><h3 id="日期处理库-date-fns" tabindex="-1">日期处理库 date-fns <a class="header-anchor" href="#日期处理库-date-fns" aria-label="Permalink to &quot;日期处理库 date-fns&quot;">​</a></h3><p>date-fns 提供了丰富的日期处理函数，类似于 lodash 但对于日期对象。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { </span></span>
<span class="line"><span style="color:#E1E4E8;">  format, </span></span>
<span class="line"><span style="color:#E1E4E8;">  addDays, </span></span>
<span class="line"><span style="color:#E1E4E8;">  differenceInDays, </span></span>
<span class="line"><span style="color:#E1E4E8;">  isBefore,</span></span>
<span class="line"><span style="color:#E1E4E8;">  parseISO </span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;date-fns&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> today</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> Date</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 日期格式化</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">format</span><span style="color:#E1E4E8;">(today, </span><span style="color:#9ECBFF;">&#39;yyyy-MM-dd&#39;</span><span style="color:#E1E4E8;">)); </span><span style="color:#6A737D;">// &#39;2024-01-18&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 日期计算</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> nextWeek</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> addDays</span><span style="color:#E1E4E8;">(today, </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;下周:&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#B392F0;">format</span><span style="color:#E1E4E8;">(nextWeek, </span><span style="color:#9ECBFF;">&#39;yyyy-MM-dd&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 日期比较</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> startDate</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> parseISO</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;2024-01-01&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> daysDiff</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> differenceInDays</span><span style="color:#E1E4E8;">(today, startDate);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">\`今年已经过去了 \${</span><span style="color:#E1E4E8;">daysDiff</span><span style="color:#9ECBFF;">} 天\`</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 日期验证</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> isPast</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> isBefore</span><span style="color:#E1E4E8;">(nextWeek, today);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;是否过去:&#39;</span><span style="color:#E1E4E8;">, isPast);</span></span></code></pre></div><h3 id="调试工具-debug" tabindex="-1">调试工具 Debug <a class="header-anchor" href="#调试工具-debug" aria-label="Permalink to &quot;调试工具 Debug&quot;">​</a></h3><p>Debug 是一个小型的 JavaScript 调试实用程序，可以方便地控制调试输出。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> debug </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;debug&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 创建调试器</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> dbDebug</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> debug</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;app:database&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> apiDebug</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> debug</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;app:api&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> errorDebug</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> debug</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;app:error&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 调试输出</span></span>
<span class="line"><span style="color:#B392F0;">dbDebug</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;连接数据库...&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">apiDebug</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;API请求开始: %s&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;/api/users&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // 模拟操作</span></span>
<span class="line"><span style="color:#B392F0;">  dbDebug</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;数据库查询执行&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">  apiDebug</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;API响应接收&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="color:#B392F0;">  errorDebug</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;操作失败: %o&#39;</span><span style="color:#E1E4E8;">, error);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 启用调试</span></span>
<span class="line"><span style="color:#6A737D;">// 在终端设置: DEBUG=app:* node app.js</span></span>
<span class="line"><span style="color:#6A737D;">// 或指定模块: DEBUG=app:database,app:api node app.js</span></span></code></pre></div><p>调试输出示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>app:database 连接数据库... +0ms</span></span>
<span class="line"><span>app:api API请求开始: /api/users +2ms</span></span>
<span class="line"><span>app:error 操作失败: &lt;错误对象&gt; +1ms</span></span></code></pre></div><h2 id="压缩与加密模块" tabindex="-1">压缩与加密模块 <a class="header-anchor" href="#压缩与加密模块" aria-label="Permalink to &quot;压缩与加密模块&quot;">​</a></h2><h3 id="zlib-压缩解压" tabindex="-1">Zlib 压缩解压 <a class="header-anchor" href="#zlib-压缩解压" aria-label="Permalink to &quot;Zlib 压缩解压&quot;">​</a></h3><p>Zlib 模块提供了数据压缩和解压功能，支持 gzip、deflate 等算法。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createGzip, createGunzip } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:zlib&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { pipeline } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:stream/promises&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createReadStream, createWriteStream } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:fs&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 文件压缩</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> compressFile</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">input</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">output</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> source</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createReadStream</span><span style="color:#E1E4E8;">(input);</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> destination</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createWriteStream</span><span style="color:#E1E4E8;">(output);</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> gzip</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createGzip</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  await</span><span style="color:#B392F0;"> pipeline</span><span style="color:#E1E4E8;">(source, gzip, destination);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;文件压缩完成&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 文件解压</span></span>
<span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> decompressFile</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">input</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">output</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> source</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createReadStream</span><span style="color:#E1E4E8;">(input);</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> destination</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createWriteStream</span><span style="color:#E1E4E8;">(output);</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> gunzip</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createGunzip</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#F97583;">  await</span><span style="color:#B392F0;"> pipeline</span><span style="color:#E1E4E8;">(source, gunzip, destination);</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;文件解压完成&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 使用示例</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#B392F0;"> compressFile</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;large-file.log&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;large-file.log.gz&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">await</span><span style="color:#B392F0;"> decompressFile</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;large-file.log.gz&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;decompressed-file.log&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><h3 id="crypto-加密模块" tabindex="-1">Crypto 加密模块 <a class="header-anchor" href="#crypto-加密模块" aria-label="Permalink to &quot;Crypto 加密模块&quot;">​</a></h3><p>Crypto 模块提供了加密功能，包括哈希、HMAC、加密解密等。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { </span></span>
<span class="line"><span style="color:#E1E4E8;">  createHash, </span></span>
<span class="line"><span style="color:#E1E4E8;">  randomBytes, </span></span>
<span class="line"><span style="color:#E1E4E8;">  createCipheriv, </span></span>
<span class="line"><span style="color:#E1E4E8;">  createDecipheriv </span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:crypto&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 哈希计算</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> hashPassword</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">password</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#B392F0;"> createHash</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;sha256&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">(password)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">digest</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;hex&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 密码验证</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> hashed</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> hashPassword</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;myPassword123&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;密码哈希:&#39;</span><span style="color:#E1E4E8;">, hashed);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 生成随机数据</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> token</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> randomBytes</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">32</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;hex&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;安全令牌:&#39;</span><span style="color:#E1E4E8;">, token);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// AES 加密解密</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> encryptText</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">text</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">key</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> iv</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> randomBytes</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> cipher</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createCipheriv</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aes-256-gcm&#39;</span><span style="color:#E1E4E8;">, key, iv);</span></span>
<span class="line"><span style="color:#F97583;">  let</span><span style="color:#E1E4E8;"> encrypted </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cipher.</span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">(text, </span><span style="color:#9ECBFF;">&#39;utf8&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;hex&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  encrypted </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> cipher.</span><span style="color:#B392F0;">final</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;hex&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> { iv: iv.</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;hex&#39;</span><span style="color:#E1E4E8;">), content: encrypted };</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> decryptText</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">encrypted</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">key</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">iv</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> decipher</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> createDecipheriv</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;aes-256-gcm&#39;</span><span style="color:#E1E4E8;">, key, Buffer.</span><span style="color:#B392F0;">from</span><span style="color:#E1E4E8;">(iv, </span><span style="color:#9ECBFF;">&#39;hex&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#F97583;">  let</span><span style="color:#E1E4E8;"> decrypted </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> decipher.</span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">(encrypted.content, </span><span style="color:#9ECBFF;">&#39;hex&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;utf8&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  decrypted </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> decipher.</span><span style="color:#B392F0;">final</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;utf8&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> decrypted;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="事件模块" tabindex="-1">事件模块 <a class="header-anchor" href="#事件模块" aria-label="Permalink to &quot;事件模块&quot;">​</a></h2><h3 id="eventemitter-事件管理" tabindex="-1">EventEmitter 事件管理 <a class="header-anchor" href="#eventemitter-事件管理" aria-label="Permalink to &quot;EventEmitter 事件管理&quot;">​</a></h3><p><code>events</code> 模块提供了事件驱动编程的实现，是 Node.js 异步架构的基础。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { EventEmitter } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:events&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> MyEmitter</span><span style="color:#F97583;"> extends</span><span style="color:#B392F0;"> EventEmitter</span><span style="color:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> myEmitter</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> MyEmitter</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 监听事件</span></span>
<span class="line"><span style="color:#E1E4E8;">myEmitter.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;event&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;事件触发，数据:&#39;</span><span style="color:#E1E4E8;">, data);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 一次性监听</span></span>
<span class="line"><span style="color:#E1E4E8;">myEmitter.</span><span style="color:#B392F0;">once</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;firstEvent&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;这个监听器只会执行一次&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 错误处理</span></span>
<span class="line"><span style="color:#E1E4E8;">myEmitter.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">error</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;发生错误:&#39;</span><span style="color:#E1E4E8;">, error);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 触发事件</span></span>
<span class="line"><span style="color:#E1E4E8;">myEmitter.</span><span style="color:#B392F0;">emit</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;event&#39;</span><span style="color:#E1E4E8;">, { message: </span><span style="color:#9ECBFF;">&#39;Hello&#39;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#E1E4E8;">myEmitter.</span><span style="color:#B392F0;">emit</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;firstEvent&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">myEmitter.</span><span style="color:#B392F0;">emit</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;firstEvent&#39;</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">// 这次不会触发</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 获取监听器信息</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;事件监听器数量:&#39;</span><span style="color:#E1E4E8;">, myEmitter.</span><span style="color:#B392F0;">listenerCount</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;event&#39;</span><span style="color:#E1E4E8;">));</span></span></code></pre></div><p>事件系统示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>事件发射器 → 注册监听器 → 触发事件 → 执行回调</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>   错误事件 → 错误处理</span></span></code></pre></div><h3 id="自定义事件系统" tabindex="-1">自定义事件系统 <a class="header-anchor" href="#自定义事件系统" aria-label="Permalink to &quot;自定义事件系统&quot;">​</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { EventEmitter } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;node:events&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> Database</span><span style="color:#F97583;"> extends</span><span style="color:#B392F0;"> EventEmitter</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#F97583;">  constructor</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#79B8FF;">    super</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.connected </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">  connect</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#6A737D;">    // 模拟连接过程</span></span>
<span class="line"><span style="color:#B392F0;">    setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#79B8FF;">      this</span><span style="color:#E1E4E8;">.connected </span><span style="color:#F97583;">=</span><span style="color:#79B8FF;"> true</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#79B8FF;">      this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">emit</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;connected&#39;</span><span style="color:#E1E4E8;">, { timestamp: Date.</span><span style="color:#B392F0;">now</span><span style="color:#E1E4E8;">() });</span></span>
<span class="line"><span style="color:#E1E4E8;">    }, </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">  query</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">sql</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.connected) {</span></span>
<span class="line"><span style="color:#79B8FF;">      this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">emit</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;数据库未连接&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#F97583;">      return</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#79B8FF;">    this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">emit</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;query&#39;</span><span style="color:#E1E4E8;">, { sql, time: Date.</span><span style="color:#B392F0;">now</span><span style="color:#E1E4E8;">() });</span></span>
<span class="line"><span style="color:#6A737D;">    // 执行查询...</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> db</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> Database</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">db.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;connected&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;数据库连接成功:&#39;</span><span style="color:#E1E4E8;">, data);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">db.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;query&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;执行查询:&#39;</span><span style="color:#E1E4E8;">, data.sql);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">db.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;error&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">error</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;数据库错误:&#39;</span><span style="color:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">db.</span><span style="color:#B392F0;">connect</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">db.</span><span style="color:#B392F0;">query</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;SELECT * FROM users&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><p>这些常用模块构成了 Node.js 开发的基础，熟练掌握它们能够大大提高开发效率和代码质量。在实际项目中，根据具体需求选择合适的模块和第三方库，可以构建出高效、可靠的应用程序。</p>`,77)])])}const d=n(o,[["render",e]]);export{F as __pageData,d as default};

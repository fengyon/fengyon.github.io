import{_ as a,c as n,o as l,b as p}from"./chunks/framework.CMLuPXeo.js";const y=JSON.parse('{"title":"nextjs 路由系统","description":"","frontmatter":{},"headers":[{"level":2,"title":"路由基础","slug":"路由基础","link":"#路由基础","children":[{"level":3,"title":"Pages Router","slug":"pages-router","link":"#pages-router","children":[]},{"level":3,"title":"App Router","slug":"app-router","link":"#app-router","children":[]}]},{"level":2,"title":"路由类型","slug":"路由类型","link":"#路由类型","children":[{"level":3,"title":"静态路由","slug":"静态路由","link":"#静态路由","children":[]},{"level":3,"title":"动态路由","slug":"动态路由","link":"#动态路由","children":[]},{"level":3,"title":"捕获所有路由","slug":"捕获所有路由","link":"#捕获所有路由","children":[]},{"level":3,"title":"可选捕获所有路由","slug":"可选捕获所有路由","link":"#可选捕获所有路由","children":[]}]},{"level":2,"title":"路由组和私有文件夹","slug":"路由组和私有文件夹","link":"#路由组和私有文件夹","children":[{"level":3,"title":"路由组","slug":"路由组","link":"#路由组","children":[]},{"level":3,"title":"私有文件夹","slug":"私有文件夹","link":"#私有文件夹","children":[]}]},{"level":2,"title":"布局系统","slug":"布局系统","link":"#布局系统","children":[{"level":3,"title":"根布局","slug":"根布局","link":"#根布局","children":[]},{"level":3,"title":"嵌套布局","slug":"嵌套布局","link":"#嵌套布局","children":[]}]},{"level":2,"title":"页面和特殊文件","slug":"页面和特殊文件","link":"#页面和特殊文件","children":[{"level":3,"title":"页面约定","slug":"页面约定","link":"#页面约定","children":[]},{"level":3,"title":"特殊文件","slug":"特殊文件","link":"#特殊文件","children":[]}]},{"level":2,"title":"导航","slug":"导航","link":"#导航","children":[{"level":3,"title":"Link 组件","slug":"link-组件","link":"#link-组件","children":[]},{"level":3,"title":"动态路径导航","slug":"动态路径导航","link":"#动态路径导航","children":[]}]},{"level":2,"title":"路由处理程序","slug":"路由处理程序","link":"#路由处理程序","children":[]},{"level":2,"title":"数据获取","slug":"数据获取","link":"#数据获取","children":[{"level":3,"title":"服务端数据获取","slug":"服务端数据获取","link":"#服务端数据获取","children":[]},{"level":3,"title":"客户端数据获取","slug":"客户端数据获取","link":"#客户端数据获取","children":[]}]}],"relativePath":"framework/nextjs/router.md","filePath":"framework/nextjs/router.md"}'),e={name:"framework/nextjs/router.md"};function o(t,s,c,r,i,E){return l(),n("div",null,[...s[0]||(s[0]=[p(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /framework/nextjs/router.md for this page in Markdown format</div><h1 id="nextjs-路由系统" tabindex="-1">nextjs 路由系统 <a class="header-anchor" href="#nextjs-路由系统" aria-label="Permalink to &quot;nextjs 路由系统&quot;">​</a></h1><p>Next.js 提供了强大且直观的文件系统路由。通过约定的目录结构，你可以轻松创建页面和 API 端点，无需复杂配置。</p><h2 id="路由基础" tabindex="-1">路由基础 <a class="header-anchor" href="#路由基础" aria-label="Permalink to &quot;路由基础&quot;">​</a></h2><p>Next.js 有两种主要的路由系统：<strong>Pages Router</strong> (传统) 和 <strong>App Router</strong> (新版)。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>Pages Router: pages/目录 -&gt; 自动成为路由</span></span>
<span class="line"><span>App Router: app/目录 -&gt; 基于文件系统的路由</span></span></code></pre></div><h3 id="pages-router" tabindex="-1">Pages Router <a class="header-anchor" href="#pages-router" aria-label="Permalink to &quot;Pages Router&quot;">​</a></h3><p>在 <code>pages</code> 目录中，每个文件自动映射为路由。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>pages/index.js → /</span></span>
<span class="line"><span>pages/about.js → /about</span></span>
<span class="line"><span>pages/blog/index.js → /blog</span></span>
<span class="line"><span>pages/contact.js → /contact</span></span></code></pre></div><h3 id="app-router" tabindex="-1">App Router <a class="header-anchor" href="#app-router" aria-label="Permalink to &quot;App Router&quot;">​</a></h3><p>从 Next.js 13 开始，推荐使用 <code>app</code> 目录。项目结构通常如下：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>my-next-app/</span></span>
<span class="line"><span>├── app/</span></span>
<span class="line"><span>│   ├── layout.js       # 根布局</span></span>
<span class="line"><span>│   ├── page.js         # 首页</span></span>
<span class="line"><span>│   ├── about/</span></span>
<span class="line"><span>│   │   └── page.js     # 关于页面</span></span>
<span class="line"><span>│   └── blog/</span></span>
<span class="line"><span>│       ├── page.js     # 博客列表</span></span>
<span class="line"><span>│       └── [slug]/</span></span>
<span class="line"><span>│           └── page.js # 动态路由</span></span>
<span class="line"><span>├── components/         # 可复用组件</span></span>
<span class="line"><span>└── public/            # 静态资源</span></span></code></pre></div><h2 id="路由类型" tabindex="-1">路由类型 <a class="header-anchor" href="#路由类型" aria-label="Permalink to &quot;路由类型&quot;">​</a></h2><h3 id="静态路由" tabindex="-1">静态路由 <a class="header-anchor" href="#静态路由" aria-label="Permalink to &quot;静态路由&quot;">​</a></h3><p>通过创建命名文件或文件夹来定义固定路径。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>├── page.js        → /</span></span>
<span class="line"><span>├── about/</span></span>
<span class="line"><span>│   └── page.js    → /about</span></span>
<span class="line"><span>└── dashboard/</span></span>
<span class="line"><span>    └── page.js    → /dashboard</span></span></code></pre></div><h3 id="动态路由" tabindex="-1">动态路由 <a class="header-anchor" href="#动态路由" aria-label="Permalink to &quot;动态路由&quot;">​</a></h3><p>对于不确定的路由段，使用方括号创建动态路由。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>└── blog/</span></span>
<span class="line"><span>    └── [id]/</span></span>
<span class="line"><span>        └── page.js</span></span></code></pre></div><p>匹配路径：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>/blog/1     → params: {id: &#39;1&#39;}</span></span>
<span class="line"><span>/blog/abc   → params: {id: &#39;abc&#39;}</span></span></code></pre></div><h3 id="捕获所有路由" tabindex="-1">捕获所有路由 <a class="header-anchor" href="#捕获所有路由" aria-label="Permalink to &quot;捕获所有路由&quot;">​</a></h3><p>使用 <code>[...slug]</code> 匹配多个路径段。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>└── shop/</span></span>
<span class="line"><span>    └── [...slug]/</span></span>
<span class="line"><span>        └── page.js</span></span></code></pre></div><p>匹配路径：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>/shop/a        → params: {slug: [&#39;a&#39;]}</span></span>
<span class="line"><span>/shop/a/b/c    → params: {slug: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]}</span></span></code></pre></div><h3 id="可选捕获所有路由" tabindex="-1">可选捕获所有路由 <a class="header-anchor" href="#可选捕获所有路由" aria-label="Permalink to &quot;可选捕获所有路由&quot;">​</a></h3><p>使用 <code>[[...slug]]</code> 使捕获所有路由成为可选。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>└── post/</span></span>
<span class="line"><span>    └── [[...slug]]/</span></span>
<span class="line"><span>        └── page.js</span></span></code></pre></div><p>匹配路径：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>/post         → params: {}</span></span>
<span class="line"><span>/post/a       → params: {slug: [&#39;a&#39;]}</span></span>
<span class="line"><span>/post/a/b     → params: {slug: [&#39;a&#39;, &#39;b&#39;]}</span></span></code></pre></div><h2 id="路由组和私有文件夹" tabindex="-1">路由组和私有文件夹 <a class="header-anchor" href="#路由组和私有文件夹" aria-label="Permalink to &quot;路由组和私有文件夹&quot;">​</a></h2><h3 id="路由组" tabindex="-1">路由组 <a class="header-anchor" href="#路由组" aria-label="Permalink to &quot;路由组&quot;">​</a></h3><p>使用括号 <code>(folderName)</code> 创建路由组，用于组织路由而不影响 URL 路径。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>├── (marketing)/</span></span>
<span class="line"><span>│   ├── page.js        → /</span></span>
<span class="line"><span>│   └── about/</span></span>
<span class="line"><span>│       └── page.js    → /about</span></span>
<span class="line"><span>└── (admin)/</span></span>
<span class="line"><span>    ├── dashboard/</span></span>
<span class="line"><span>    │   └── page.js    → /dashboard</span></span>
<span class="line"><span>    └── users/</span></span>
<span class="line"><span>        └── page.js    → /users</span></span></code></pre></div><h3 id="私有文件夹" tabindex="-1">私有文件夹 <a class="header-anchor" href="#私有文件夹" aria-label="Permalink to &quot;私有文件夹&quot;">​</a></h3><p>使用下划线前缀 <code>_folderName</code> 创建私有文件夹，这些文件夹不会参与路由。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>├── _components/      # 不参与路由</span></span>
<span class="line"><span>├── _utils/          # 不参与路由</span></span>
<span class="line"><span>└── blog/</span></span>
<span class="line"><span>    └── page.js      → /blog</span></span></code></pre></div><h2 id="布局系统" tabindex="-1">布局系统 <a class="header-anchor" href="#布局系统" aria-label="Permalink to &quot;布局系统&quot;">​</a></h2><h3 id="根布局" tabindex="-1">根布局 <a class="header-anchor" href="#根布局" aria-label="Permalink to &quot;根布局&quot;">​</a></h3><p><code>app/layout.js</code> 是根布局，包裹所有页面。</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> RootLayout</span><span style="color:#E1E4E8;">({ </span><span style="color:#FFAB70;">children</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;全局导航&lt;/</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        {children}</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">footer</span><span style="color:#E1E4E8;">&gt;全局页脚&lt;/</span><span style="color:#85E89D;">footer</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="嵌套布局" tabindex="-1">嵌套布局 <a class="header-anchor" href="#嵌套布局" aria-label="Permalink to &quot;嵌套布局&quot;">​</a></h3><p>每个目录可以有自己的布局，这些布局会嵌套在父布局中。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>布局层次：</span></span>
<span class="line"><span>根布局 (app/layout.js)</span></span>
<span class="line"><span>└── 仪表盘布局 (app/dashboard/layout.js)</span></span>
<span class="line"><span>    └── 页面内容 (app/dashboard/page.js)</span></span></code></pre></div><p>示例：</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// app/dashboard/layout.js</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> DashboardLayout</span><span style="color:#E1E4E8;">({ </span><span style="color:#FFAB70;">children</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">aside</span><span style="color:#E1E4E8;">&gt;仪表盘侧边栏&lt;/</span><span style="color:#85E89D;">aside</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">main</span><span style="color:#E1E4E8;">&gt;{children}&lt;/</span><span style="color:#85E89D;">main</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="页面和特殊文件" tabindex="-1">页面和特殊文件 <a class="header-anchor" href="#页面和特殊文件" aria-label="Permalink to &quot;页面和特殊文件&quot;">​</a></h2><h3 id="页面约定" tabindex="-1">页面约定 <a class="header-anchor" href="#页面约定" aria-label="Permalink to &quot;页面约定&quot;">​</a></h3><p>每个路由段都需要 <code>page.js</code> 文件来定义页面内容。</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// app/about/page.js</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> About</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">h1</span><span style="color:#E1E4E8;">&gt;关于我们&lt;/</span><span style="color:#85E89D;">h1</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="特殊文件" tabindex="-1">特殊文件 <a class="header-anchor" href="#特殊文件" aria-label="Permalink to &quot;特殊文件&quot;">​</a></h3><p>Next.js 提供了多种特殊文件来处理特定场景：</p><ul><li><code>loading.js</code> - 显示加载状态</li><li><code>error.js</code> - 错误处理</li><li><code>not-found.js</code> - 404 页面</li><li><code>layout.js</code> - 布局组件</li><li><code>template.js</code> - 可重新渲染的布局</li></ul><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>组件渲染层次：</span></span>
<span class="line"><span>layout.js</span></span>
<span class="line"><span>├── template.js</span></span>
<span class="line"><span>├── error.js</span></span>
<span class="line"><span>├── loading.js</span></span>
<span class="line"><span>├── not-found.js</span></span>
<span class="line"><span>└── page.js</span></span></code></pre></div><h2 id="导航" tabindex="-1">导航 <a class="header-anchor" href="#导航" aria-label="Permalink to &quot;导航&quot;">​</a></h2><h3 id="link-组件" tabindex="-1">Link 组件 <a class="header-anchor" href="#link-组件" aria-label="Permalink to &quot;Link 组件&quot;">​</a></h3><p>使用 <code>next/link</code> 进行客户端导航。</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Link </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;next/link&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> Navigation</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#B392F0;"> href</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">&gt;首页&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#B392F0;"> href</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/about&quot;</span><span style="color:#E1E4E8;">&gt;关于&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#B392F0;"> href</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/blog/first-post&quot;</span><span style="color:#E1E4E8;">&gt;博客&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">nav</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="动态路径导航" tabindex="-1">动态路径导航 <a class="header-anchor" href="#动态路径导航" aria-label="Permalink to &quot;动态路径导航&quot;">​</a></h3><p>对于动态路由，可以 interpolate 路径或使用 URL 对象。</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#B392F0;"> href</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#9ECBFF;">\`/blog/\${</span><span style="color:#E1E4E8;">post</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">slug</span><span style="color:#9ECBFF;">}\`</span><span style="color:#E1E4E8;">}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  {post.title}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 或使用 URL 对象</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Link</span></span>
<span class="line"><span style="color:#B392F0;">  href</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{</span></span>
<span class="line"><span style="color:#E1E4E8;">    pathname: </span><span style="color:#9ECBFF;">&#39;/blog/[slug]&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    query: { slug: post.slug },</span></span>
<span class="line"><span style="color:#E1E4E8;">  }}</span></span>
<span class="line"><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  {post.title}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="路由处理程序" tabindex="-1">路由处理程序 <a class="header-anchor" href="#路由处理程序" aria-label="Permalink to &quot;路由处理程序&quot;">​</a></h2><p>App Router 使用 <code>route.js</code> 文件创建 API 端点。</p><p>示意图：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>├── api/</span></span>
<span class="line"><span>│   └── users/</span></span>
<span class="line"><span>│       └── route.js   → /api/users</span></span>
<span class="line"><span>└── blog/</span></span>
<span class="line"><span>    └── page.js        → /blog</span></span></code></pre></div><p>示例：</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// app/api/users/route.js</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> GET</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> users</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> fetchUsers</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> Response.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">(users)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> POST</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">request</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> user</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#E1E4E8;"> request.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> newUser</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> createUser</span><span style="color:#E1E4E8;">(user)</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> Response.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">(newUser, { status: </span><span style="color:#79B8FF;">201</span><span style="color:#E1E4E8;"> })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="数据获取" tabindex="-1">数据获取 <a class="header-anchor" href="#数据获取" aria-label="Permalink to &quot;数据获取&quot;">​</a></h2><h3 id="服务端数据获取" tabindex="-1">服务端数据获取 <a class="header-anchor" href="#服务端数据获取" aria-label="Permalink to &quot;服务端数据获取&quot;">​</a></h3><p>在服务端组件中直接获取数据。</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> getData</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> res</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> fetch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;https://api.example.com/data&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> res.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#F97583;"> async</span><span style="color:#F97583;"> function</span><span style="color:#B392F0;"> Page</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#79B8FF;"> data</span><span style="color:#F97583;"> =</span><span style="color:#F97583;"> await</span><span style="color:#B392F0;"> getData</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;{data.message}&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="客户端数据获取" tabindex="-1">客户端数据获取 <a class="header-anchor" href="#客户端数据获取" aria-label="Permalink to &quot;客户端数据获取&quot;">​</a></h3><p>使用 <code>use client</code> 指令创建客户端组件。</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#9ECBFF;">&#39;use client&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useState, useEffect } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;react&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> Profile</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#F97583;">  const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setData</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">  useEffect</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    fetch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/api/profile-data&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> res.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">      .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> setData</span><span style="color:#E1E4E8;">(data))</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">data) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;加载中...&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">  return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;{data.name}&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div>`,85)])])}const u=a(e,[["render",o]]);export{y as __pageData,u as default};
